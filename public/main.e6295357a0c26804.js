(self.webpackChunkwhatsapp_front_angular=self.webpackChunkwhatsapp_front_angular||[]).push([[179],{122:(Zt,T,m)=>{"use strict";var p={};m.r(p),m.d(p,{Decoder:()=>Oh,Encoder:()=>iL,PacketType:()=>De,protocol:()=>rL});var b={};m.r(b),m.d(b,{fixNegotiationNeeded:()=>VE,shimAddTrackRemoveTrack:()=>LE,shimAddTrackRemoveTrackWithNative:()=>FE,shimGetDisplayMedia:()=>xV,shimGetSendersWithDtmf:()=>kE,shimGetStats:()=>OE,shimGetUserMedia:()=>AE,shimMediaStream:()=>xE,shimOnTrack:()=>PE,shimPeerConnection:()=>op,shimSenderReceiverGetStats:()=>NE});var N={};m.r(N),m.d(N,{shimGetDisplayMedia:()=>jE,shimGetUserMedia:()=>BE,shimPeerConnection:()=>sp,shimReplaceTrack:()=>UE});var F={};m.r(F),m.d(F,{shimAddTransceiver:()=>JE,shimCreateAnswer:()=>QE,shimCreateOffer:()=>YE,shimGetDisplayMedia:()=>NV,shimGetParameters:()=>KE,shimGetUserMedia:()=>$E,shimOnTrack:()=>HE,shimPeerConnection:()=>ap,shimRTCDataChannel:()=>WE,shimReceiverGetStats:()=>zE,shimRemoveStream:()=>qE,shimSenderGetStats:()=>GE});var ne={};m.r(ne),m.d(ne,{shimAudioContext:()=>sS,shimCallbacksAPI:()=>eS,shimConstraints:()=>nS,shimCreateOfferLegacy:()=>oS,shimGetUserMedia:()=>tS,shimLocalStreamsAPI:()=>ZE,shimRTCIceServerUrls:()=>rS,shimRemoteStreamsAPI:()=>XE,shimTrackEventTransceiver:()=>iS});var tt={};function pe(e){return"function"==typeof e}function v(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}m.r(tt),m.d(tt,{removeExtmapAllowMixed:()=>lp,shimAddIceCandidateNullOrEmpty:()=>_l,shimConnectionState:()=>cp,shimMaxMessageSize:()=>ea,shimRTCIceCandidate:()=>vl,shimSendThrowTypeError:()=>ta});const C=v(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function x(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class H{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){t=o instanceof C?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{P(o)}catch(s){t=t??[],s instanceof C?t=[...t,...s.errors]:t.push(s)}}if(t)throw new C(t)}}add(t){var n;if(t&&t!==this)if(this.closed)P(t);else{if(t instanceof H){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&x(n,t)}remove(t){const{_finalizers:n}=this;n&&x(n,t),t instanceof H&&t._removeParent(this)}}H.EMPTY=(()=>{const e=new H;return e.closed=!0,e})();const se=H.EMPTY;function ke(e){return e instanceof H||e&&"closed"in e&&pe(e.remove)&&pe(e.add)&&pe(e.unsubscribe)}function P(e){pe(e)?e():e.unsubscribe()}const Ce={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},me={setTimeout(e,t,...n){const{delegate:r}=me;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=me;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function g(e){me.setTimeout(()=>{const{onUnhandledError:t}=Ce;if(!t)throw e;t(e)})}function _(){}const w=te("C",void 0,void 0);function te(e,t,n){return{kind:e,value:t,error:n}}let O=null;function le(e){if(Ce.useDeprecatedSynchronousErrorHandling){const t=!O;if(t&&(O={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=O;if(O=null,n)throw r}}else e()}class q extends H{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ke(t)&&t.add(this)):this.destination=aa}static create(t,n,r){return new Ne(t,n,r)}next(t){this.isStopped?ot(function k(e){return te("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ot(function E(e){return te("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ot(w,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Z=Function.prototype.bind;function Ct(e,t){return Z.call(e,t)}class Ke{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Dt(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Dt(r)}else Dt(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Dt(n)}}}class Ne extends q{constructor(t,n,r){let i;if(super(),pe(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ce.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ct(t.next,o),error:t.error&&Ct(t.error,o),complete:t.complete&&Ct(t.complete,o)}):i=t}this.destination=new Ke(i)}}function Dt(e){Ce.useDeprecatedSynchronousErrorHandling?function Je(e){Ce.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=e)}(e):g(e)}function ot(e,t){const{onStoppedNotification:n}=Ce;n&&me.setTimeout(()=>n(e,t))}const aa={closed:!0,next:_,error:function Tt(e){throw e},complete:_},ue="function"==typeof Symbol&&Symbol.observable||"@@observable";function Un(e){return e}let Se=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function Kr(e){return e&&e instanceof q||function No(e){return e&&pe(e.next)&&pe(e.error)&&pe(e.complete)}(e)&&ke(e)}(n)?n:new Ne(n,r,i);return le(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ai(r))((i,o)=>{const s=new Ne({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ue](){return this}pipe(...n){return function Ri(e){return 0===e.length?Un:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Ai(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Ai(e){var t;return null!==(t=e??Ce.Promise)&&void 0!==t?t:Promise}const Tn=v(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let on=(()=>{class e extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Fo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Tn}next(n){le(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){le(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){le(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?se:(this.currentObservers=null,o.push(n),new H(()=>{this.currentObservers=null,x(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Se;return n.source=this,n}}return e.create=(t,n)=>new Fo(t,n),e})();class Fo extends on{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:se}}function xi(e){return pe(e?.lift)}function st(e){return t=>{if(xi(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(e,t,n,r,i){return new Rr(e,t,n,r,i)}class Rr extends q{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function be(e,t){return st((n,r)=>{let i=0;n.subscribe(nt(r,o=>{r.next(e.call(t,o,i++))}))})}function Yr(e){return this instanceof Yr?(this.v=e,this):new Yr(e)}function MS(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(y,D){o.push([f,h,y,D])>1||a(f,h)})})}function a(f,h){try{!function c(f){f.value instanceof Yr?Promise.resolve(f.value.v).then(l,u):d(o[0][2],f)}(r[f](h))}catch(y){d(o[0][3],y)}}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function IS(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Rp(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=e[o](s)).done,s.value)})}}}const Ap=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function xp(e){return pe(e?.then)}function Pp(e){return pe(e[ue])}function kp(e){return Symbol.asyncIterator&&pe(e?.[Symbol.asyncIterator])}function Op(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Np=function AS(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Fp(e){return pe(e?.[Np])}function Lp(e){return MS(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Yr(n.read());if(i)return yield Yr(void 0);yield yield Yr(r)}}finally{n.releaseLock()}})}function Vp(e){return pe(e?.getReader)}function Hn(e){if(e instanceof Se)return e;if(null!=e){if(Pp(e))return function xS(e){return new Se(t=>{const n=e[ue]();if(pe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Ap(e))return function PS(e){return new Se(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(xp(e))return function kS(e){return new Se(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,g)})}(e);if(kp(e))return Bp(e);if(Fp(e))return function OS(e){return new Se(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Vp(e))return function NS(e){return Bp(Lp(e))}(e)}throw Op(e)}function Bp(e){return new Se(t=>{(function FS(e,t){var n,r,i,o;return function wS(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=IS(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function ar(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function St(e,t,n=1/0){return pe(t)?St((r,i)=>be((o,s)=>t(r,o,i,s))(Hn(e(r,i))),n):("number"==typeof t&&(n=t),st((r,i)=>function LS(e,t,n,r,i,o,s,a){const c=[];let l=0,u=0,d=!1;const f=()=>{d&&!c.length&&!l&&t.complete()},h=D=>l<r?y(D):c.push(D),y=D=>{o&&t.next(D),l++;let A=!1;Hn(n(D,u++)).subscribe(nt(t,R=>{i?.(R),o?h(R):t.next(R)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){const R=c.shift();s?ar(t,s,()=>y(R)):y(R)}f()}catch(R){t.error(R)}}))};return e.subscribe(nt(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}function Pi(e=1/0){return St(Un,e)}const cr=new Se(e=>e.complete());function Tl(e){return e[e.length-1]}function jp(e){return pe(Tl(e))?e.pop():void 0}function Lo(e){return function BS(e){return e&&pe(e.schedule)}(Tl(e))?e.pop():void 0}function Up(e,t=0){return st((n,r)=>{n.subscribe(nt(r,i=>ar(r,e,()=>r.next(i),t),()=>ar(r,e,()=>r.complete(),t),i=>ar(r,e,()=>r.error(i),t)))})}function $p(e,t=0){return st((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Hp(e,t){if(!e)throw new Error("Iterable cannot be null");return new Se(n=>{ar(n,t,()=>{const r=e[Symbol.asyncIterator]();ar(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function pt(e,t){return t?function qS(e,t){if(null!=e){if(Pp(e))return function US(e,t){return Hn(e).pipe($p(t),Up(t))}(e,t);if(Ap(e))return function HS(e,t){return new Se(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(xp(e))return function $S(e,t){return Hn(e).pipe($p(t),Up(t))}(e,t);if(kp(e))return Hp(e,t);if(Fp(e))return function GS(e,t){return new Se(n=>{let r;return ar(n,t,()=>{r=e[Np](),ar(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}(e,t);if(Vp(e))return function zS(e,t){return Hp(Lp(e),t)}(e,t)}throw Op(e)}(e,t):Hn(e)}function Vo(e){return e<=0?()=>cr:st((t,n)=>{let r=0;t.subscribe(nt(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Ml(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(Vo(1)).subscribe(()=>e())}function Fe(e){for(let t in e)if(e[t]===Fe)return t;throw Error("Could not find renamed property on target object.")}function Il(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Le(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Le).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Rl(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const KS=Fe({__forward_ref__:Fe});function Be(e){return e.__forward_ref__=Be,e.toString=function(){return Le(this())},e}function X(e){return Al(e)?e():e}function Al(e){return"function"==typeof e&&e.hasOwnProperty(KS)&&e.__forward_ref__===Be}class z extends Error{constructor(t,n){super(function la(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function ie(e){return"string"==typeof e?e:null==e?"":String(e)}function ua(e,t){throw new z(-201,!1)}function an(e,t){null==e&&function Re(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Y(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function cn(e){return{providers:e.providers||[],imports:e.imports||[]}}function xl(e){return Gp(e,da)||Gp(e,qp)}function Gp(e,t){return e.hasOwnProperty(t)?e[t]:null}function zp(e){return e&&(e.hasOwnProperty(Pl)||e.hasOwnProperty(rw))?e[Pl]:null}const da=Fe({\u0275prov:Fe}),Pl=Fe({\u0275inj:Fe}),qp=Fe({ngInjectableDef:Fe}),rw=Fe({ngInjectorDef:Fe});var W=(()=>((W=W||{})[W.Default=0]="Default",W[W.Host=1]="Host",W[W.Self=2]="Self",W[W.SkipSelf=4]="SkipSelf",W[W.Optional=8]="Optional",W))();let kl;function Gn(e){const t=kl;return kl=e,t}function Wp(e,t,n){const r=xl(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&W.Optional?null:void 0!==t?t:void ua(Le(e))}function Ar(e){return{toString:e}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),zn=(()=>{return(e=zn||(zn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",zn;var e})();const Oe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ki={},Te=[],fa=Fe({\u0275cmp:Fe}),Ol=Fe({\u0275dir:Fe}),Nl=Fe({\u0275pipe:Fe}),Jp=Fe({\u0275mod:Fe}),ur=Fe({\u0275fac:Fe}),Bo=Fe({__NG_ELEMENT_ID__:Fe});let ow=0;function Mt(e){return Ar(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Te,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||zn.Emulated,id:"c"+ow++,styles:e.styles||Te,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return i.inputs=Qp(e.inputs,r),i.outputs=Qp(e.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Kp).filter(Yp):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(jt).filter(Yp):null,i})}function Kp(e){return Ve(e)||Bt(e)}function Yp(e){return null!==e}const aw={};function mn(e){return Ar(()=>{const t={type:e.type,bootstrap:e.bootstrap||Te,declarations:e.declarations||Te,imports:e.imports||Te,exports:e.exports||Te,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(aw[e.id]=e.type),t})}function Qp(e,t){if(null==e)return ki;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const ee=Mt;function Xt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ve(e){return e[fa]||null}function Bt(e){return e[Ol]||null}function jt(e){return e[Nl]||null}function ln(e,t){const n=e[Jp]||null;if(!n&&!0===t)throw new Error(`Type ${Le(e)} does not have '\u0275mod' property.`);return n}function en(e){return Array.isArray(e)&&"object"==typeof e[1]}function Rn(e){return Array.isArray(e)&&!0===e[1]}function Vl(e){return 0!=(8&e.flags)}function ma(e){return 2==(2&e.flags)}function ya(e){return 1==(1&e.flags)}function An(e){return null!==e.template}function fw(e){return 0!=(256&e[2])}function ti(e,t){return e.hasOwnProperty(ur)?e[ur]:null}class gw{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function vn(){return eg}function eg(e){return e.type.prototype.ngOnChanges&&(e.setInput=yw),mw}function mw(){const e=ng(this),t=e?.current;if(t){const n=e.previous;if(n===ki)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function yw(e,t,n,r){const i=ng(e)||function vw(e,t){return e[tg]=t}(e,{previous:ki,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new gw(c&&c.currentValue,t,s===ki),e[r]=t}vn.ngInherit=!0;const tg="__ngSimpleChanges__";function ng(e){return e[tg]||null}let Hl;function Ye(e){return!!e.listen}const ig={createRenderer:(e,t)=>{throw new Error("Renderer3 disabled")}};function at(e){for(;Array.isArray(e);)e=e[0];return e}function va(e,t){return at(t[e])}function Cn(e,t){return at(t[e.index])}function zl(e,t){return e.data[t]}function Vi(e,t){return e[t]}function dn(e,t){const n=t[e];return en(n)?n:n[0]}function ql(e){return 64==(64&e[2])}function xr(e,t){return null==t?null:e[t]}function sg(e){e[18]=0}function Wl(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const re={lFrame:gg(null),bindingsEnabled:!0};function cg(){return re.bindingsEnabled}function I(){return re.lFrame.lView}function Ee(){return re.lFrame.tView}function Bi(e){return re.lFrame.contextLView=e,e[8]}function ji(e){return re.lFrame.contextLView=null,e}function gt(){let e=lg();for(;null!==e&&64===e.type;)e=e.parent;return e}function lg(){return re.lFrame.currentTNode}function qn(e,t){const n=re.lFrame;n.currentTNode=e,n.isParent=t}function Jl(){return re.lFrame.isParent}function Ut(){const e=re.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Ui(){return re.lFrame.bindingIndex++}function fr(e){const t=re.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Fw(e,t){const n=re.lFrame;n.bindingIndex=n.bindingRootIndex=e,Yl(t)}function Yl(e){re.lFrame.currentDirectiveIndex=e}function Zl(e){re.lFrame.currentQueryIndex=e}function Vw(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function hg(e,t,n){if(n&W.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&W.Host||(i=Vw(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=re.lFrame=pg();return r.currentTNode=t,r.lView=e,!0}function Ca(e){const t=pg(),n=e[1];re.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function pg(){const e=re.lFrame,t=null===e?null:e.child;return null===t?gg(e):t}function gg(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function mg(){const e=re.lFrame;return re.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const yg=mg;function Da(){const e=mg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function $t(){return re.lFrame.selectedIndex}function Pr(e){re.lFrame.selectedIndex=e}function Qe(){const e=re.lFrame;return zl(e.tView,e.selectedIndex)}function hr(){re.lFrame.currentNamespace="svg"}function Xl(){!function $w(){re.lFrame.currentNamespace=null}()}function ba(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),c&&(e.viewHooks||(e.viewHooks=[])).push(-n,c),l&&((e.viewHooks||(e.viewHooks=[])).push(n,l),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,l)),null!=u&&(e.destroyHooks||(e.destroyHooks=[])).push(n,u)}}function Ea(e,t,n){vg(e,t,3,n)}function Sa(e,t,n,r){(3&e[2])===n&&vg(e,t,n,r)}function eu(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function vg(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let c=void 0!==r?65535&e[18]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(e[18]+=65536),(a<o||-1==o)&&(zw(e,n,t,c),e[18]=(4294901760&e[18])+c+2),c++}function zw(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Go{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function wa(e,t,n){const r=Ye(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,s):t.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];nu(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function _g(e){return 3===e||4===e||6===e}function nu(e){return 64===e.charCodeAt(0)}function Ta(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Cg(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Cg(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Dg(e){return-1!==e}function $i(e){return 32767&e}function Hi(e,t){let n=function Yw(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let ru=!0;function Ma(e){const t=ru;return ru=e,t}let Qw=0;const Wn={};function qo(e,t){const n=ou(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,iu(r.data,e),iu(t,null),iu(r.blueprint,null));const i=Ia(e,t),o=e.injectorIndex;if(Dg(i)){const s=$i(i),a=Hi(i,t),c=a[1].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function iu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ou(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ia(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Ag(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ra(e,t,n){!function Zw(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bo)&&(r=n[Bo]),null==r&&(r=n[Bo]=Qw++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Sg(e,t,n){if(n&W.Optional)return e;ua()}function wg(e,t,n,r){if(n&W.Optional&&void 0===r&&(r=null),0==(n&(W.Self|W.Host))){const i=e[9],o=Gn(void 0);try{return i?i.get(t,r,n&W.Optional):Wp(t,r,n&W.Optional)}finally{Gn(o)}}return Sg(r,0,n)}function Tg(e,t,n,r=W.Default,i){if(null!==e){if(1024&t[2]){const s=function rT(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=Mg(o,s,n,r|W.Self,Wn);if(a!==Wn)return a;let c=o.parent;if(!c){const l=s[21];if(l){const u=l.get(n,Wn,r);if(u!==Wn)return u}c=Ag(s),s=s[15]}o=c}return i}(e,t,n,r,Wn);if(s!==Wn)return s}const o=Mg(e,t,n,r,Wn);if(o!==Wn)return o}return wg(t,n,r,i)}function Mg(e,t,n,r,i){const o=function tT(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Bo)?e[Bo]:void 0;return"number"==typeof t?t>=0?255&t:nT:t}(n);if("function"==typeof o){if(!hg(t,e,r))return r&W.Host?Sg(i,0,r):wg(t,n,r,i);try{const s=o(r);if(null!=s||r&W.Optional)return s;ua()}finally{yg()}}else if("number"==typeof o){let s=null,a=ou(e,t),c=-1,l=r&W.Host?t[16][6]:null;for((-1===a||r&W.SkipSelf)&&(c=-1===a?Ia(e,t):t[a+8],-1!==c&&Rg(r,!1)?(s=t[1],a=$i(c),t=Hi(c,t)):a=-1);-1!==a;){const u=t[1];if(Ig(o,a,u.data)){const d=eT(a,t,n,s,r,l);if(d!==Wn)return d}c=t[a+8],-1!==c&&Rg(r,t[1].data[a+8]===l)&&Ig(o,a,t)?(s=u,a=$i(c),t=Hi(c,t)):a=-1}}return i}function eT(e,t,n,r,i,o){const s=t[1],a=s.data[e+8],u=function Aa(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,c=e.directiveStart,u=o>>20,f=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<f;h++){const y=s[h];if(h<c&&n===y||h>=c&&y.type===n)return h}if(i){const h=s[c];if(h&&An(h)&&h.type===n)return c}return null}(a,s,n,null==r?ma(a)&&ru:r!=s&&0!=(3&a.type),i&W.Host&&o===a);return null!==u?Wo(t,s,u,a):Wn}function Wo(e,t,n,r){let i=e[n];const o=t.data;if(function qw(e){return e instanceof Go}(i)){const s=i;s.resolving&&function YS(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new z(-200,`Circular dependency in DI detected for ${e}${n}`)}(function we(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ie(e)}(o[n]));const a=Ma(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Gn(s.injectImpl):null;hg(e,r,W.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Gw(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=eg(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==c&&Gn(c),Ma(a),s.resolving=!1,yg()}}return i}function Ig(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Rg(e,t){return!(e&W.Self||e&W.Host&&t)}class Gi{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Tg(this._tNode,this._lView,t,r,n)}}function nT(){return new Gi(gt(),I())}function su(e){return Al(e)?()=>{const t=su(X(e));return t&&t()}:ti(e)}function Ag(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const qi="__parameters__";function Ji(e,t,n){return Ar(()=>{const r=function au(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(qi)?c[qi]:Object.defineProperty(c,qi,{value:[]})[qi];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class J{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const oT=new J("AnalyzeForEntryComponents");function pr(e,t){e.forEach(n=>Array.isArray(n)?pr(n,t):t(n))}function Pg(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function xa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function hn(e,t,n){let r=Ki(e,t);return r>=0?e[1|r]=n:(r=~r,function cT(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function lu(e,t){const n=Ki(e,t);if(n>=0)return e[1|n]}function Ki(e,t){return function Ng(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}const Zo={},du="__NG_DI_FLAG__",ka="ngTempTokenPath",mT=/\n/gm,Fg="__source";let Xo;function Oa(e){const t=Xo;return Xo=e,t}function vT(e,t=W.Default){if(void 0===Xo)throw new z(-203,!1);return null===Xo?Wp(e,void 0,t):Xo.get(e,t&W.Optional?null:void 0,t)}function j(e,t=W.Default){return(function iw(){return kl}()||vT)(X(e),t)}function ni(e,t=W.Default){return j(e,t)}function fu(e){const t=[];for(let n=0;n<e.length;n++){const r=X(e[n]);if(Array.isArray(r)){if(0===r.length)throw new z(900,!1);let i,o=W.Default;for(let s=0;s<r.length;s++){const a=r[s],c=_T(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}t.push(j(i,o))}else t.push(j(r))}return t}function es(e,t){return e[du]=t,e.prototype[du]=t,e}function _T(e){return e[du]}const Or=es(Ji("Optional"),8),ts=es(Ji("SkipSelf"),4);class Jg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Nr(e){return e instanceof Jg?e.changingThisBreaksApplicationSecurity:e}const $T=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,HT=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ct=(()=>((ct=ct||{})[ct.NONE=0]="NONE",ct[ct.HTML=1]="HTML",ct[ct.STYLE=2]="STYLE",ct[ct.SCRIPT=3]="SCRIPT",ct[ct.URL=4]="URL",ct[ct.RESOURCE_URL=5]="RESOURCE_URL",ct))();function ri(e){const t=function ss(){const e=I();return e&&e[12]}();return t?t.sanitize(ct.URL,e)||"":function is(e,t){const n=function VT(e){return e instanceof Jg&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}(e,"URL")?Nr(e):function Ba(e){return(e=String(e)).match($T)||e.match(HT)?e:"unsafe:"+e}(ie(e))}function Du(e){return e.ngOriginalError}class Zi{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Du(t);for(;n&&Du(n);)n=Du(n);return n||null}}const bu=new Map;let dM=0;const Su="__ngContext__";function xt(e,t){en(t)?(e[Su]=t[20],function hM(e){bu.set(e[20],e)}(t)):e[Su]=t}function as(e){const t=e[Su];return"number"==typeof t?function im(e){return bu.get(e)||null}(t):t||null}function wu(e){const t=as(e);return t?en(t)?t:t.lView:null}const bM=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Oe))();function gr(e){return e instanceof Function?e():e}var tn=(()=>((tn=tn||{})[tn.Important=1]="Important",tn[tn.DashCase=2]="DashCase",tn))();function Mu(e,t){return undefined(e,t)}function cs(e){const t=e[3];return Rn(t)?t[3]:t}function Iu(e){return hm(e[13])}function Ru(e){return hm(e[4])}function hm(e){for(;null!==e&&!Rn(e);)e=e[4];return e}function eo(e,t,n,r,i){if(null!=r){let o,s=!1;Rn(r)?o=r:en(r)&&(s=!0,r=r[0]);const a=at(r);0===e&&null!==n?null==i?_m(t,n,a):ii(t,n,a,i||null,!0):1===e&&null!==n?ii(t,n,a,i||null,!0):2===e?function Mm(e,t,n){const r=Ua(e,t);r&&function LM(e,t,n,r){Ye(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function jM(e,t,n,r,i){const o=n[7];o!==at(n)&&eo(t,e,r,o,i);for(let a=10;a<n.length;a++){const c=n[a];ls(c[1],c,e,t,r,o)}}(t,e,o,n,i)}}function xu(e,t,n){if(Ye(e))return e.createElement(t,n);{const r=null!==n?function bw(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function gm(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,Wl(i,-1)),n.splice(r,1)}function Pu(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&gm(i,r),t>0&&(e[n-1][4]=r[4]);const o=xa(e,10+t);!function RM(e,t){ls(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function mm(e,t){if(!(128&t[2])){const n=t[11];Ye(n)&&n.destroyNode&&ls(e,t,n,3,null,null),function PM(e){let t=e[13];if(!t)return ku(e[1],e);for(;t;){let n=null;if(en(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)en(t)&&ku(t[1],t),t=t[3];null===t&&(t=e),en(t)&&ku(t[1],t),n=t&&t[4]}t=n}}(t)}}function ku(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function FM(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Go)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];try{c.call(a)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function NM(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(t):at(t[s]),c=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?a.removeEventListener(n[o],c,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&Ye(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Rn(t[3])){n!==t[3]&&gm(n,t);const r=t[19];null!==r&&r.detachView(e)}!function pM(e){bu.delete(e[20])}(t)}}function ym(e,t,n){return function vm(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===zn.None||i===zn.Emulated)return null}return Cn(r,n)}(e,t.parent,n)}function ii(e,t,n,r,i){Ye(e)?e.insertBefore(t,n,r,i):(Dm(t)?t.content:t).insertBefore(n,r,i)}function _m(e,t,n){Ye(e)?e.appendChild(t,n):(Dm(t)?t.content:t).appendChild(n)}function Cm(e,t,n,r,i){null!==r?ii(e,t,n,r,i):_m(e,t,n)}function Dm(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}function Ua(e,t){return Ye(e)?e.parentNode(t):t.parentNode}let Sm=function Em(e,t,n){return 40&e.type?Cn(e,n):null};function $a(e,t,n,r){const i=ym(e,r,t),o=t[11],a=function bm(e,t,n){return Sm(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)Cm(o,i,n[c],a,!1);else Cm(o,i,n,a,!1)}function Ha(e,t){if(null!==t){const n=t.type;if(3&n)return Cn(t,e);if(4&n)return Nu(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ha(e,r);{const i=e[t.index];return Rn(i)?Nu(-1,i):at(i)}}if(32&n)return Mu(t,e)()||at(e[t.index]);{const r=Tm(e,t);return null!==r?Array.isArray(r)?r[0]:Ha(cs(e[16]),r):Ha(e,t.next)}}return null}function Tm(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Nu(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return Ha(r,i)}return t[7]}function Fu(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===t&&(a&&xt(at(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Fu(e,t,n.child,r,i,o,!1),eo(t,e,i,a,o);else if(32&c){const l=Mu(n,r);let u;for(;u=l();)eo(t,e,i,u,o);eo(t,e,i,a,o)}else 16&c?Im(e,t,r,n,i,o):eo(t,e,i,a,o);n=s?n.projectionNext:n.next}}function ls(e,t,n,r,i,o){Fu(n,r,e.firstChild,t,i,o,!1)}function Im(e,t,n,r,i,o){const s=n[16],c=s[6].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)eo(t,e,i,c[l],o);else Fu(e,t,c,s[3],i,o,!0)}function Rm(e,t,n){Ye(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Lu(e,t,n){Ye(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Am(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const xm="ng-template";function $M(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Am(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Pm(e){return 4===e.type&&e.value!==xm}function HM(e,t,n){return t===(4!==e.type||n?e.value:xm)}function GM(e,t,n){let r=4;const i=e.attrs||[],o=function WM(e){for(let t=0;t<e.length;t++)if(_g(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!HM(e,c,n)||""===c&&1===t.length){if(xn(r))return!1;s=!0}}else{const l=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!$M(e.attrs,l,n)){if(xn(r))return!1;s=!0}continue}const d=zM(8&r?"class":c,i,Pm(e),n);if(-1===d){if(xn(r))return!1;s=!0;continue}if(""!==l){let f;f=d>o?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Am(h,l,0)||2&r&&l!==f){if(xn(r))return!1;s=!0}}}}else{if(!s&&!xn(r)&&!xn(c))return!1;if(s&&xn(c))continue;s=!1,r=c|1&r}}return xn(r)||s}function xn(e){return 0==(1&e)}function zM(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function JM(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function km(e,t,n=!1){for(let r=0;r<t.length;r++)if(GM(e,t[r],n))return!0;return!1}function Om(e,t){return e?":not("+t.trim()+")":t}function YM(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!xn(s)&&(t+=Om(o,i),i=""),r=s,o=o||!xn(r);n++}return""!==i&&(t+=Om(o,i)),t}const oe={};function Me(e){Nm(Ee(),I(),$t()+e,!1)}function Nm(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&Ea(t,o,n)}else{const o=e.preOrderHooks;null!==o&&Sa(t,o,0,n)}Pr(n)}const Vu=new J("ENVIRONMENT_INITIALIZER"),Bm=new J("INJECTOR_DEF_TYPES");function i1(...e){return{\u0275providers:jm(0,e)}}function jm(e,...t){const n=[],r=new Set;let i;return pr(t,o=>{const s=o;Bu(s,n,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&Um(i,n),n}function Um(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];pr(i,o=>{t.push(o)})}}function Bu(e,t,n,r){if(!(e=X(e)))return!1;let i=null,o=zp(e);const s=!o&&Ve(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const c=e.ngModule;if(o=zp(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Bu(l,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{pr(o.imports,u=>{Bu(u,t,n,r)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&Um(l,t)}if(!a){const l=ti(i)||(()=>new i);t.push({provide:i,useFactory:l,deps:Te},{provide:Bm,useValue:i,multi:!0},{provide:Vu,useValue:()=>j(i),multi:!0})}const c=o.providers;null==c||a||pr(c,u=>{t.push(u)})}}return i!==e&&void 0!==e.providers}const o1=Fe({provide:String,useValue:Fe});function ju(e){return null!==e&&"object"==typeof e&&o1 in e}function oi(e){return"function"==typeof e}const Uu=new J("INJECTOR",-1);class Gm{get(t,n=Zo){if(n===Zo){const r=new Error(`NullInjectorError: No provider for ${Le(t)}!`);throw r.name="NullInjectorError",r}return n}}const $u=new J("Set Injector scope."),Ga={},a1={};let Hu;function Gu(){return void 0===Hu&&(Hu=new Gm),Hu}class si{}class zm extends si{constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qu(t,s=>this.processProvider(s)),this.records.set(Uu,to(void 0,this)),i.has("environment")&&this.records.set(si,to(void 0,this));const o=this.records.get($u);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Bm.multi,Te,W.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}get(t,n=Zo,r=W.Default){this.assertNotDestroyed();const i=Oa(this),o=Gn(void 0);try{if(!(r&W.SkipSelf)){let a=this.records.get(t);if(void 0===a){const c=function f1(e){return"function"==typeof e||"object"==typeof e&&e instanceof J}(t)&&xl(t);a=c&&this.injectableDefInScope(c)?to(zu(t),Ga):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&W.Self?Gu():this.parent).get(t,n=r&W.Optional&&n===Zo?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[ka]=s[ka]||[]).unshift(Le(t)),i)throw s;return function CT(e,t,n,r){const i=e[ka];throw t[Fg]&&i.unshift(t[Fg]),e.message=function DT(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Le(t);if(Array.isArray(t))i=t.map(Le).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Le(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(mT,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[ka]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{Gn(o),Oa(i)}}resolveInjectorInitializers(){const t=Oa(this),n=Gn(void 0);try{const r=this.get(Vu.multi,Te,W.Self);for(const i of r)i()}finally{Oa(t),Gn(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Le(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(t){let n=oi(t=X(t))?t:X(t&&t.provide);const r=function l1(e){return ju(e)?to(void 0,e.useValue):to(qm(e),Ga)}(t);if(oi(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=to(void 0,Ga,!0),i.factory=()=>fu(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Ga&&(n.value=a1,n.value=n.factory()),"object"==typeof n.value&&n.value&&function d1(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=X(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function zu(e){const t=xl(e),n=null!==t?t.factory:ti(e);if(null!==n)return n;if(e instanceof J)throw new z(204,!1);if(e instanceof Function)return function c1(e){const t=e.length;if(t>0)throw function Qo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new z(204,!1);const n=function tw(e){const t=e&&(e[da]||e[qp]);if(t){const n=function nw(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new z(204,!1)}function qm(e,t,n){let r;if(oi(e)){const i=X(e);return ti(i)||zu(i)}if(ju(e))r=()=>X(e.useValue);else if(function Hm(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...fu(e.deps||[]));else if(function $m(e){return!(!e||!e.useExisting)}(e))r=()=>j(X(e.useExisting));else{const i=X(e&&(e.useClass||e.provide));if(!function u1(e){return!!e.deps}(e))return ti(i)||zu(i);r=()=>new i(...fu(e.deps))}return r}function to(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function h1(e){return!!e.\u0275providers}function qu(e,t){for(const n of e)Array.isArray(n)?qu(n,t):h1(n)?qu(n.\u0275providers,t):t(n)}function Wm(e,t=null,n=null,r){const i=Jm(e,t,n,r);return i.resolveInjectorInitializers(),i}function Jm(e,t=null,n=null,r,i=new Set){const o=[n||Te,i1(e)];return r=r||("object"==typeof e?void 0:Le(e)),new zm(o,t||Gu(),r||null,i)}let Pt=(()=>{class e{static create(n,r){if(Array.isArray(n))return Wm({name:""},r,n,"");{const i=n.name??"";return Wm({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=Zo,e.NULL=new Gm,e.\u0275prov=Y({token:e,providedIn:"any",factory:()=>j(Uu)}),e.__NG_ELEMENT_ID__=-1,e})();function S(e,t=W.Default){const n=I();return null===n?j(e,t):Tg(gt(),n,X(e),t)}function Qu(){throw new Error("invalid")}function qa(e,t){return e<<17|t<<2}function Pn(e){return e>>17&32767}function td(e){return 2|e}function mr(e){return(131068&e)>>2}function nd(e,t){return-131069&e|t<<2}function rd(e){return 1|e}function py(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=e.data[o];Zl(i),s.contentQueries(2,t[o],o)}}}function us(e,t,n,r,i,o,s,a,c,l,u){const d=t.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==u||e&&1024&e[2])&&(d[2]|=1024),sg(d),d[3]=d[15]=e,d[8]=n,d[10]=s||e&&e[10],d[11]=a||e&&e[11],d[12]=c||e&&e[12]||null,d[9]=l||e&&e[9]||null,d[6]=o,d[20]=function fM(){return dM++}(),d[21]=u,d[16]=2==t.type?e[16]:d,d}function ro(e,t,n,r,i){let o=e.data[t];if(null===o)o=function fd(e,t,n,r,i){const o=lg(),s=Jl(),c=e.data[t]=function z1(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c)),c}(e,t,n,r,i),function Nw(){return re.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Ho(){const e=re.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return qn(o,!0),o}function io(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function ds(e,t,n){Ca(t);try{const r=e.viewQuery;null!==r&&Dd(1,r,n);const i=e.template;null!==i&&gy(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&py(e,t),e.staticViewQueries&&Dd(2,e.viewQuery,n);const o=e.components;null!==o&&function $1(e,t){for(let n=0;n<t.length;n++)lI(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Da()}}function oo(e,t,n,r){const i=t[2];if(128!=(128&i)){Ca(t);try{sg(t),function ug(e){return re.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&gy(e,t,n,2,r);const s=3==(3&i);if(s){const l=e.preOrderCheckHooks;null!==l&&Ea(t,l,null)}else{const l=e.preOrderHooks;null!==l&&Sa(t,l,0,null),eu(t,0)}if(function aI(e){for(let t=Iu(e);null!==t;t=Ru(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(512&i[2])&&Wl(o,1),i[2]|=512}}}(t),function sI(e){for(let t=Iu(e);null!==t;t=Ru(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];ql(r)&&oo(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&py(e,t),s){const l=e.contentCheckHooks;null!==l&&Ea(t,l)}else{const l=e.contentHooks;null!==l&&Sa(t,l,1),eu(t,1)}!function j1(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Pr(~i);else{const o=i,s=n[++r],a=n[++r];Fw(s,o),a(2,t[o])}}}finally{Pr(-1)}}(e,t);const a=e.components;null!==a&&function U1(e,t){for(let n=0;n<t.length;n++)cI(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&Dd(2,c,r),s){const l=e.viewCheckHooks;null!==l&&Ea(t,l)}else{const l=e.viewHooks;null!==l&&Sa(t,l,2),eu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Wl(t[3],-1))}finally{Da()}}}function H1(e,t,n,r){const i=t[10],s=function og(e){return 4==(4&e[2])}(t);try{!s&&i.begin&&i.begin(),s&&ds(e,t,r),oo(e,t,n,r)}finally{!s&&i.end&&i.end()}}function gy(e,t,n,r,i){const o=$t(),s=2&r;try{Pr(-1),s&&t.length>22&&Nm(e,t,22,!1),n(r,i)}finally{Pr(o)}}function hd(e,t,n){!cg()||(function Z1(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||qo(n,t),xt(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const c=e.data[a],l=An(c);l&&rI(t,n,c);const u=Wo(t,e,a,n);xt(u,t),null!==s&&iI(0,a-i,u,c,0,s),l&&(dn(n.index,t)[8]=u)}}(e,t,n,Cn(n,t)),128==(128&n.flags)&&function X1(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Lw(){return re.lFrame.currentDirectiveIndex}();try{Pr(o);for(let a=r;a<i;a++){const c=e.data[a],l=t[a];Yl(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Ey(c,l)}}finally{Pr(-1),Yl(s)}}(e,t,n))}function pd(e,t,n=Cn){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function yy(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ka(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ka(e,t,n,r,i,o,s,a,c,l){const u=22+r,d=u+i,f=function G1(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:oe);return n}(u,d),h="function"==typeof l?l():l;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:h,incompleteFirstPass:!1}}function Dy(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function pn(e,t,n,r,i,o,s,a){const c=Cn(t,n);let u,l=t.inputs;!a&&null!=l&&(u=l[r])?(ky(e,n,u,r,i),ma(t)&&function J1(e,t){const n=dn(t,e);16&n[2]||(n[2]|=32)}(n,t.index)):3&t.type&&(r=function W1(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,Ye(o)?o.setProperty(c,r,i):nu(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function gd(e,t,n,r){let i=!1;if(cg()){const o=function eI(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];km(n,s.selectors,!1)&&(i||(i=[]),Ra(qo(n,t),e,s.type),An(s)?(Sy(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,wy(n,e.data.length,o.length);for(let u=0;u<o.length;u++){const d=o[u];d.providersResolver&&d.providersResolver(d)}let a=!1,c=!1,l=io(e,t,o.length,null);for(let u=0;u<o.length;u++){const d=o[u];n.mergedAttrs=Ta(n.mergedAttrs,d.hostAttrs),Ty(e,n,t,l,d),nI(l,d,s),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!c&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),c=!0),l++}!function q1(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,s=[];let a=null,c=null;for(let l=t.directiveStart;l<r;l++){const u=i[l],d=u.inputs,f=null===o||Pm(t)?null:oI(d,o);s.push(f),a=Dy(d,l,a),c=Dy(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=c}(e,n)}s&&function tI(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new z(-301,!1);r.push(t[i],o)}}}(n,r,s)}return n.mergedAttrs=Ta(n.mergedAttrs,n.attrs),i}function by(e,t,n,r,i,o){const s=o.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const c=~t.index;(function Q1(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=c&&a.push(c),a.push(r,i,s)}}function Ey(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Sy(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function nI(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;An(t)&&(n[""]=e)}}function wy(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ty(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=ti(i.type)),s=new Go(o,An(i),S);e.blueprint[r]=s,n[r]=s,by(e,t,0,r,io(e,n,i.hostVars,oe),i)}function rI(e,t,n){const r=Cn(t,e),i=yy(n),o=e[10],s=Ya(e,us(e,i,null,n.onPush?32:16,r,t,o,o.createRenderer(r,n),null,null,null));e[t.index]=s}function iI(e,t,n,r,i,o){const s=o[t];if(null!==s){const a=r.setInput;for(let c=0;c<s.length;){const l=s[c++],u=s[c++],d=s[c++];null!==a?r.setInput(n,d,l,u):n[u]=d}}}function oI(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function My(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function cI(e,t){const n=dn(t,e);if(ql(n)){const r=n[1];48&n[2]?oo(r,n,r.template,n[8]):n[5]>0&&yd(n)}}function yd(e){for(let r=Iu(e);null!==r;r=Ru(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const s=o[1];oo(s,o,s.template,o[8])}else o[5]>0&&yd(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=dn(n[r],e);ql(i)&&i[5]>0&&yd(i)}}function lI(e,t){const n=dn(t,e),r=n[1];(function uI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),ds(r,n,n[8])}function Ya(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function vd(e){for(;e;){e[2]|=32;const t=cs(e);if(fw(e)&&!t)return e;e=t}return null}function Iy(e){!function _d(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=wu(n);if(null!==r){const i=r[1];H1(i,r,i.template,n)}}}(e[8])}function Dd(e,t,n){Zl(0),t(e,n)}const fI=(()=>Promise.resolve(null))();function Ry(e){return e[7]||(e[7]=[])}function Ay(e){return e.cleanup||(e.cleanup=[])}function Py(e,t){const n=e[9],r=n?n.get(Zi,null):null;r&&r.handleError(t)}function ky(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=t[s],l=e.data[s];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function yr(e,t,n){const r=va(t,e);!function pm(e,t,n){Ye(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function Qa(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Rl(i,a):2==o&&(r=Rl(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function EI(){const e=gt();ba(I()[1],e)}function Pe(e){let t=function zy(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(An(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new z(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=Ed(e.inputs),s.declaredInputs=Ed(e.declaredInputs),s.outputs=Ed(e.outputs);const a=i.hostBindings;a&&MI(e,a);const c=i.viewQuery,l=i.contentQueries;if(c&&wI(e,c),l&&TI(e,l),Il(e.inputs,i.inputs),Il(e.declaredInputs,i.declaredInputs),Il(e.outputs,i.outputs),An(i)&&i.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===Pe&&(n=!1)}}t=Object.getPrototypeOf(t)}!function SI(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ta(i.hostAttrs,n=Ta(n,i.hostAttrs))}}(r)}function Ed(e){return e===ki?{}:e===Te?[]:e}function wI(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function TI(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function MI(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}let Za=null;function ai(){if(!Za){const e=Oe.Symbol;if(e&&e.iterator)Za=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Za=r)}}}return Za}function fs(e){return!!function Sd(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&ai()in e)}function Yn(e,t,n){return e[t]=n}function kt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ao(e,t,n,r){return kt(e,Ui(),n)?t+ie(n)+r:oe}function rt(e,t,n,r,i,o,s,a){const c=I(),l=Ee(),u=e+22,d=l.firstCreatePass?function OI(e,t,n,r,i,o,s,a,c){const l=t.consts,u=ro(t,e,4,s||null,xr(l,a));gd(t,n,u,xr(l,c)),ba(t,u);const d=u.tViews=Ka(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,l,c,t,n,r,i,o,s):l.data[u];qn(d,!1);const f=c[11].createComment("");$a(l,c,f,d),xt(f,c),Ya(c,c[u]=My(f,c,f,d)),ya(d)&&hd(l,c,d),null!=s&&pd(c,d,a)}function Ie(e,t,n){const r=I();return kt(r,Ui(),t)&&pn(Ee(),Qe(),r,e,t,r[11],n,!1),Ie}function wd(e,t,n,r,i){const s=i?"class":"style";ky(e,n,t.inputs[s],s,r)}function G(e,t,n,r){const i=I(),o=Ee(),s=22+e,a=i[11],c=i[s]=xu(a,t,function Hw(){return re.lFrame.currentNamespace}()),l=o.firstCreatePass?function LI(e,t,n,r,i,o,s){const a=t.consts,l=ro(t,e,2,i,xr(a,o));return gd(t,n,l,xr(a,s)),null!==l.attrs&&Qa(l,l.attrs,!1),null!==l.mergedAttrs&&Qa(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,o,i,0,t,n,r):o.data[s];qn(l,!0);const u=l.mergedAttrs;null!==u&&wa(a,c,u);const d=l.classes;null!==d&&Lu(a,c,d);const f=l.styles;return null!==f&&Rm(a,c,f),64!=(64&l.flags)&&$a(o,i,c,l),0===function Rw(){return re.lFrame.elementDepthCount}()&&xt(c,i),function Aw(){re.lFrame.elementDepthCount++}(),ya(l)&&(hd(o,i,l),function my(e,t,n){if(Vl(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,l,i)),null!==r&&pd(i,l),G}function fe(){let e=gt();Jl()?function Kl(){re.lFrame.isParent=!1}():(e=e.parent,qn(e,!1));const t=e;!function xw(){re.lFrame.elementDepthCount--}();const n=Ee();return n.firstCreatePass&&(ba(n,e),Vl(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Jw(e){return 0!=(16&e.flags)}(t)&&wd(n,t,I(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Kw(e){return 0!=(32&e.flags)}(t)&&wd(n,t,I(),t.stylesWithoutHost,!1),fe}function Ae(e,t,n,r){return G(e,t,n,r),fe(),Ae}function mo(){return I()}function ps(e){return!!e&&"function"==typeof e.then}function nv(e){return!!e&&"function"==typeof e.subscribe}const Id=nv;function Ue(e,t,n,r){const i=I(),o=Ee(),s=gt();return function iv(e,t,n,r,i,o,s,a){const c=ya(r),u=e.firstCreatePass&&Ay(e),d=t[8],f=Ry(t);let h=!0;if(3&r.type||a){const A=Cn(r,t),R=a?a(A):A,L=f.length,M=a?$=>a(at($[r.index])):r.index;if(Ye(n)){let $=null;if(!a&&c&&($=function BI(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[7],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==$)($.__ngLastListenerFn__||$).__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,h=!1;else{o=Rd(r,t,d,o,!1);const ve=n.listen(R,i,o);f.push(o,ve),u&&u.push(i,M,L,L+1)}}else o=Rd(r,t,d,o,!0),R.addEventListener(i,o,s),f.push(o),u&&u.push(i,M,L,s)}else o=Rd(r,t,d,o,!1);const y=r.outputs;let D;if(h&&null!==y&&(D=y[i])){const A=D.length;if(A)for(let R=0;R<A;R+=2){const He=t[D[R]][D[R+1]].subscribe(o),Mi=f.length;f.push(o,He),u&&u.push(i,r.index,Mi,-(Mi+1))}}}(o,i,i[11],s,e,t,!!n,r),Ue}function ov(e,t,n,r){try{return!1!==n(r)}catch(i){return Py(e,i),!1}}function Rd(e,t,n,r,i){return function o(s){if(s===Function)return r;vd(2&e.flags?dn(e.index,t):t);let c=ov(t,0,r,s),l=o.__ngNextListenerFn__;for(;l;)c=ov(t,0,l,s)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&(s.preventDefault(),s.returnValue=!1),c}}function Ot(e=1){return function Bw(e){return(re.lFrame.contextLView=function jw(e,t){for(;e>0;)t=t[15],e--;return t}(e,re.lFrame.contextLView))[8]}(e)}function yo(e,t,n){return Ad(e,"",t,"",n),yo}function Ad(e,t,n,r,i){const o=I(),s=ao(o,t,n,r);return s!==oe&&pn(Ee(),Qe(),o,e,s,o[11],i,!1),Ad}function pv(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?Pn(o):mr(o),c=!1;for(;0!==a&&(!1===c||s);){const u=e[a+1];zI(e[a],t)&&(c=!0,e[a+1]=r?rd(u):td(u)),a=r?Pn(u):mr(u)}c&&(e[n+1]=r?td(o):rd(o))}function zI(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Ki(e,t)>=0}const yt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gv(e){return e.substring(yt.key,yt.keyEnd)}function mv(e,t){const n=yt.textEnd;return n===t?-1:(t=yt.keyEnd=function KI(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,yt.key=t,n),vo(e,t,n))}function vo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function ec(e,t){return function On(e,t,n,r){const i=I(),o=Ee(),s=fr(2);o.firstUpdatePass&&Ev(o,e,s,r),t!==oe&&kt(i,s,t)&&wv(o,o.data[$t()],i,i[11],e,i[s+1]=function sR(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Le(Nr(e)))),e}(t,n),r,s)}(e,t,null,!0),ec}function Xn(e,t){for(let n=function WI(e){return function vv(e){yt.key=0,yt.keyEnd=0,yt.value=0,yt.valueEnd=0,yt.textEnd=e.length}(e),mv(e,vo(e,0,yt.textEnd))}(t);n>=0;n=mv(t,n))hn(e,gv(t),!0)}function bv(e,t){return t>=e.expandoStartIndex}function Ev(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[$t()],s=bv(e,n);Mv(o,r)&&null===t&&!s&&(t=!1),t=function eR(e,t,n,r){const i=function Ql(e){const t=re.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=gs(n=xd(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=xd(i,e,t,n,r),null===o){let c=function tR(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==mr(r))return e[Pn(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=xd(null,e,t,c[1],r),c=gs(c,t.attrs,r),function nR(e,t,n,r){e[Pn(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else o=function rR(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=gs(r,e[o].hostAttrs,n);return gs(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function HI(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Pn(s),c=mr(s);e[r]=n;let u,l=!1;if(Array.isArray(n)){const d=n;u=d[1],(null===u||Ki(d,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const f=Pn(e[a+1]);e[r+1]=qa(f,a),0!==f&&(e[f+1]=nd(e[f+1],r)),e[a+1]=function A1(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=qa(a,0),0!==a&&(e[a+1]=nd(e[a+1],r)),a=r;else e[r+1]=qa(c,0),0===a?a=r:e[c+1]=nd(e[c+1],r),c=r;l&&(e[r+1]=td(e[r+1])),pv(e,u,r,!0),pv(e,u,r,!1),function GI(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Ki(o,t)>=0&&(n[r+1]=rd(n[r+1]))}(t,u,e,r,o),s=qa(a,c),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}function xd(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=gs(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function gs(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),hn(e,s,!!n||t[++o]))}return void 0===e?null:e}function wv(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const c=e.data,l=c[a+1];tc(function sy(e){return 1==(1&e)}(l)?Tv(c,t,n,i,mr(l),s):void 0)||(tc(o)||function oy(e){return 2==(2&e)}(l)&&(o=Tv(c,null,n,i,a,s)),function UM(e,t,n,r,i){const o=Ye(e);if(t)i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:tn.DashCase;if(null==i)o?e.removeStyle(n,r,s):n.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),s|=tn.Important),o?e.setStyle(n,r,i,s):n.style.setProperty(r,i,a?"important":"")}}}(r,s,va($t(),n),i,o))}function Tv(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let f=n[i+1];f===oe&&(f=d?Te:void 0);let h=d?lu(f,r):u===r?f:void 0;if(l&&!tc(h)&&(h=lu(c,r)),tc(h)&&(a=h,s))return a;const y=e[i+1];i=s?Pn(y):mr(y)}if(null!==t){let c=o?t.residualClasses:t.residualStyles;null!=c&&(a=lu(c,r))}return a}function tc(e){return void 0!==e}function Mv(e,t){return 0!=(e.flags&(t?16:32))}function Gt(e,t=""){const n=I(),r=Ee(),i=e+22,o=r.firstCreatePass?ro(r,i,1,t,null):r.data[i],s=n[i]=function Au(e,t){return Ye(e)?e.createText(t):e.createTextNode(t)}(n[11],t);$a(r,n,s,o),qn(o,!1)}function li(e){return Pd("",e,""),li}function Pd(e,t,n){const r=I(),i=ao(r,e,t,n);return i!==oe&&yr(r,$t(),i),Pd}function kd(e,t,n){!function Nn(e,t,n,r){const i=Ee(),o=fr(2);i.firstUpdatePass&&Ev(i,null,o,r);const s=I();if(n!==oe&&kt(s,o,n)){const a=i.data[$t()];if(Mv(a,r)&&!bv(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Rl(c,n||"")),wd(i,a,s,n,r)}else!function oR(e,t,n,r,i,o,s,a){i===oe&&(i=Te);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;null!==u||null!==d;){const f=c<i.length?i[c+1]:void 0,h=l<o.length?o[l+1]:void 0;let D,y=null;u===d?(c+=2,l+=2,f!==h&&(y=d,D=h)):null===d||null!==u&&u<d?(c+=2,y=u):(l+=2,y=d,D=h),null!==y&&wv(e,t,n,r,y,D,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function iR(e,t,n){if(null==n||""===n)return Te;const r=[],i=Nr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,o)}}(hn,Xn,ao(I(),e,t,n),!0)}const ui=void 0;var wR=["en",[["a","p"],["AM","PM"],ui],[["AM","PM"],ui,ui],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ui,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ui,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ui,"{1} 'at' {0}",ui],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function SR(e){const n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let _o={};function zt(e){const t=function TR(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Jv(t);if(n)return n;const r=t.split("-")[0];if(n=Jv(r),n)return n;if("en"===r)return wR;throw new z(701,!1)}function Jv(e){return e in _o||(_o[e]=Oe.ng&&Oe.ng.common&&Oe.ng.common.locales&&Oe.ng.common.locales[e]),_o[e]}var B=(()=>((B=B||{})[B.LocaleId=0]="LocaleId",B[B.DayPeriodsFormat=1]="DayPeriodsFormat",B[B.DayPeriodsStandalone=2]="DayPeriodsStandalone",B[B.DaysFormat=3]="DaysFormat",B[B.DaysStandalone=4]="DaysStandalone",B[B.MonthsFormat=5]="MonthsFormat",B[B.MonthsStandalone=6]="MonthsStandalone",B[B.Eras=7]="Eras",B[B.FirstDayOfWeek=8]="FirstDayOfWeek",B[B.WeekendRange=9]="WeekendRange",B[B.DateFormat=10]="DateFormat",B[B.TimeFormat=11]="TimeFormat",B[B.DateTimeFormat=12]="DateTimeFormat",B[B.NumberSymbols=13]="NumberSymbols",B[B.NumberFormats=14]="NumberFormats",B[B.CurrencyCode=15]="CurrencyCode",B[B.CurrencySymbol=16]="CurrencySymbol",B[B.CurrencyName=17]="CurrencyName",B[B.Currencies=18]="Currencies",B[B.Directionality=19]="Directionality",B[B.PluralCase=20]="PluralCase",B[B.ExtraData=21]="ExtraData",B))();const Co="en-US";let Kv=Co;function Fd(e,t,n,r,i){if(e=X(e),Array.isArray(e))for(let o=0;o<e.length;o++)Fd(e[o],t,n,r,i);else{const o=Ee(),s=I();let a=oi(e)?e:X(e.provide),c=qm(e);const l=gt(),u=1048575&l.providerIndexes,d=l.directiveStart,f=l.providerIndexes>>20;if(oi(e)||!e.multi){const h=new Go(c,i,S),y=Vd(a,t,i?u:u+f,d);-1===y?(Ra(qo(l,s),o,a),Ld(o,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(h),s.push(h)):(n[y]=h,s[y]=h)}else{const h=Vd(a,t,u+f,d),y=Vd(a,t,u,u+f),D=h>=0&&n[h],A=y>=0&&n[y];if(i&&!A||!i&&!D){Ra(qo(l,s),o,a);const R=function EA(e,t,n,r,i){const o=new Go(e,n,S);return o.multi=[],o.index=t,o.componentProviders=0,C_(o,i,r&&!n),o}(i?bA:DA,n.length,i,r,c);!i&&A&&(n[y].providerFactory=R),Ld(o,e,t.length,0),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(R),s.push(R)}else Ld(o,e,h>-1?h:y,C_(n[i?y:h],c,!i&&r));!i&&r&&A&&n[y].componentProviders++}}}function Ld(e,t,n,r){const i=oi(t),o=function s1(e){return!!e.useClass}(t);if(i||o){const c=(o?X(t.useClass):t).prototype.ngOnDestroy;if(c){const l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const u=l.indexOf(n);-1===u?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function C_(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Vd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function DA(e,t,n,r){return Bd(this.multi,[])}function bA(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Wo(n,n[1],this.providerFactory.index,r);o=a.slice(0,s),Bd(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Bd(i,o);return o}function Bd(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function ze(e,t=[]){return n=>{n.providersResolver=(r,i)=>function CA(e,t,n){const r=Ee();if(r.firstCreatePass){const i=An(e);Fd(n,r.data,r.blueprint,i,!0),Fd(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class wA{resolveComponentFactory(t){throw function SA(e){const t=Error(`No component factory found for ${Le(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Cs=(()=>{class e{}return e.NULL=new wA,e})();class Vr{}class b_{}class E_{}function MA(){return bo(gt(),I())}function bo(e,t){return new gn(Cn(e,t))}let gn=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=MA,e})();class S_{}let vr=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function AA(){const e=I(),n=dn(gt().index,e);return function RA(e){return e[11]}(en(n)?n:e)}(),e})(),xA=(()=>{class e{}return e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>null}),e})();class Ds{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const PA=new Ds("14.0.4"),jd={};function sc(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(at(o)),Rn(o))for(let a=10;a<o.length;a++){const c=o[a],l=c[1].firstChild;null!==l&&sc(c[1],c,l,r)}const s=n.type;if(8&s)sc(e,t,n.child,r);else if(32&s){const a=Mu(n,t);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Tm(t,n);if(Array.isArray(a))r.push(...a);else{const c=cs(t[16]);sc(c[1],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class bs{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return sc(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Rn(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Pu(t,r),xa(n,r))}this._attachedToViewContainer=!1}mm(this._lView[1],this._lView)}onDestroy(t){!function Cy(e,t,n,r){const i=Ry(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Ay(e).push(r,i.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Cd(e,t,n){const r=t[10];r.begin&&r.begin();try{oo(e,t,e.template,n)}catch(i){throw Py(t,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xM(e,t){ls(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=t}}class kA extends bs{constructor(t){super(t),this._view=t}detectChanges(){Iy(this._view)}checkNoChanges(){}get context(){return null}}class Ud extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ve(t);return new $d(n,this.ngModule)}}function w_(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class NA{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,jd,r);return i!==jd||n===jd?i:this.parentInjector.get(t,n,r)}}class $d extends E_{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function QM(e){return e.map(YM).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return w_(this.componentDef.inputs)}get outputs(){return w_(this.componentDef.outputs)}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof si?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new NA(t,o):t,a=s.get(S_,ig),c=s.get(xA,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function _y(e,t,n){if(Ye(e))return e.selectRootElement(t,n===zn.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(l,r,this.componentDef.encapsulation):xu(a.createRenderer(null,this.componentDef),u,function OA(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(u)),f=this.componentDef.onPush?288:272,h=function Gy(e,t){return{components:[],scheduler:e||bM,clean:fI,playerHandler:t||null,flags:0}}(),y=Ka(0,null,null,1,0,null,null,null,null,null),D=us(null,y,h,f,null,null,a,l,c,s,null);let A,R;Ca(D);try{const L=function $y(e,t,n,r,i,o){const s=n[1];n[22]=e;const c=ro(s,22,2,"#host",null),l=c.mergedAttrs=t.hostAttrs;null!==l&&(Qa(c,l,!0),null!==e&&(wa(i,e,l),null!==c.classes&&Lu(i,e,c.classes),null!==c.styles&&Rm(i,e,c.styles)));const u=r.createRenderer(e,t),d=us(n,yy(t),null,t.onPush?32:16,n[22],c,r,u,o||null,null,null);return s.firstCreatePass&&(Ra(qo(c,n),s,t.type),Sy(s,c),wy(c,n.length,1)),Ya(n,d),n[22]=d}(d,this.componentDef,D,a,l);if(d)if(r)wa(l,d,["ng-version",PA.full]);else{const{attrs:M,classes:$}=function ZM(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!xn(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);M&&wa(l,d,M),$&&$.length>0&&Lu(l,d,$.join(" "))}if(R=zl(y,22),void 0!==n){const M=R.projection=[];for(let $=0;$<this.ngContentSelectors.length;$++){const ve=n[$];M.push(null!=ve?Array.from(ve):null)}}A=function Hy(e,t,n,r,i){const o=n[1],s=function Y1(e,t,n){const r=gt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ty(e,r,t,io(e,t,1,null),n));const i=Wo(t,e,r.directiveStart,r);xt(i,t);const o=Cn(r,t);return o&&xt(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,null!==i)for(const c of i)c(s,t);if(t.contentQueries){const c=gt();t.contentQueries(1,s,c.directiveStart)}const a=gt();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Pr(a.index),by(n[1],a,0,a.directiveStart,a.directiveEnd,t),Ey(t,s)),s}(L,this.componentDef,D,h,[EI]),ds(y,D,null)}finally{Da()}return new LA(this.componentType,A,bo(R,D),D,R)}}class LA extends class TA{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new kA(i),this.componentType=t}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class T_ extends Vr{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ud(this);const r=ln(t);this._bootstrapComponents=gr(r.bootstrap),this._r3Injector=Jm(t,n,[{provide:Vr,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],Le(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(t)}get(t,n=Pt.THROW_IF_NOT_FOUND,r=W.Default){return t===Pt||t===Vr||t===Uu?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Hd extends b_{constructor(t){super(),this.moduleType=t}create(t){return new T_(this.moduleType,t)}}class BA extends Vr{constructor(t,n,r){super(),this.componentFactoryResolver=new Ud(this),this.instance=null;const i=new zm([...t,{provide:Vr,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],n||Gu(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function ac(e,t=null,n=null){return new BA(e,t,n).injector}function Es(e,t){const n=e[t];return n===oe?void 0:n}function I_(e,t,n,r,i,o,s){const a=t+n;return function ci(e,t,n,r){const i=kt(e,t,n);return kt(e,t+1,r)||i}(e,a,i,o)?Yn(e,a+2,s?r.call(s,i,o):r(i,o)):Es(e,a+2)}function cc(e,t){const n=Ee();let r;const i=e+22;n.firstCreatePass?(r=function XA(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=ti(r.type)),s=Gn(S);try{const a=Ma(!1),c=o();return Ma(a),function NI(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,I(),i,c),c}finally{Gn(s)}}function P_(e,t,n){const r=e+22,i=I(),o=Vi(i,r);return Ss(i,r)?function M_(e,t,n,r,i,o){const s=t+n;return kt(e,s,i)?Yn(e,s+1,o?r.call(o,i):r(i)):Es(e,s+1)}(i,Ut(),t,o.transform,n,o):o.transform(n)}function Gd(e,t,n,r){const i=e+22,o=I(),s=Vi(o,i);return Ss(o,i)?I_(o,Ut(),t,s.transform,n,r,s):s.transform(n,r)}function Ss(e,t){return e[1].data[t].pure}function zd(e){return t=>{setTimeout(e,void 0,t)}}const Xe=class rx extends on{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=zd(o),i&&(i=zd(i)),s&&(s=zd(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof H&&t.add(a),a}};let _r=(()=>{class e{}return e.__NG_ELEMENT_ID__=ax,e})();const ox=_r,sx=class extends ox{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tViews,i=us(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),ds(r,i,t),new bs(i)}};function ax(){return function lc(e,t){return 4&e.type?new sx(t,e,bo(e,t)):null}(gt(),I())}let Fn=(()=>{class e{}return e.__NG_ELEMENT_ID__=cx,e})();function cx(){return function N_(e,t){let n;const r=t[e.index];if(Rn(r))n=r;else{let i;if(8&e.type)i=at(r);else{const o=t[11];i=o.createComment("");const s=Cn(e,t);ii(o,Ua(o,s),i,function VM(e,t){return Ye(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=My(r,t,i,e),Ya(t,n)}return new k_(n,e,t)}(gt(),I())}const lx=Fn,k_=class extends lx{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return bo(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ia(this._hostTNode,this._hostLView);if(Dg(t)){const n=Hi(t,this._hostLView),r=$i(t);return new Gi(n[1].data[r+8],n)}return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=O_(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,i),s}createComponent(t,n,r,i,o){const s=t&&!function Yo(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const c=s?t:new $d(Ve(t)),l=r||this.parentInjector;if(!o&&null==c.ngModule){const f=(s?l:this.parentInjector).get(si,null);f&&(o=f)}const u=c.create(l,i,void 0,o);return this.insert(u.hostView,a),u}insert(t,n){const r=t._lView,i=r[1];if(function Iw(e){return Rn(e[3])}(r)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const d=r[3],f=new k_(d,d[6],d[3]);f.detach(f.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function kM(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],Pg(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function OM(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=64}(i,r,s,o);const a=Nu(o,s),c=r[11],l=Ua(c,s[7]);return null!==l&&function AM(e,t,n,r,i,o){r[0]=i,r[6]=t,ls(e,r,n,1,i,o)}(i,s[6],c,r,l,a),t.attachToViewContainerRef(),Pg(Wd(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=O_(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Pu(this._lContainer,n);r&&(xa(Wd(this._lContainer),n),mm(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=Pu(this._lContainer,n);return r&&null!=xa(Wd(this._lContainer),n)?new bs(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function O_(e){return e[8]}function Wd(e){return e[8]||(e[8]=[])}function dc(...e){}const fc=new J("Application Initializer");let hc=(()=>{class e{constructor(n){this.appInits=n,this.resolve=dc,this.reject=dc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(ps(o))n.push(o);else if(Id(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(j(fc,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ts=new J("AppId",{providedIn:"root",factory:function oC(){return`${cf()}${cf()}${cf()}`}});function cf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sC=new J("Platform Initializer"),lf=new J("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aC=new J("appBootstrapListener");let Bx=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Cr=new J("LocaleId",{providedIn:"root",factory:()=>ni(Cr,W.Optional|W.SkipSelf)||function jx(){return typeof $localize<"u"&&$localize.locale||Co}()});class $x{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let uf=(()=>{class e{compileModuleSync(n){return new Hd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=gr(ln(n).declarations).reduce((s,a)=>{const c=Ve(a);return c&&s.push(new $d(c)),s},[]);return new $x(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Gx=(()=>Promise.resolve(0))();function df(e){typeof Zone>"u"?Gx.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class lt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function zx(){let e=Oe.requestAnimationFrame,t=Oe.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Jx(e){const t=()=>{!function Wx(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Oe,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,hf(e),e.isCheckStableRunning=!0,ff(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),hf(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return cC(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),lC(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return cC(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),lC(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,hf(e),ff(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lt.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(lt.isInAngularZone())throw new z(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,qx,dc,dc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const qx={};function ff(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function hf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function cC(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function lC(e){e._nesting--,ff(e)}class Kx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const uC=new J(""),pc=new J("");let mf,pf=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mf||(function Yx(e){mf=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lt.assertNotInAngularZone(),df(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())df(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(j(lt),j(gf),j(pc))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),gf=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return mf?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Br=null;const dC=new J("AllowMultipleToken"),yf=new J("PlatformDestroyListeners");class fC{constructor(t,n){this.name=t,this.token=n}}function pC(e,t,n=[]){const r=`Platform: ${t}`,i=new J(r);return(o=[])=>{let s=vf();if(!s||s.injector.get(dC,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function Xx(e){if(Br&&!Br.get(dC,!1))throw new z(400,!1);Br=e;const t=e.get(mC);(function hC(e){const t=e.get(sC,null);t&&t.forEach(n=>n())})(e)}(function gC(e=[],t){return Pt.create({name:t,providers:[{provide:$u,useValue:"platform"},{provide:yf,useValue:new Set([()=>Br=null])},...e]})}(a,r))}return function tP(e){const t=vf();if(!t)throw new z(401,!1);return t}()}}function vf(){return Br?.get(mC)??null}let mC=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function nP(e,t){let n;return n="noop"===e?new Kx:("zone.js"===e?void 0:e)||new lt(t),n}(r?.ngZone,function yC(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:lt,useValue:i}];return i.run(()=>{const s=Pt.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),c=a.injector.get(Zi,null);if(!c)throw new z(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{mc(this._modules,a),l.unsubscribe()})}),function vC(e,t,n){try{const r=n();return ps(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(c,i,()=>{const l=a.injector.get(hc);return l.runInitializers(),l.donePromise.then(()=>(function Yv(e){an(e,"Expected localeId to be defined"),"string"==typeof e&&(Kv=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Cr,Co)||Co),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=_C({},r);return function Qx(e,t,n){const r=new Hd(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(gc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new z(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(yf,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(j(Pt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function _C(e,t){return Array.isArray(t)?t.reduce(_C,e):{...e,...t}}let gc=(()=>{class e{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Se(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Se(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{lt.assertNotInAngularZone(),df(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{lt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=function WS(...e){const t=Lo(e),n=function jS(e,t){return"number"==typeof Tl(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Hn(r[0]):Pi(n)(pt(r,t)):cr}(o,s.pipe(function JS(e={}){const{connector:t=(()=>new on),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s=null,a=null,c=null,l=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=null},h=()=>{f(),s=c=null,u=d=!1},y=()=>{const D=s;h(),D?.unsubscribe()};return st((D,A)=>{l++,!d&&!u&&f();const R=c=c??t();A.add(()=>{l--,0===l&&!d&&!u&&(a=Ml(y,i))}),R.subscribe(A),s||(s=new Ne({next:L=>R.next(L),error:L=>{d=!0,f(),a=Ml(h,n,L),R.error(L)},complete:()=>{u=!0,f(),a=Ml(h,r),R.complete()}}),pt(D).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof E_;if(!this._injector.get(hc).done)throw!i&&function So(e){const t=Ve(e)||Bt(e)||jt(e);return null!==t&&t.standalone}(n),new z(405,false);let s;s=i?n:this._injector.get(Cs).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function Zx(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Vr),l=s.create(Pt.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(uC,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),mc(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new z(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;mc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(aC,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>mc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new z(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(j(lt),j(Pt),j(Zi))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function mc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let DC=!0,yc=(()=>{class e{}return e.__NG_ELEMENT_ID__=oP,e})();function oP(e){return function sP(e,t,n){if(ma(e)&&!n){const r=dn(e.index,t);return new bs(r,r)}return 47&e.type?new bs(t[16],t):null}(gt(),I(),16==(16&e))}class TC{constructor(){}supports(t){return fs(t)}create(t){return new fP(t)}}const dP=(e,t)=>t;class fP{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||dP}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<IC(r,i,o)?n:r,a=IC(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){const h=f<o.length?o[f]:o[f]=0,y=h+f;u<=y&&y<l&&(o[f]=h+1)}o[s.previousIndex]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!fs(t))throw new z(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function PI(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[ai()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new hP(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new MC),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MC),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class hP{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pP{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class MC{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new pP,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IC(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function AC(){return new Cc([new TC])}let Cc=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||AC()),deps:[[e,new ts,new Or]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new z(901,!1)}}return e.\u0275prov=Y({token:e,providedIn:"root",factory:AC}),e})();const _P=pC(null,"core",[]);let CP=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(j(gc))},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({}),e})();let Dc=null;function er(){return Dc}const Wt=new J("DocumentToken");let bc=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:function(){return function SP(){return j(PC)}()},providedIn:"platform"}),e})();const wP=new J("Location Initialized");let PC=(()=>{class e extends bc{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return er().getBaseHref(this._doc)}onPopState(n){const r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){kC()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){kC()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(j(Wt))},e.\u0275prov=Y({token:e,factory:function(){return function TP(){return new PC(j(Wt))}()},providedIn:"platform"}),e})();function kC(){return!!window.history.pushState}function Ef(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function OC(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Er(e){return e&&"?"!==e[0]?"?"+e:e}let fi=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:function(){return function MP(){const e=j(Wt).location;return new FC(j(bc),e&&e.origin||"")}()},providedIn:"root"}),e})();const NC=new J("appBaseHref");let FC=(()=>{class e extends fi{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ef(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Er(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Er(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Er(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(j(bc),j(NC,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),IP=(()=>{class e extends fi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Ef(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Er(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Er(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(j(bc),j(NC,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),Sf=(()=>{class e{constructor(n){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=OC(LC(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Er(r))}normalize(n){return e.stripTrailingSlash(function AP(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,LC(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Er(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=Er,e.joinWithSlash=Ef,e.stripTrailingSlash=OC,e.\u0275fac=function(n){return new(n||e)(j(fi))},e.\u0275prov=Y({token:e,factory:function(){return function RP(){return new Sf(j(fi))}()},providedIn:"root"}),e})();function LC(e){return e.replace(/\/index.html$/,"")}var it=(()=>((it=it||{})[it.Format=0]="Format",it[it.Standalone=1]="Standalone",it))(),ye=(()=>((ye=ye||{})[ye.Narrow=0]="Narrow",ye[ye.Abbreviated=1]="Abbreviated",ye[ye.Wide=2]="Wide",ye[ye.Short=3]="Short",ye))(),We=(()=>((We=We||{})[We.Short=0]="Short",We[We.Medium=1]="Medium",We[We.Long=2]="Long",We[We.Full=3]="Full",We))(),K=(()=>((K=K||{})[K.Decimal=0]="Decimal",K[K.Group=1]="Group",K[K.List=2]="List",K[K.PercentSign=3]="PercentSign",K[K.PlusSign=4]="PlusSign",K[K.MinusSign=5]="MinusSign",K[K.Exponential=6]="Exponential",K[K.SuperscriptingExponent=7]="SuperscriptingExponent",K[K.PerMille=8]="PerMille",K[K.Infinity=9]="Infinity",K[K.NaN=10]="NaN",K[K.TimeSeparator=11]="TimeSeparator",K[K.CurrencyDecimal=12]="CurrencyDecimal",K[K.CurrencyGroup=13]="CurrencyGroup",K))();function Ec(e,t){return En(zt(e)[B.DateFormat],t)}function Sc(e,t){return En(zt(e)[B.TimeFormat],t)}function wc(e,t){return En(zt(e)[B.DateTimeFormat],t)}function bn(e,t){const n=zt(e),r=n[B.NumberSymbols][t];if(typeof r>"u"){if(t===K.CurrencyDecimal)return n[B.NumberSymbols][K.Decimal];if(t===K.CurrencyGroup)return n[B.NumberSymbols][K.Group]}return r}function BC(e){if(!e[B.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[B.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function En(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function Tf(e){const[t,n]=e.split(":");return{hours:+t,minutes:+n}}const HP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Is={},GP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var vt=(()=>((vt=vt||{})[vt.Short=0]="Short",vt[vt.ShortGMT=1]="ShortGMT",vt[vt.Long=2]="Long",vt[vt.Extended=3]="Extended",vt))(),Q=(()=>((Q=Q||{})[Q.FullYear=0]="FullYear",Q[Q.Month=1]="Month",Q[Q.Date=2]="Date",Q[Q.Hours=3]="Hours",Q[Q.Minutes=4]="Minutes",Q[Q.Seconds=5]="Seconds",Q[Q.FractionalSeconds=6]="FractionalSeconds",Q[Q.Day=7]="Day",Q))(),he=(()=>((he=he||{})[he.DayPeriods=0]="DayPeriods",he[he.Days=1]="Days",he[he.Months=2]="Months",he[he.Eras=3]="Eras",he))();function zP(e,t,n,r){let i=function ek(e){if($C(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,o=1,s=1]=e.split("-").map(a=>+a);return Tc(i,o-1,s)}const n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(HP))return function tk(e){const t=new Date(0);let n=0,r=0;const i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,c=Number(e[6]||0),l=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,s,a,c,l),t}(r)}const t=new Date(e);if(!$C(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=Sr(n,t)||t;let a,s=[];for(;t;){if(a=GP.exec(t),!a){s.push(t);break}{s=s.concat(a.slice(1));const u=s.pop();if(!u)break;t=u}}let c=i.getTimezoneOffset();r&&(c=UC(r,c),i=function XP(e,t,n){const r=n?-1:1,i=e.getTimezoneOffset();return function ZP(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,r*(UC(t,i)-i))}(i,r,!0));let l="";return s.forEach(u=>{const d=function QP(e){if(If[e])return If[e];let t;switch(e){case"G":case"GG":case"GGG":t=$e(he.Eras,ye.Abbreviated);break;case"GGGG":t=$e(he.Eras,ye.Wide);break;case"GGGGG":t=$e(he.Eras,ye.Narrow);break;case"y":t=dt(Q.FullYear,1,0,!1,!0);break;case"yy":t=dt(Q.FullYear,2,0,!0,!0);break;case"yyy":t=dt(Q.FullYear,3,0,!1,!0);break;case"yyyy":t=dt(Q.FullYear,4,0,!1,!0);break;case"Y":t=Ac(1);break;case"YY":t=Ac(2,!0);break;case"YYY":t=Ac(3);break;case"YYYY":t=Ac(4);break;case"M":case"L":t=dt(Q.Month,1,1);break;case"MM":case"LL":t=dt(Q.Month,2,1);break;case"MMM":t=$e(he.Months,ye.Abbreviated);break;case"MMMM":t=$e(he.Months,ye.Wide);break;case"MMMMM":t=$e(he.Months,ye.Narrow);break;case"LLL":t=$e(he.Months,ye.Abbreviated,it.Standalone);break;case"LLLL":t=$e(he.Months,ye.Wide,it.Standalone);break;case"LLLLL":t=$e(he.Months,ye.Narrow,it.Standalone);break;case"w":t=Mf(1);break;case"ww":t=Mf(2);break;case"W":t=Mf(1,!0);break;case"d":t=dt(Q.Date,1);break;case"dd":t=dt(Q.Date,2);break;case"c":case"cc":t=dt(Q.Day,1);break;case"ccc":t=$e(he.Days,ye.Abbreviated,it.Standalone);break;case"cccc":t=$e(he.Days,ye.Wide,it.Standalone);break;case"ccccc":t=$e(he.Days,ye.Narrow,it.Standalone);break;case"cccccc":t=$e(he.Days,ye.Short,it.Standalone);break;case"E":case"EE":case"EEE":t=$e(he.Days,ye.Abbreviated);break;case"EEEE":t=$e(he.Days,ye.Wide);break;case"EEEEE":t=$e(he.Days,ye.Narrow);break;case"EEEEEE":t=$e(he.Days,ye.Short);break;case"a":case"aa":case"aaa":t=$e(he.DayPeriods,ye.Abbreviated);break;case"aaaa":t=$e(he.DayPeriods,ye.Wide);break;case"aaaaa":t=$e(he.DayPeriods,ye.Narrow);break;case"b":case"bb":case"bbb":t=$e(he.DayPeriods,ye.Abbreviated,it.Standalone,!0);break;case"bbbb":t=$e(he.DayPeriods,ye.Wide,it.Standalone,!0);break;case"bbbbb":t=$e(he.DayPeriods,ye.Narrow,it.Standalone,!0);break;case"B":case"BB":case"BBB":t=$e(he.DayPeriods,ye.Abbreviated,it.Format,!0);break;case"BBBB":t=$e(he.DayPeriods,ye.Wide,it.Format,!0);break;case"BBBBB":t=$e(he.DayPeriods,ye.Narrow,it.Format,!0);break;case"h":t=dt(Q.Hours,1,-12);break;case"hh":t=dt(Q.Hours,2,-12);break;case"H":t=dt(Q.Hours,1);break;case"HH":t=dt(Q.Hours,2);break;case"m":t=dt(Q.Minutes,1);break;case"mm":t=dt(Q.Minutes,2);break;case"s":t=dt(Q.Seconds,1);break;case"ss":t=dt(Q.Seconds,2);break;case"S":t=dt(Q.FractionalSeconds,1);break;case"SS":t=dt(Q.FractionalSeconds,2);break;case"SSS":t=dt(Q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Ic(vt.Short);break;case"ZZZZZ":t=Ic(vt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ic(vt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ic(vt.Long);break;default:return null}return If[e]=t,t}(u);l+=d?d(i,n,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Tc(e,t,n){const r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Sr(e,t){const n=function xP(e){return zt(e)[B.LocaleId]}(e);if(Is[n]=Is[n]||{},Is[n][t])return Is[n][t];let r="";switch(t){case"shortDate":r=Ec(e,We.Short);break;case"mediumDate":r=Ec(e,We.Medium);break;case"longDate":r=Ec(e,We.Long);break;case"fullDate":r=Ec(e,We.Full);break;case"shortTime":r=Sc(e,We.Short);break;case"mediumTime":r=Sc(e,We.Medium);break;case"longTime":r=Sc(e,We.Long);break;case"fullTime":r=Sc(e,We.Full);break;case"short":const i=Sr(e,"shortTime"),o=Sr(e,"shortDate");r=Mc(wc(e,We.Short),[i,o]);break;case"medium":const s=Sr(e,"mediumTime"),a=Sr(e,"mediumDate");r=Mc(wc(e,We.Medium),[s,a]);break;case"long":const c=Sr(e,"longTime"),l=Sr(e,"longDate");r=Mc(wc(e,We.Long),[c,l]);break;case"full":const u=Sr(e,"fullTime"),d=Sr(e,"fullDate");r=Mc(wc(e,We.Full),[u,d])}return r&&(Is[n][t]=r),r}function Mc(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return null!=t&&r in t?t[r]:n})),e}function Ln(e,t,n="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function dt(e,t,n=0,r=!1,i=!1){return function(o,s){let a=function WP(e,t){switch(e){case Q.FullYear:return t.getFullYear();case Q.Month:return t.getMonth();case Q.Date:return t.getDate();case Q.Hours:return t.getHours();case Q.Minutes:return t.getMinutes();case Q.Seconds:return t.getSeconds();case Q.FractionalSeconds:return t.getMilliseconds();case Q.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((n>0||a>-n)&&(a+=n),e===Q.Hours)0===a&&-12===n&&(a=12);else if(e===Q.FractionalSeconds)return function qP(e,t){return Ln(e,3).substring(0,t)}(a,t);const c=bn(s,K.MinusSign);return Ln(a,t,c,r,i)}}function $e(e,t,n=it.Format,r=!1){return function(i,o){return function JP(e,t,n,r,i,o){switch(n){case he.Months:return function OP(e,t,n){const r=zt(e),o=En([r[B.MonthsFormat],r[B.MonthsStandalone]],t);return En(o,n)}(t,i,r)[e.getMonth()];case he.Days:return function kP(e,t,n){const r=zt(e),o=En([r[B.DaysFormat],r[B.DaysStandalone]],t);return En(o,n)}(t,i,r)[e.getDay()];case he.DayPeriods:const s=e.getHours(),a=e.getMinutes();if(o){const l=function VP(e){const t=zt(e);return BC(t),(t[B.ExtraData][2]||[]).map(r=>"string"==typeof r?Tf(r):[Tf(r[0]),Tf(r[1])])}(t),u=function BP(e,t,n){const r=zt(e);BC(r);const o=En([r[B.ExtraData][0],r[B.ExtraData][1]],t)||[];return En(o,n)||[]}(t,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){const[h,y]=f,D=s>=h.hours&&a>=h.minutes,A=s<y.hours||s===y.hours&&a<y.minutes;if(h.hours<y.hours){if(D&&A)return!0}else if(D||A)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function PP(e,t,n){const r=zt(e),o=En([r[B.DayPeriodsFormat],r[B.DayPeriodsStandalone]],t);return En(o,n)}(t,i,r)[s<12?0:1];case he.Eras:return function NP(e,t){return En(zt(e)[B.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,e,t,n,r)}}function Ic(e){return function(t,n,r){const i=-1*r,o=bn(n,K.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case vt.Short:return(i>=0?"+":"")+Ln(s,2,o)+Ln(Math.abs(i%60),2,o);case vt.ShortGMT:return"GMT"+(i>=0?"+":"")+Ln(s,1,o);case vt.Long:return"GMT"+(i>=0?"+":"")+Ln(s,2,o)+":"+Ln(Math.abs(i%60),2,o);case vt.Extended:return 0===r?"Z":(i>=0?"+":"")+Ln(s,2,o)+":"+Ln(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}function jC(e){return Tc(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Mf(e,t=!1){return function(n,r){let i;if(t){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{const o=jC(n),s=function YP(e){const t=Tc(e,0,1).getDay();return Tc(e,0,1+(t<=4?4:11)-t)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Ln(i,e,bn(r,K.MinusSign))}}function Ac(e,t=!1){return function(n,r){return Ln(jC(n).getFullYear(),e,bn(r,K.MinusSign),t)}}const If={};function UC(e,t){e=e.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function $C(e){return e instanceof Date&&!isNaN(e.valueOf())}function qC(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}class gk{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Of=(()=>{class e{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new gk(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),KC(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{KC(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(S(Fn),S(_r),S(Cc))},e.\u0275dir=ee({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();function KC(e,t){e.context.$implicit=t.item}let hi=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new yk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){YC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){YC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(S(Fn),S(_r))},e.\u0275dir=ee({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class yk{constructor(){this.$implicit=null,this.ngIf=null}}function YC(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Le(t)}'.`)}function Vn(e,t){return new z(2100,!1)}class Ek{createSubscription(t,n){return t.subscribe({next:n,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class Sk{createSubscription(t,n){return t.then(n,r=>{throw r})}dispose(t){}}const wk=new Sk,Tk=new Ek;let ZC=(()=>{class e{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(ps(n))return wk;if(nv(n))return Tk;throw Vn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return e.\u0275fac=function(n){return new(n||e)(S(yc,16))},e.\u0275pipe=Xt({name:"async",type:e,pure:!1}),e})();const xk=new J("DATE_PIPE_DEFAULT_TIMEZONE");let Lf=(()=>{class e{constructor(n,r){this.locale=n,this.defaultTimezone=r}transform(n,r="mediumDate",i,o){if(null==n||""===n||n!=n)return null;try{return zP(n,r,o||this.locale,i??this.defaultTimezone??void 0)}catch(s){throw Vn()}}}return e.\u0275fac=function(n){return new(n||e)(S(Cr,16),S(xk,24))},e.\u0275pipe=Xt({name:"date",type:e,pure:!0}),e})(),$k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({}),e})();let qk=(()=>{class e{}return e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new Wk(j(Wt),window)}),e})();class Wk{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function Jk(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=t0(this.window.history)||t0(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function t0(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class n0{}class jf extends class Kk extends class EP{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function bP(e){Dc||(Dc=e)}(new jf)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function Yk(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}();return null==n?null:function Qk(e){Pc=Pc||document.createElement("a"),Pc.setAttribute("href",e);const t=Pc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return qC(document.cookie,t)}}let Pc,As=null;const r0=new J("TRANSITION_ID"),Xk=[{provide:fc,useFactory:function Zk(e,t,n){return()=>{n.get(hc).donePromise.then(()=>{const r=er(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[r0,Wt,Pt],multi:!0}];let tO=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const kc=new J("EventManagerPlugins");let Oc=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(j(kc),j(lt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();class o0{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=er().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let s0=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),xs=(()=>{class e extends s0{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(a0),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(a0))}}return e.\u0275fac=function(n){return new(n||e)(j(Wt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();function a0(e){er().remove(e)}const Uf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$f=/%COMP%/g;function Nc(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Nc(e,i,n):(i=i.replace($f,e),n.push(i))}return n}function u0(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Hf=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Gf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case zn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new aO(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case zn.ShadowDom:return new cO(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Nc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(j(Oc),j(xs),j(Ts))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();class Gf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Uf[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(f0(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(f0(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=Uf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Uf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(tn.DashCase|tn.Important)?t.style.setProperty(n,r,i&tn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&tn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,u0(r)):this.eventManager.addEventListener(t,n,u0(r))}}function f0(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class aO extends Gf{constructor(t,n,r,i){super(t),this.component=r;const o=Nc(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function iO(e){return"_ngcontent-%COMP%".replace($f,e)}(i+"-"+r.id),this.hostAttr=function oO(e){return"_nghost-%COMP%".replace($f,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class cO extends Gf{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Nc(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let lO=(()=>{class e extends o0{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(j(Wt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const h0=["alt","control","meta","shift"],dO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p0={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fO={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let hO=(()=>{class e extends o0{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>er().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="";if(h0.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(n){let r="",i=function pO(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&p0.hasOwnProperty(t)&&(t=p0[t]))}return dO[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),h0.forEach(o=>{o!=i&&fO[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{e.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(j(Wt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const g0=[{provide:lf,useValue:"browser"},{provide:sC,useValue:function gO(){jf.makeCurrent()},multi:!0},{provide:Wt,useFactory:function yO(){return function Ew(e){Hl=e}(document),document},deps:[]}],vO=pC(_P,"browser",g0),m0=new J(""),y0=[{provide:pc,useClass:class eO{addToWindow(t){Oe.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Oe.getAllAngularTestabilities=()=>t.getAllTestabilities(),Oe.getAllAngularRootElements=()=>t.getAllRootElements(),Oe.frameworkStabilizers||(Oe.frameworkStabilizers=[]),Oe.frameworkStabilizers.push(r=>{const i=Oe.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?er().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:uC,useClass:pf,deps:[lt,gf,pc]},{provide:pf,useClass:pf,deps:[lt,gf,pc]}],v0=[{provide:$u,useValue:"root"},{provide:Zi,useFactory:function mO(){return new Zi},deps:[]},{provide:kc,useClass:lO,multi:!0,deps:[Wt,lt,lf]},{provide:kc,useClass:hO,multi:!0,deps:[Wt]},{provide:Hf,useClass:Hf,deps:[Oc,xs,Ts]},{provide:S_,useExisting:Hf},{provide:s0,useExisting:xs},{provide:xs,useClass:xs,deps:[Wt]},{provide:Oc,useClass:Oc,deps:[kc,lt]},{provide:n0,useClass:tO,deps:[]},[]];let _O=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ts,useValue:n.appId},{provide:r0,useExisting:Ts},Xk]}}}return e.\u0275fac=function(n){return new(n||e)(j(m0,12))},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({providers:[...v0,...y0],imports:[$k,CP]}),e})(),_0=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(j(Wt))},e.\u0275prov=Y({token:e,factory:function(n){let r=null;return r=n?new n:function DO(){return new _0(j(Wt))}(),r},providedIn:"root"}),e})();function ce(...e){return pt(e,Lo(e))}typeof window<"u"&&window;class Jt extends on{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:AO}=Array,{getPrototypeOf:xO,prototype:PO,keys:kO}=Object;function b0(e){if(1===e.length){const t=e[0];if(AO(t))return{args:t,keys:null};if(function OO(e){return e&&"object"==typeof e&&xO(e)===PO}(t)){const n=kO(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}const{isArray:NO}=Array;function E0(e){return be(t=>function FO(e,t){return NO(t)?e(...t):e(t)}(e,t))}function S0(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function w0(...e){const t=Lo(e),n=jp(e),{args:r,keys:i}=b0(e);if(0===r.length)return pt([],t);const o=new Se(function LO(e,t,n=Un){return r=>{T0(t,()=>{const{length:i}=e,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)T0(t,()=>{const l=pt(e[c],t);let u=!1;l.subscribe(nt(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>S0(i,s):Un));return n?o.pipe(E0(n)):o}function T0(e,t,n){e?ar(n,e,t):t()}function Ps(e,t){const n=pe(e)?e:()=>e,r=i=>i.error(n());return new Se(t?i=>t.schedule(r,0,i):r)}const To=v(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Wf(...e){return function VO(){return Pi(1)}()(pt(e,Lo(e)))}function M0(e){return new Se(t=>{Hn(e()).subscribe(t)})}function Jf(){return st((e,t)=>{let n=null;e._refCount++;const r=nt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class I0 extends Se{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,xi(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new H;const n=this.getSubject();t.add(this.source.subscribe(nt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=H.EMPTY)}return t}refCount(){return Jf()(this)}}function pi(e,t){return st((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(nt(r,c=>{i?.unsubscribe();let l=0;const u=o++;Hn(e(c,u)).subscribe(i=nt(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jO(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(nt(s,u=>{const d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function R0(e,t){return st(jO(e,t,arguments.length>=2,!0))}function gi(e,t){return st((n,r)=>{let i=0;n.subscribe(nt(r,o=>e.call(t,o,i++)&&r.next(o)))})}function mi(e){return st((t,n)=>{let o,r=null,i=!1;r=t.subscribe(nt(n,void 0,void 0,s=>{o=Hn(e(s,mi(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Mo(e,t){return pe(t)?St(e,t,1):St(e,1)}function Kf(e){return e<=0?()=>cr:st((t,n)=>{let r=[];t.subscribe(nt(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function A0(e=UO){return st((t,n)=>{let r=!1;t.subscribe(nt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function UO(){return new To}function Yf(e){return st((t,n)=>{let r=!1;t.subscribe(nt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function yi(e,t){const n=arguments.length>=2;return r=>r.pipe(e?gi((i,o)=>e(i,o,r)):Un,Vo(1),n?Yf(t):A0(()=>new To))}function Nt(e,t,n){const r=pe(e)||t||n?{next:e,error:t,complete:n}:e;return r?st((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(nt(o,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),o.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Un}function Qf(e){return st((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class wr{constructor(t,n){this.id=t,this.url=n}}class Zf extends wr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ks extends wr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class x0 extends wr{constructor(t,n,r){super(t,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class GO extends wr{constructor(t,n,r){super(t,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zO extends wr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qO extends wr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WO extends wr{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class JO extends wr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KO extends wr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YO{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QO{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ZO{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XO{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eN{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tN{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P0{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ge="primary";class rN{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Io(e){return new rN(e)}const k0="ngNavigationCancelingError";function Xf(e){const t=Error("NavigationCancelingError: "+e);return t[k0]=!0,t}function oN(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function tr(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!O0(e[i],t[i]))return!1;return!0}function O0(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function N0(e){return Array.prototype.concat.apply([],e)}function F0(e){return e.length>0?e[e.length-1]:null}function wt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Bn(e){return Id(e)?e:ps(e)?pt(Promise.resolve(e)):ce(e)}const cN={exact:function B0(e,t,n){if(!_i(e.segments,t.segments)||!Fc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!B0(e.children[r],t.children[r],n))return!1;return!0},subset:j0},L0={exact:function lN(e,t){return tr(e,t)},subset:function uN(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>O0(e[n],t[n]))},ignored:()=>!0};function V0(e,t,n){return cN[n.paths](e.root,t.root,n.matrixParams)&&L0[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function j0(e,t,n){return U0(e,t,t.segments,n)}function U0(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!_i(i,n)||t.hasChildren()||!Fc(i,n,r))}if(e.segments.length===n.length){if(!_i(e.segments,n)||!Fc(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!j0(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(_i(e.segments,i)&&Fc(e.segments,i,r)&&e.children[ge])&&U0(e.children[ge],t,o,r)}}function Fc(e,t,n){return t.every((r,i)=>L0[n](e[i].parameters,r.parameters))}class vi{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Io(this.queryParams)),this._queryParamMap}toString(){return hN.serialize(this)}}class _e{constructor(t,n){this.segments=t,this.children=n,this.parent=null,wt(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lc(this)}}class Os{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Io(this.parameters)),this._parameterMap}toString(){return q0(this)}}function _i(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class $0{}class H0{parse(t){const n=new bN(t);return new vi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ns(t.root,!0)}`,r=function mN(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Vc(n)}=${Vc(i)}`).join("&"):`${Vc(n)}=${Vc(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function pN(e){return encodeURI(e)}(t.fragment)}`:""}`}}const hN=new H0;function Lc(e){return e.segments.map(t=>q0(t)).join("/")}function Ns(e,t){if(!e.hasChildren())return Lc(e);if(t){const n=e.children[ge]?Ns(e.children[ge],!1):"",r=[];return wt(e.children,(i,o)=>{o!==ge&&r.push(`${o}:${Ns(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function fN(e,t){let n=[];return wt(e.children,(r,i)=>{i===ge&&(n=n.concat(t(r,i)))}),wt(e.children,(r,i)=>{i!==ge&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===ge?[Ns(e.children[ge],!1)]:[`${i}:${Ns(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ge]?`${Lc(e)}/${n[0]}`:`${Lc(e)}/(${n.join("//")})`}}function G0(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vc(e){return G0(e).replace(/%3B/gi,";")}function eh(e){return G0(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bc(e){return decodeURIComponent(e)}function z0(e){return Bc(e.replace(/\+/g,"%20"))}function q0(e){return`${eh(e.path)}${function gN(e){return Object.keys(e).map(t=>`;${eh(t)}=${eh(e[t])}`).join("")}(e.parameters)}`}const yN=/^[^\/()?;=#]+/;function jc(e){const t=e.match(yN);return t?t[0]:""}const vN=/^[^=?&#]+/,CN=/^[^&#]+/;class bN{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ge]=new _e(t,n)),r}parseSegment(){const t=jc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Os(Bc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=jc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=jc(this.remaining);i&&(r=i,this.capture(r))}t[Bc(n)]=Bc(r)}parseQueryParam(t){const n=function _N(e){const t=e.match(vN);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function DN(e){const t=e.match(CN);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=z0(n),o=z0(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ge);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[ge]:new _e([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class W0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=th(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=th(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=nh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return nh(t,this._root).map(n=>n.value)}}function th(e,t){if(e===t.value)return t;for(const n of t.children){const r=th(e,n);if(r)return r}return null}function nh(e,t){if(e===t.value)return[t];for(const n of t.children){const r=nh(e,n);if(r.length)return r.unshift(t),r}return[]}class Tr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ro(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class J0 extends W0{constructor(t,n){super(t),this.snapshot=n,rh(this,t)}toString(){return this.snapshot.toString()}}function K0(e,t){const n=function EN(e,t){const s=new Uc([],{},{},"",{},ge,t,null,e.root,-1,{});return new Q0("",new Tr(s,[]))}(e,t),r=new Jt([new Os("",{})]),i=new Jt({}),o=new Jt({}),s=new Jt({}),a=new Jt(""),c=new Ci(r,i,s,a,o,ge,t,n.root);return c.snapshot=n.root,new J0(new Tr(c,[]),n)}class Ci{constructor(t,n,r,i,o,s,a,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(t=>Io(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(t=>Io(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Y0(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function SN(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Uc{constructor(t,n,r,i,o,s,a,c,l,u,d,f){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._correctedLastPathIndex=f??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Io(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Io(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q0 extends W0{constructor(t,n){super(n),this.url=t,rh(this,n)}toString(){return Z0(this._root)}}function rh(e,t){t.value._routerState=e,t.children.forEach(n=>rh(e,n))}function Z0(e){const t=e.children.length>0?` { ${e.children.map(Z0).join(", ")} } `:"";return`${e.value}${t}`}function ih(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,tr(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),tr(t.params,n.params)||e.params.next(n.params),function sN(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!tr(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),tr(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function oh(e,t){const n=tr(e.params,t.params)&&function dN(e,t){return _i(e,t)&&e.every((n,r)=>tr(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||oh(e.parent,t.parent))}function Fs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function TN(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Fs(e,r,i);return Fs(e,r)})}(e,t,n);return new Tr(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Fs(e,a)),s}}const r=function MN(e){return new Ci(new Jt(e.url),new Jt(e.params),new Jt(e.queryParams),new Jt(e.fragment),new Jt(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Fs(e,o));return new Tr(r,i)}}function $c(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ls(e){return"object"==typeof e&&null!=e&&e.outlets}function sh(e,t,n,r,i){let o={};if(r&&wt(r,(a,c)=>{o[c]=Array.isArray(a)?a.map(l=>`${l}`):`${a}`}),e===t)return new vi(n,o,i);const s=X0(e,t,n);return new vi(s,o,i)}function X0(e,t,n){const r={};return wt(e.children,(i,o)=>{r[o]=i===t?n:X0(i,t,n)}),new _e(e.segments,r)}class eD{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&$c(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ls);if(i&&i!==F0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ah{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function tD(e,t,n){if(e||(e=new _e([],{})),0===e.segments.length&&e.hasChildren())return Hc(e,t,n);const r=function kN(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],a=n[r];if(Ls(a))break;const c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!rD(c,l,s))return o;r+=2}else{if(!rD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new _e(e.segments.slice(0,r.pathIndex),{});return o.children[ge]=new _e(e.segments.slice(r.pathIndex),e.children),Hc(o,0,i)}return r.match&&0===i.length?new _e(e.segments,{}):r.match&&!e.hasChildren()?ch(e,t,n):r.match?Hc(e,0,i):ch(e,t,n)}function Hc(e,t,n){if(0===n.length)return new _e(e.segments,{});{const r=function PN(e){return Ls(e[0])?e[0].outlets:{[ge]:e}}(n),i={};return wt(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=tD(e.children[s],t,o))}),wt(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new _e(e.segments,i)}}function ch(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Ls(o)){const c=ON(o.outlets);return new _e(r,c)}if(0===i&&$c(n[0])){r.push(new Os(e.segments[t].path,nD(n[0]))),i++;continue}const s=Ls(o)?o.outlets[ge]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&$c(a)?(r.push(new Os(s,nD(a))),i+=2):(r.push(new Os(s,{})),i++)}return new _e(r,{})}function ON(e){const t={};return wt(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=ch(new _e([],{}),0,n))}),t}function nD(e){const t={};return wt(e,(n,r)=>t[r]=`${n}`),t}function rD(e,t,n){return e==n.path&&tr(t,n.parameters)}class NN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vs,this.attachRef=null}}class Vs{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new NN,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let lh=(()=>{class e{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.name=i||ge,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const i=this.location,s=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new FN(n,a,i.injector);if(r&&function LN(e){return!!e.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(s);this.activated=i.createComponent(l,i.length,c)}else this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(S(Vs),S(Fn),function Jo(e){return function Xw(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(_g(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(gt(),e)}("name"),S(yc),S(si))},e.\u0275dir=ee({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class FN{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ci?this.route:t===Vs?this.childContexts:this.parent.get(t,n)}}let iD=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Mt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Ae(0,"router-outlet")},dependencies:[lh],encapsulation:2}),e})();function oD(e,t){return e.providers&&!e._injector&&(e._injector=ac(e.providers,t,`Route: ${e.path}`)),e._injector??t}function dh(e){const t=e.children&&e.children.map(dh),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=iD),n}function Sn(e){return e.outlet||ge}function sD(e,t){const n=e.filter(r=>Sn(r)===t);return n.push(...e.filter(r=>Sn(r)!==t)),n}function aD(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class $N{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),ih(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Ro(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),wt(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ro(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ro(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=Ro(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new tN(o.value.snapshot))}),t.children.length&&this.forwardEvent(new XO(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(ih(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ih(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=aD(i.snapshot),c=a?.get(Cs)??null;s.attachRef=null,s.route=i,s.resolver=c,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}function Ur(e){return"function"==typeof e}function Di(e){return e instanceof vi}const Bs=Symbol("INITIAL_VALUE");function js(){return pi(e=>w0(e.map(t=>t.pipe(Vo(1),function BO(...e){const t=Lo(e);return st((n,r)=>{(t?Wf(e,n,t):Wf(e,n)).subscribe(r)})}(Bs)))).pipe(R0((t,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==Bs?i:(o===Bs&&(r=!0),r||!1!==o&&s!==n.length-1&&!Di(o)?i:o),t)},Bs),gi(t=>t!==Bs),be(t=>Di(t)?t:!0===t),Vo(1)))}const cD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gc(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...cD}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||oN)(n,e,t);if(!i)return{...cD};const o={};wt(i.posParams,(a,c)=>{o[c]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function zc(e,t,n,r,i="corrected"){if(n.length>0&&function YN(e,t,n){return n.some(r=>qc(e,t,r)&&Sn(r)!==ge)}(e,n,r)){const s=new _e(t,function KN(e,t,n,r){const i={};i[ge]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Sn(o)!==ge){const s=new _e([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[Sn(o)]=s}return i}(e,t,r,new _e(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function QN(e,t,n){return n.some(r=>qc(e,t,r))}(e,n,r)){const s=new _e(e.segments,function JN(e,t,n,r,i,o){const s={};for(const a of r)if(qc(e,n,a)&&!i[Sn(a)]){const c=new _e([],{});c._sourceSegment=e,c._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Sn(a)]=c}return{...i,...s}}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new _e(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function qc(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function lD(e,t,n,r){return!!(Sn(e)===r||r!==ge&&qc(t,n,e))&&("**"===e.path||Gc(t,e,n).matched)}function uD(e,t,n){return 0===t.length&&!e.children[n]}class Wc{constructor(t){this.segmentGroup=t||null}}class dD{constructor(t){this.urlTree=t}}function Us(e){return Ps(new Wc(e))}function fD(e){return Ps(new dD(e))}class tF{constructor(t,n,r,i,o){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=zc(this.urlTree.root,[],[],this.config).segmentGroup,n=new _e(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,ge).pipe(be(o=>this.createUrlTree(fh(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mi(o=>{if(o instanceof dD)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Wc?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ge).pipe(be(i=>this.createUrlTree(fh(i),t.queryParams,t.fragment))).pipe(mi(i=>{throw i instanceof Wc?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const i=t.segments.length>0?new _e([],{[ge]:t}):t;return new vi(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(be(o=>new _e([],o))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return pt(i).pipe(Mo(o=>{const s=r.children[o],a=sD(n,o);return this.expandSegmentGroup(t,a,s,o).pipe(be(c=>({segment:c,outlet:o})))}),R0((o,s)=>(o[s.outlet]=s.segment,o),{}),function $O(e,t){const n=arguments.length>=2;return r=>r.pipe(e?gi((i,o)=>e(i,o,r)):Un,Kf(1),n?Yf(t):A0(()=>new To))}())}expandSegment(t,n,r,i,o,s){return pt(r).pipe(Mo(a=>this.expandSegmentAgainstRoute(t,n,r,a,i,o,s).pipe(mi(l=>{if(l instanceof Wc)return ce(null);throw l}))),yi(a=>!!a),mi((a,c)=>{if(a instanceof To||"EmptyError"===a.name)return uD(n,i,o)?ce(new _e([],{})):Us(n);throw a}))}expandSegmentAgainstRoute(t,n,r,i,o,s,a){return lD(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s):Us(n):Us(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?fD(o):this.lineralizeSegments(r,o).pipe(St(s=>{const a=new _e(s,{});return this.expandSegment(t,a,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=Gc(n,i,o);if(!a)return Us(n);const d=this.applyRedirectCommands(c,i.redirectTo,u);return i.redirectTo.startsWith("/")?fD(d):this.lineralizeSegments(i,d).pipe(St(f=>this.expandSegment(t,n,r,f.concat(l),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){if("**"===r.path)return t=oD(r,t),r.loadChildren?(r._loadedRoutes?ce({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(be(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new _e(i,{})))):ce(new _e(i,{}));const{matched:s,consumedSegments:a,remainingSegments:c}=Gc(n,r,i);return s?(t=oD(r,t),this.getChildConfig(t,r,i).pipe(St(u=>{const d=u.injector??t,f=u.routes,{segmentGroup:h,slicedSegments:y}=zc(n,a,c,f),D=new _e(h.segments,h.children);if(0===y.length&&D.hasChildren())return this.expandChildren(d,f,D).pipe(be(M=>new _e(a,M)));if(0===f.length&&0===y.length)return ce(new _e(a,{}));const A=Sn(r)===o;return this.expandSegment(d,D,f,y,A?ge:o,!0).pipe(be(L=>new _e(a.concat(L.segments),L.children)))}))):Us(n)}getChildConfig(t,n,r){return n.children?ce({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ce({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(t,n,r).pipe(St(i=>i?this.configLoader.loadChildren(t,n).pipe(Nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function XN(e){return Ps(Xf(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(n))):ce({routes:[],injector:t})}runCanLoadGuards(t,n,r){const i=n.canLoad;return i&&0!==i.length?ce(i.map(s=>{const a=t.get(s);let c;if(function GN(e){return e&&Ur(e.canLoad)}(a))c=a.canLoad(n,r);else{if(!Ur(a))throw new Error("Invalid CanLoad guard");c=a(n,r)}return Bn(c)})).pipe(js(),Nt(s=>{if(!Di(s))return;const a=Xf(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),be(s=>!0===s)):ce(!0)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ce(r);if(i.numberOfChildren>1||!i.children[ge])return Ps(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[ge]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new vi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return wt(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return wt(n.children,(a,c)=>{s[c]=this.createSegmentGroup(t,a,r,i)}),new _e(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}function fh(e){const t={};for(const r of Object.keys(e.children)){const o=fh(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function nF(e){if(1===e.numberOfChildren&&e.children[ge]){const t=e.children[ge];return new _e(e.segments.concat(t.segments),t.children)}return e}(new _e(e.segments,t))}class hD{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Jc{constructor(t,n){this.component=t,this.route=n}}function iF(e,t,n){const r=e._root;return $s(r,t?t._root:null,n,[r.value])}function Kc(e,t,n){return(aD(t)??n).get(e)}function $s(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ro(t);return e.children.forEach(s=>{(function sF(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function aF(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!_i(e.url,t.url);case"pathParamsOrQueryParamsChange":return!_i(e.url,t.url)||!tr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oh(e,t)||!tr(e.queryParams,t.queryParams);default:return!oh(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new hD(r)):(o.data=s.data,o._resolvedData=s._resolvedData),$s(e,t,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jc(a.outlet.component,s))}else s&&Hs(t,a,i),i.canActivateChecks.push(new hD(r)),$s(e,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),wt(o,(s,a)=>Hs(s,n.getContext(a),i)),i}function Hs(e,t,n){const r=Ro(e),i=e.value;wt(r,(o,s)=>{Hs(o,i.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new Jc(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class mF{}function gD(e){return new Se(t=>t.error(e))}class vF{constructor(t,n,r,i,o,s){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const t=zc(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,ge);if(null===n)return null;const r=new Uc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ge,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Tr(r,n),o=new Q0(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const n=t.value,r=Y0(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],a=sD(t,o),c=this.processSegmentGroup(a,s,o);if(null===c)return null;r.push(...c)}const i=mD(r);return function _F(e){e.sort((t,n)=>t.value.outlet===ge?-1:n.value.outlet===ge?1:t.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(t,n,r,i){for(const o of t){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return uD(n,r,i)?[]:null}processSegmentAgainstRoute(t,n,r,i){if(t.redirectTo||!lD(t,n,r,i))return null;let o,s=[],a=[];if("**"===t.path){const h=r.length>0?F0(r).parameters:{},y=vD(n)+r.length;o=new Uc(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,CD(t),Sn(t),t.component??t._loadedComponent??null,t,yD(n),y,DD(t),y)}else{const h=Gc(n,t,r);if(!h.matched)return null;s=h.consumedSegments,a=h.remainingSegments;const y=vD(n)+s.length;o=new Uc(s,h.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,CD(t),Sn(t),t.component??t._loadedComponent??null,t,yD(n),y,DD(t),y)}const c=function CF(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:l,slicedSegments:u}=zc(n,s,a,c.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const h=this.processChildren(c,l);return null===h?null:[new Tr(o,h)]}if(0===c.length&&0===u.length)return[new Tr(o,[])];const d=Sn(t)===i,f=this.processSegment(c,l,u,d?ge:i);return null===f?null:[new Tr(o,f)]}}function DF(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function mD(e){const t=[],n=new Set;for(const r of e){if(!DF(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=mD(r.children);t.push(new Tr(r.value,i))}return t.filter(r=>!n.has(r))}function yD(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function vD(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function CD(e){return e.data||{}}function DD(e){return e.resolve||{}}const hh=Symbol("RouteTitle");function bD(e){return"string"==typeof e.title||null===e.title}function ph(e){return pi(t=>{const n=e(t);return n?pt(n).pipe(be(()=>t)):ce(t)})}class AF extends class RF{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const gh=new J("ROUTES");let mh=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ce(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Bn(n.loadComponent()).pipe(Nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Qf(()=>{this.componentLoaders.delete(n)})),i=new I0(r,()=>new on).pipe(Jf());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(be(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(n).injector,l=N0(c.get(gh,[],W.Self|W.Optional)));return{routes:l.map(dh),injector:c}}),Qf(()=>{this.childrenLoaders.delete(r)})),s=new I0(o,()=>new on).pipe(Jf());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return Bn(n()).pipe(St(r=>r instanceof b_||Array.isArray(r)?ce(r):pt(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(j(Pt),j(uf))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();class PF{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function OF(e){throw e}function NF(e,t,n){return t.parse("/")}const FF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _t=(()=>{class e{constructor(n,r,i,o,s,a,c){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new on,this.errorHandler=OF,this.malformedUriErrorHandler=NF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ce(void 0),this.urlHandlingStrategy=new PF,this.routeReuseStrategy=new AF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(mh),this.configLoader.onLoadEndListener=f=>this.triggerEvent(new QO(f)),this.configLoader.onLoadStartListener=f=>this.triggerEvent(new YO(f)),this.ngModule=s.get(Vr),this.console=s.get(Bx);const d=s.get(lt);this.isNgZoneEnabled=d instanceof lt&&lt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function aN(){return new vi(new _e([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=K0(this.currentUrlTree,this.rootComponentType),this.transitions=new Jt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(gi(i=>0!==i.id),be(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),pi(i=>{let o=!1,s=!1;return ce(i).pipe(Nt(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pi(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return SD(a.source)&&(this.browserUrlTree=a.extractedUrl),ce(a).pipe(pi(d=>{const f=this.transitions.getValue();return r.next(new Zf(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions.getValue()?cr:Promise.resolve(d)}),function rF(e,t,n,r){return pi(i=>function eF(e,t,n,r,i){return new tF(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(be(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Nt(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects}}),function bF(e,t,n,r,i){return St(o=>function yF(e,t,n,r,i="emptyOnly",o="legacy"){try{const s=new vF(e,t,n,r,i,o).recognize();return null===s?gD(new mF):ce(s)}catch(s){return gD(s)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(be(s=>({...o,targetSnapshot:s}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Nt(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(h,d)}this.browserUrlTree=d.urlAfterRedirects}const f=new zO(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(f)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:f,extractedUrl:h,source:y,restoredState:D,extras:A}=a,R=new Zf(f,this.serializeUrl(h),y,D);r.next(R);const L=K0(h,this.rootComponentType).snapshot;return ce({...a,targetSnapshot:L,urlAfterRedirects:h,extras:{...A,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),cr}),Nt(a=>{const c=new qO(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),be(a=>({...a,guards:iF(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function cF(e,t){return St(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?ce({...n,guardsResult:!0}):function lF(e,t,n,r){return pt(e).pipe(St(i=>function gF(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?ce(o.map(a=>{const c=Kc(a,t,i);let l;if(function WN(e){return e&&Ur(e.canDeactivate)}(c))l=Bn(c.canDeactivate(e,t,n,r));else{if(!Ur(c))throw new Error("Invalid CanDeactivate guard");l=Bn(c(e,t,n,r))}return l.pipe(yi())})).pipe(js()):ce(!0)}(i.component,i.route,n,t,r)),yi(i=>!0!==i,!0))}(s,r,i,e).pipe(St(a=>a&&function HN(e){return"boolean"==typeof e}(a)?function uF(e,t,n,r){return pt(t).pipe(Mo(i=>Wf(function fF(e,t){return null!==e&&t&&t(new ZO(e)),ce(!0)}(i.route.parent,r),function dF(e,t){return null!==e&&t&&t(new eN(e)),ce(!0)}(i.route,r),function pF(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function oF(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>M0(()=>ce(s.guards.map(c=>{const l=Kc(c,s.node,n);let u;if(function qN(e){return e&&Ur(e.canActivateChild)}(l))u=Bn(l.canActivateChild(r,e));else{if(!Ur(l))throw new Error("Invalid CanActivateChild guard");u=Bn(l(r,e))}return u.pipe(yi())})).pipe(js())));return ce(o).pipe(js())}(e,i.path,n),function hF(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ce(!0);const i=r.map(o=>M0(()=>{const s=Kc(o,t,n);let a;if(function zN(e){return e&&Ur(e.canActivate)}(s))a=Bn(s.canActivate(t,e));else{if(!Ur(s))throw new Error("Invalid CanActivate guard");a=Bn(s(t,e))}return a.pipe(yi())}));return ce(i).pipe(js())}(e,i.route,n))),yi(i=>!0!==i,!0))}(r,o,e,t):ce(a)),be(a=>({...n,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Nt(a=>{if(Di(a.guardsResult)){const l=Xf(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw l.url=a.guardsResult,l}const c=new WO(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),gi(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),ph(a=>{if(a.guards.canActivateChecks.length)return ce(a).pipe(Nt(c=>{const l=new JO(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),pi(c=>{let l=!1;return ce(c).pipe(function EF(e,t){return St(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ce(n);let o=0;return pt(i).pipe(Mo(s=>function SF(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!bD(i)&&(o[hh]=i.title),function wF(e,t,n,r){const i=function TF(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return ce({});const o={};return pt(i).pipe(St(s=>function MF(e,t,n,r){const i=Kc(e,t,r);return Bn(i.resolve?i.resolve(t,n):i(t,n))}(e[s],t,n,r).pipe(yi(),Nt(a=>{o[s]=a}))),Kf(1),function HO(e){return be(()=>e)}(o),mi(s=>s instanceof To?cr:Ps(s)))}(o,e,t,r).pipe(be(s=>(e._resolvedData=s,e.data=Y0(e,n).resolve,i&&bD(i)&&(e.data[hh]=i.title),null)))}(s.route,r,e,t)),Nt(()=>o++),Kf(1),St(s=>o===i.length?ce(n):cr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Nt({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"At least one route resolver didn't emit any value."))}}))}),Nt(c=>{const l=new KO(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),ph(()=>this.afterPreactivation()),ph(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Nt(d=>{l.component=d}),be(()=>{})));for(const d of l.children)u.push(...c(d));return u};return w0(c(a.targetSnapshot.root)).pipe(Yf(),Vo(1))}),be(a=>{const c=function wN(e,t,n){const r=Fs(e,t._root,n?n._root:void 0);return new J0(r,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return{...a,targetRouterState:c}}),Nt(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>be(r=>(new $N(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Nt({next(){o=!0},complete(){o=!0}}),Qf(()=>{o||s||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),mi(a=>{if(s=!0,function iN(e){return e&&e[k0]}(a)){const c=Di(a.url);c||(this.navigated=!0,this.restoreHistory(i,!0));const l=new x0(i.id,this.serializeUrl(i.extractedUrl),a.message);if(r.next(l),c){const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||SD(i.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const c=new GO(i.id,this.serializeUrl(i.extractedUrl),a);r.next(c);try{i.resolve(this.errorHandler(a))}catch(l){i.reject(l)}}return cr}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=n.state?.navigationId?n.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(dh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=i||this.routerState.root,u=c?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),function IN(e,t,n,r,i){if(0===n.length)return sh(t.root,t.root,t.root,r,i);const o=function RN(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new eD(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return wt(o.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new eD(n,t,r)}(n);return o.toRoot()?sh(t.root,t.root,new _e([],{}),r,i):function s(c){const l=function AN(e,t,n,r){return e.isAbsolute?new ah(t.root,!0,0):-1===r?new ah(n,n===t.root,0):function xN(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ah(r,!1,i-o)}(n,r+($c(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,t,e.snapshot?._urlSegment,c),u=l.processChildren?Hc(l.segmentGroup,l.index,o.commands):tD(l.segmentGroup,l.index,o.commands);return sh(t.root,l.segmentGroup,u,r,i)}(e.snapshot?._lastPathIndex)}(l,this.currentUrlTree,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Di(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function VF(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...FF}:!1===r?{...LF}:r,Di(n))return V0(this.currentUrlTree,n,i);const o=this.parseUrl(n);return V0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new ks(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,h)=>{a=f,c=h});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),d=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new x0(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){Qu()},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();function SD(e){return"imperative"!==e}class wD{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(i=>i.outlet===ge);return n}getResolvedTitleForRoute(t){return t.data[hh]}}let UF=(()=>{class e extends wD{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(j(_0))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class TD{}let MD=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(gi(n=>n instanceof ks),Mo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=ac(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pt(i).pipe(Pi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ce(null);const o=i.pipe(St(s=>null===s?ce(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?pt([o,this.loader.loadComponent(r)]).pipe(Pi()):o})}}return e.\u0275fac=function(n){return new(n||e)(j(_t),j(uf),j(si),j(TD),j(mh))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const ID=new J("");let $F=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Zf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ks&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof P0&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new P0(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){Qu()},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const _h=new J("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),RD=new J("ROUTER_FORROOT_GUARD"),AD=new J(""),HF=[Sf,{provide:$0,useClass:H0},{provide:_t,useFactory:function KF(e,t,n,r,i,o,s={},a,c,l,u){const d=new _t(null,e,t,n,r,i,N0(o));return l&&(d.urlHandlingStrategy=l),u&&(d.routeReuseStrategy=u),d.titleStrategy=c??a,function YF(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,d),d},deps:[$0,Vs,Sf,Pt,uf,gh,_h,UF,[wD,new Or],[class xF{},new Or],[class IF{},new Or]]},Vs,{provide:Ci,useFactory:function QF(e){return e.routerState.root},deps:[_t]},mh];function GF(){return new fC("Router",_t)}let xD=(()=>{class e{constructor(n,r){}static forRoot(n,r){return{ngModule:e,providers:[HF,[],PD(n),{provide:RD,useFactory:JF,deps:[[_t,new Or,new ts]]},{provide:_h,useValue:r||{}},r?.useHash?{provide:fi,useClass:IP}:{provide:fi,useClass:FC},{provide:ID,useFactory:()=>{const e=ni(_t),t=ni(qk),n=ni(_h);return n.scrollOffset&&t.setOffset(n.scrollOffset),new $F(e,t,n)}},r?.preloadingStrategy?i2(r.preloadingStrategy):[],{provide:fC,multi:!0,useFactory:GF},r?.initialNavigation?XF(r):[],[{provide:kD,useFactory:ZF},{provide:aC,multi:!0,useExisting:kD}]]}}static forChild(n){return{ngModule:e,providers:[PD(n)]}}}return e.\u0275fac=function(n){return new(n||e)(j(RD,8),j(_t,8))},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({}),e})();function JF(e){return"guarded"}function PD(e){return[{provide:oT,multi:!0,useValue:e},{provide:gh,multi:!0,useValue:e}]}function ZF(){const e=ni(Pt);return t=>{const n=e.get(gc);if(t!==n.components[0])return;const r=e.get(_t),i=e.get(OD);null===e.get(Ch,null,W.Optional)&&r.initialNavigation(),e.get(AD,null,W.Optional)?.setUpPreloading(),e.get(ID,null,W.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.next(),i.complete()}}const kD=new J("");function XF(e){return["disabled"===e.initialNavigation?[{provide:fc,multi:!0,useFactory:()=>{const e=ni(_t);return()=>{e.setUpLocationChangeListener()}}},{provide:Ch,useValue:"disabled"}]:[],"enabledBlocking"===e.initialNavigation?[{provide:Ch,useValue:"enabledBlocking"},{provide:fc,multi:!0,deps:[Pt],useFactory:e=>{const t=e.get(wP,Promise.resolve(null));let n=!1;return()=>t.then(()=>new Promise(r=>{const i=e.get(_t),o=e.get(OD);i.afterPreactivation=()=>n?ce(void 0):(n=!0,r(!0),o),i.initialNavigation()}))}}]:[]]}const OD=new J("",{factory:()=>new on}),Ch=new J("");function i2(e){return[MD,{provide:AD,useExisting:MD},{provide:TD,useExisting:e}]}function ND(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,i)}function rn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(c){ND(o,r,i,s,a,"next",c)}function a(c){ND(o,r,i,s,a,"throw",c)}s(void 0)})}}function Ao(e,t){const n="object"==typeof t;return new Promise((r,i)=>{let s,o=!1;e.subscribe({next:a=>{s=a,o=!0},error:i,complete:()=>{o?r(s):n?r(t.defaultValue):i(new To)}})})}class FD{}class LD{}class Ir{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let r=t[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ir?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Ir;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ir?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=t.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class o2{encodeKey(t){return VD(t)}encodeValue(t){return VD(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const a2=/%(\d[a-f0-9])/gi,c2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VD(e){return encodeURIComponent(e).replace(a2,(t,n)=>c2[n]??t)}function Qc(e){return`${e}`}class $r{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new o2,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function s2(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map(Qc):[Qc(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new $r({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(Qc(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(Qc(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class l2{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function BD(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function jD(e){return typeof Blob<"u"&&e instanceof Blob}function UD(e){return typeof FormData<"u"&&e instanceof FormData}class Gs{constructor(t,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function u2(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ir),this.context||(this.context=new l2),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new $r,this.urlWithParams=n}serializeBody(){return null===this.body?null:BD(this.body)||jD(this.body)||UD(this.body)||function d2(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof $r?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||UD(this.body)?null:jD(this.body)?this.body.type||null:BD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $r?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let c=t.headers||this.headers,l=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((d,f)=>d.set(f,t.setHeaders[f]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((d,f)=>d.set(f,t.setParams[f]),l)),new Gs(n,r,o,{params:l,headers:c,context:u,reportProgress:a,responseType:i,withCredentials:s})}}var ft=(()=>((ft=ft||{})[ft.Sent=0]="Sent",ft[ft.UploadProgress=1]="UploadProgress",ft[ft.ResponseHeader=2]="ResponseHeader",ft[ft.DownloadProgress=3]="DownloadProgress",ft[ft.Response=4]="Response",ft[ft.User=5]="User",ft))();class Dh{constructor(t,n=200,r="OK"){this.headers=t.headers||new Ir,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class bh extends Dh{constructor(t={}){super(t),this.type=ft.ResponseHeader}clone(t={}){return new bh({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Zc extends Dh{constructor(t={}){super(t),this.type=ft.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Zc({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $D extends Dh{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Eh(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let Sh=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Gs)o=n;else{let c,l;c=i.headers instanceof Ir?i.headers:new Ir(i.headers),i.params&&(l=i.params instanceof $r?i.params:new $r({fromObject:i.params})),o=new Gs(n,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=ce(o).pipe(Mo(c=>this.handler.handle(c)));if(n instanceof Gs||"events"===i.observe)return s;const a=s.pipe(gi(c=>c instanceof Zc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(be(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(be(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(be(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(be(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new $r).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Eh(i,r))}post(n,r,i={}){return this.request("POST",n,Eh(i,r))}put(n,r,i={}){return this.request("PUT",n,Eh(i,r))}}return e.\u0275fac=function(n){return new(n||e)(j(FD))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();class HD{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const GD=new J("HTTP_INTERCEPTORS");let f2=(()=>{class e{intercept(n,r){return r.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const h2=/^\)\]\}',?\n/;let zD=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Se(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((h,y)=>i.setRequestHeader(h,y.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const h=n.detectContentTypeHeader();null!==h&&i.setRequestHeader("Content-Type",h)}if(n.responseType){const h=n.responseType.toLowerCase();i.responseType="json"!==h?h:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const h=i.statusText||"OK",y=new Ir(i.getAllResponseHeaders()),D=function p2(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||n.url;return s=new bh({headers:y,status:i.status,statusText:h,url:D}),s},c=()=>{let{headers:h,status:y,statusText:D,url:A}=a(),R=null;204!==y&&(R=typeof i.response>"u"?i.responseText:i.response),0===y&&(y=R?200:0);let L=y>=200&&y<300;if("json"===n.responseType&&"string"==typeof R){const M=R;R=R.replace(h2,"");try{R=""!==R?JSON.parse(R):null}catch($){R=M,L&&(L=!1,R={error:$,text:R})}}L?(r.next(new Zc({body:R,headers:h,status:y,statusText:D,url:A||void 0})),r.complete()):r.error(new $D({error:R,headers:h,status:y,statusText:D,url:A||void 0}))},l=h=>{const{url:y}=a(),D=new $D({error:h,status:i.status||0,statusText:i.statusText||"Unknown Error",url:y||void 0});r.error(D)};let u=!1;const d=h=>{u||(r.next(a()),u=!0);let y={type:ft.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(y.total=h.total),"text"===n.responseType&&!!i.responseText&&(y.partialText=i.responseText),r.next(y)},f=h=>{let y={type:ft.UploadProgress,loaded:h.loaded};h.lengthComputable&&(y.total=h.total),r.next(y)};return i.addEventListener("load",c),i.addEventListener("error",l),i.addEventListener("timeout",l),i.addEventListener("abort",l),n.reportProgress&&(i.addEventListener("progress",d),null!==o&&i.upload&&i.upload.addEventListener("progress",f)),i.send(o),r.next({type:ft.Sent}),()=>{i.removeEventListener("error",l),i.removeEventListener("abort",l),i.removeEventListener("load",c),i.removeEventListener("timeout",l),n.reportProgress&&(i.removeEventListener("progress",d),null!==o&&i.upload&&i.upload.removeEventListener("progress",f)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(j(n0))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})();const wh=new J("XSRF_COOKIE_NAME"),Th=new J("XSRF_HEADER_NAME");class qD{}let g2=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=qC(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(j(Wt),j(lf),j(wh))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),Mh=(()=>{class e{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const i=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(n);const o=this.tokenService.getToken();return null!==o&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,o)})),r.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(j(qD),j(Th))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),m2=(()=>{class e{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(GD,[]);this.chain=r.reduceRight((i,o)=>new HD(i,o),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(j(LD),j(Pt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac}),e})(),y2=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:Mh,useClass:f2}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:wh,useValue:n.cookieName}:[],n.headerName?{provide:Th,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({providers:[Mh,{provide:GD,useExisting:Mh,multi:!0},{provide:qD,useClass:g2},{provide:wh,useValue:"XSRF-TOKEN"},{provide:Th,useValue:"X-XSRF-TOKEN"}]}),e})(),v2=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({providers:[Sh,{provide:FD,useClass:m2},zD,{provide:LD,useExisting:zD}],imports:[y2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),e})(),Ih=(()=>{class e{constructor(n){this.http=n,this._chatRoom$=new Jt({}),this.chatRoom$=this._chatRoom$.asObservable(),this.BASE_URL="/api"}getById(n){this.http.get(this.BASE_URL+"/chatRoom/"+n).subscribe(r=>this._chatRoom$.next(r))}save(n){var r=this;return rn(function*(){if(n._id){const i=yield Ao(r.http.put(r.BASE_URL+"/chatRoom/"+n._id,n));r._chatRoom$.next(i)}else{const i=yield Ao(r.http.post(r.BASE_URL+"/chatRoom",n));r._chatRoom$.next(i)}})()}getEmptyChatRoom(){return{usersIds:[],messages:[]}}}return e.\u0275fac=function(n){return new(n||e)(j(Sh))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const nr=Object.create(null);nr.open="0",nr.close="1",nr.ping="2",nr.pong="3",nr.message="4",nr.upgrade="5",nr.noop="6";const Xc=Object.create(null);Object.keys(nr).forEach(e=>{Xc[nr[e]]=e});const _2={type:"error",data:"parser error"},C2="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),D2="function"==typeof ArrayBuffer,WD=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+r)},n.readAsDataURL(e)},JD=({type:e,data:t},n,r)=>C2&&t instanceof Blob?n?r(t):WD(t,r):D2&&(t instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer)(t))?n?r(t):WD(new Blob([t]),r):r(nr[e]+(t||"")),xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<xo.length;e++)zs[xo.charCodeAt(e)]=e;const w2="function"==typeof ArrayBuffer,M2=(e,t)=>{if(w2){const n=(e=>{let r,o,s,a,c,t=.75*e.length,n=e.length,i=0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);const l=new ArrayBuffer(t),u=new Uint8Array(l);for(r=0;r<n;r+=4)o=zs[e.charCodeAt(r)],s=zs[e.charCodeAt(r+1)],a=zs[e.charCodeAt(r+2)],c=zs[e.charCodeAt(r+3)],u[i++]=o<<2|s>>4,u[i++]=(15&s)<<4|a>>2,u[i++]=(3&a)<<6|63&c;return l})(e);return KD(n,t)}return{base64:!0,data:e}},KD=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e,YD=(e,t)=>{if("string"!=typeof e)return{type:"message",data:KD(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:M2(e.substring(1),t)}:Xc[n]?e.length>1?{type:Xc[n],data:e.substring(1)}:{type:Xc[n]}:_2},QD=String.fromCharCode(30);function ht(e){if(e)return function A2(e){for(var t in ht.prototype)e[t]=ht.prototype[t];return e}(e)}ht.prototype.on=ht.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ht.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},ht.prototype.off=ht.prototype.removeListener=ht.prototype.removeAllListeners=ht.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},ht.prototype.emitReserved=ht.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},ht.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ht.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Hr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function XD(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const x2=setTimeout,P2=clearTimeout;function el(e,t){t.useNativeTimers?(e.setTimeoutFn=x2.bind(Hr),e.clearTimeoutFn=P2.bind(Hr)):(e.setTimeoutFn=setTimeout.bind(Hr),e.clearTimeoutFn=clearTimeout.bind(Hr))}function O2(e){return"string"==typeof e?function N2(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}class F2 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class eb extends ht{constructor(t){super(),this.writable=!1,el(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,n,r){return super.emitReserved("error",new F2(t,n,r)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=YD(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const tb="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),nb={};let ib,rb=0,Gr=0;function ob(e){let t="";do{t=tb[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function sb(){const e=ob(+new Date);return e!==ib?(rb=0,ib=e):e+"."+ob(rb++)}for(;Gr<64;Gr++)nb[tb[Gr]]=Gr;function ab(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}let cb=!1;try{cb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const V2=cb;function lb(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||V2))return new XMLHttpRequest}catch{}if(!t)try{return new(Hr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function B2(){}const j2=null!=new lb({xdomain:!1}).responseType;let nl=(()=>{class e extends ht{constructor(n,r){super(),el(this,r),this.opts=r,this.method=r.method||"GET",this.uri=n,this.async=!1!==r.async,this.data=void 0!==r.data?r.data:null,this.create()}create(){const n=XD(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd,n.xscheme=!!this.opts.xs;const r=this.xhr=new lb(n);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{4===r.readyState&&(200===r.status||1223===r.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof r.status?r.status:0)},0))},r.send(this.data)}catch(i){return void this.setTimeoutFn(()=>{this.onError(i)},0)}typeof document<"u"&&(this.index=e.requestsCount++,e.requests[this.index]=this)}onError(n){this.emitReserved("error",n,this.xhr),this.cleanup(!0)}cleanup(n){if(!(typeof this.xhr>"u"||null===this.xhr)){if(this.xhr.onreadystatechange=B2,n)try{this.xhr.abort()}catch{}typeof document<"u"&&delete e.requests[this.index],this.xhr=null}}onLoad(){const n=this.xhr.responseText;null!==n&&(this.emitReserved("data",n),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return e.requestsCount=0,e.requests={},e})();function ub(){for(let e in nl.requests)nl.requests.hasOwnProperty(e)&&nl.requests[e].abort()}typeof document<"u"&&("function"==typeof attachEvent?attachEvent("onunload",ub):"function"==typeof addEventListener&&addEventListener("onpagehide"in Hr?"pagehide":"unload",ub,!1));const $2="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,n)=>n(t,0),rl=Hr.WebSocket||Hr.MozWebSocket,db=typeof navigator<"u"&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),z2={websocket:class G2 extends eb{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),n=this.opts.protocols,r=db?{}:XD(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=db?new rl(t,n,r):n?new rl(t,n):new rl(t)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const i=n===t.length-1;JD(t[n],this.supportsBinary,o=>{try{this.ws.send(o)}catch{}i&&$2(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const n=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===n&&443!==Number(this.opts.port)||"ws"===n&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=sb()),this.supportsBinary||(t.b64=1);const i=ab(t);return n+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}check(){return!!rl}},polling:class U2 extends eb{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const r="https:"===location.protocol;let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==r}this.supportsBinary=j2&&!(t&&t.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((e,t)=>{const n=e.split(QD),r=[];for(let i=0;i<n.length;i++){const o=YD(n[i],t);if(r.push(o),"error"===o.type)break}return r})(t,this.socket.binaryType).forEach(r=>{if("opening"===this.readyState&&"open"===r.type&&this.onOpen(),"close"===r.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((o,s)=>{JD(o,!1,a=>{r[s]=a,++i===n&&t(r.join(QD))})})})(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const n=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=sb()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&("https"===n&&443!==Number(this.opts.port)||"http"===n&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const i=ab(t);return n+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new nl(this.uri(),t)}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}},q2=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,W2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ah(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=q2.exec(e||""),o={},s=14;for(;s--;)o[W2[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function J2(e,t){const r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.substr(0,1)||0===t.length)&&r.splice(0,1),"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1),r}(0,o.path),o.queryKey=function K2(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}(0,o.query),o}let fb=(()=>{class e extends ht{constructor(n,r={}){super(),n&&"object"==typeof n&&(r=n,n=null),n?(n=Ah(n),r.hostname=n.host,r.secure="https"===n.protocol||"wss"===n.protocol,r.port=n.port,n.query&&(r.query=n.query)):r.host&&(r.hostname=Ah(r.host).host),el(this,r),this.secure=null!=r.secure?r.secure:typeof location<"u"&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function L2(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(n){const r=Object.assign({},this.opts.query);r.EIO=4,r.transport=n,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts.transportOptions[n],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new z2[n](i)}open(){let n;if(this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))n="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);n=this.transports[0]}this.readyState="opening";try{n=this.createTransport(n)}catch{return this.transports.shift(),void this.open()}n.open(),this.setTransport(n)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(n){let r=this.createTransport(n),i=!1;e.priorWebsocketSuccess=!1;const o=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!i)if("pong"===f.type&&"probe"===f.data){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;e.priorWebsocketSuccess="websocket"===r.name,this.transport.pause(()=>{i||"closed"!==this.readyState&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function s(){i||(i=!0,d(),r.close(),r=null)}const a=f=>{const h=new Error("probe error: "+f);h.transport=r.name,s(),this.emitReserved("upgradeError",h)};function c(){a("transport closed")}function l(){a("socket closed")}function u(f){r&&f.name!==r.name&&s()}const d=()=>{r.removeListener("open",o),r.removeListener("error",a),r.removeListener("close",c),this.off("close",l),this.off("upgrading",u)};r.once("open",o),r.once("error",a),r.once("close",c),this.once("close",l),this.once("upgrading",u),r.open()}onOpen(){if(this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let n=0;const r=this.upgrades.length;for(;n<r;n++)this.probe(this.upgrades[n])}}onPacket(n){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=n.data,this.onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data)}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this.upgrades=this.filterUpgrades(n.upgrades),this.pingInterval=n.pingInterval,this.pingTimeout=n.pingTimeout,this.maxPayload=n.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const n=this.getWritablePackets();this.transport.send(n),this.prevBufferLen=n.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(r+=O2(o)),i>0&&r>this.maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}write(n,r,i){return this.sendPacket("message",n,r,i),this}send(n,r,i){return this.sendPacket("message",n,r,i),this}sendPacket(n,r,i,o){if("function"==typeof r&&(o=r,r=void 0),"function"==typeof i&&(o=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const s={type:n,data:r,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),o&&this.once("flush",o),this.flush()}close(){const n=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():n()}):this.upgrading?i():n()),this}onError(n){e.priorWebsocketSuccess=!1,this.emitReserved("error",n),this.onClose("transport error",n)}onClose(n,r){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(n){const r=[];let i=0;const o=n.length;for(;i<o;i++)~this.transports.indexOf(n[i])&&r.push(n[i]);return r}}return e.protocol=4,e})();const Q2="function"==typeof ArrayBuffer,hb=Object.prototype.toString,X2="function"==typeof Blob||typeof Blob<"u"&&"[object BlobConstructor]"===hb.call(Blob),eL="function"==typeof File||typeof File<"u"&&"[object FileConstructor]"===hb.call(File);function xh(e){return Q2&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||X2&&e instanceof Blob||eL&&e instanceof File}function il(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(il(e[n]))return!0;return!1}if(xh(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return il(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&il(e[n]))return!0;return!1}function tL(e){const t=[],r=e;return r.data=Ph(e.data,t),r.attachments=t.length,{packet:r,buffers:t}}function Ph(e,t){if(!e)return e;if(xh(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ph(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ph(e[r],t));return n}return e}function nL(e,t){return e.data=kh(e.data,t),e.attachments=void 0,e}function kh(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=kh(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=kh(e[n],t));return e}const rL=5;var De=(()=>{return(e=De||(De={}))[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK",De;var e})();class iL{constructor(t){this.replacer=t}encode(t){return t.type!==De.EVENT&&t.type!==De.ACK||!il(t)?[this.encodeAsString(t)]:(t.type=t.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let n=""+t.type;return(t.type===De.BINARY_EVENT||t.type===De.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=tL(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Oh extends ht{constructor(t){super(),this.reviver=t}add(t){let n;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t),n.type===De.BINARY_EVENT||n.type===De.BINARY_ACK?(this.reconstructor=new oL(n),0===n.attachments&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else{if(!xh(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n))}}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(void 0===De[r.type])throw new Error("unknown packet type "+r.type);if(r.type===De.BINARY_EVENT||r.type===De.BINARY_ACK){const o=n+1;for(;"-"!==t.charAt(++n)&&n!=t.length;);const s=t.substring(o,n);if(s!=Number(s)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===t.charAt(n+1)){const o=n+1;for(;++n&&","!==t.charAt(n)&&n!==t.length;);r.nsp=t.substring(o,n)}else r.nsp="/";const i=t.charAt(n+1);if(""!==i&&Number(i)==i){const o=n+1;for(;++n;){const s=t.charAt(n);if(null==s||Number(s)!=s){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(!Oh.isPayloadValid(r.type,o))throw new Error("invalid payload");r.data=o}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case De.CONNECT:return"object"==typeof n;case De.DISCONNECT:return void 0===n;case De.CONNECT_ERROR:return"string"==typeof n||"object"==typeof n;case De.EVENT:case De.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case De.ACK:case De.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class oL{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=nL(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function jn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const sL=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class pb extends ht{constructor(t,n,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[jn(t,"open",this.onopen.bind(this)),jn(t,"packet",this.onpacket.bind(this)),jn(t,"error",this.onerror.bind(this)),jn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){if(sL.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');n.unshift(t);const r={type:De.EVENT,data:n,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){const s=this.ids++,a=n.pop();this._registerAckCallback(s,a),r.id=s}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,n){const r=this.flags.timeout;if(void 0===r)return void(this.acks[t]=n);const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},r);this.acks[t]=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,[null,...o])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this.packet({type:De.CONNECT,data:t})}):this.packet({type:De.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case De.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(t);break;case De.ACK:case De.BINARY_ACK:this.onack(t);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r)}}onevent(t){const n=t.data||[];null!=t.id&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t)}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:De.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];"function"==typeof n&&(n.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Po(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Po.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Po.prototype.reset=function(){this.attempts=0},Po.prototype.setMin=function(e){this.ms=e},Po.prototype.setMax=function(e){this.max=e},Po.prototype.setJitter=function(e){this.jitter=e};class Nh extends ht{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,el(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Po({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout??2e4),this._readyState="closed",this.uri=t;const i=n.parser||p;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(n=this.backoff)||void 0===n||n.setMin(t),this)}randomizationFactor(t){var n;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(n=this.backoff)||void 0===n||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(n=this.backoff)||void 0===n||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new fb(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=jn(n,"open",function(){r.onopen(),t&&t()}),o=jn(n,"error",s=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",s),t?t(s):r.maybeReconnectOnOpen()});if(!1!==this._timeout){const s=this._timeout;0===s&&i();const a=this.setTimeoutFn(()=>{i(),n.close(),n.emit("error",new Error("timeout"))},s);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(jn(t,"ping",this.onping.bind(this)),jn(t,"data",this.ondata.bind(this)),jn(t,"error",this.onerror.bind(this)),jn(t,"close",this.onclose.bind(this)),jn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r||(r=new pb(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const qs={};function ol(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function Y2(e,t="",n){let r=e;n=n||typeof location<"u"&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=typeof n<"u"?n.protocol+"//"+e:"https://"+e),r=Ah(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id;let c;return t.forceNew||t["force new connection"]||!1===t.multiplex||qs[i]&&n.path in qs[i].nsps?c=new Nh(r,t):(qs[i]||(qs[i]=new Nh(r,t)),c=qs[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(ol,{Manager:Nh,Socket:pb,io:ol,connect:ol});let bi=(()=>{class e{constructor(){this.uri="",this.socket=ol(this.uri)}listen(n){return new Se(r=>{this.socket.on(n,i=>{r.next(i)})})}emit(n,r){this.socket.emit(n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),zr=(()=>{class e{constructor(n,r){this.http=n,this.webSocketService=r,this._contacts$=new Jt([]),this.contacts$=this._contacts$.asObservable(),this._STORAGE_KEY_LOGGEDIN_USER="loggedinUser",this.BASE_URL="/api"}query(){this.http.get(this.BASE_URL+"/user",{params:{logedInUserId:this.getLoggedinUser()._id}}).subscribe(n=>{this._contacts$.next(n)})}updateUser(n){this.http.put(this.BASE_URL+"/user/"+n._id,n).subscribe(r=>{console.log("v",r)})}getById(n){var r=this;return rn(function*(){return yield Ao(r.http.get(r.BASE_URL+"/user/"+n))})()}refreshLoggedUser(){var n=this;return rn(function*(){const r=n.getLoggedinUser(),i=yield n.getById(r._id);n.saveLocalUser(i)})()}signup(n){var r=this;return rn(function*(){const i=yield Ao(r.http.post(r.BASE_URL+"/auth/signup",n));return r.setUserSocket(i),r.saveLocalUser(i)})()}login(n){var r=this;return rn(function*(){const i=yield Ao(r.http.post(r.BASE_URL+"/auth/login",n));return r.setUserSocket(i),r.saveLocalUser(i)})()}logout(){var n=this;return rn(function*(){return sessionStorage.removeItem(n._STORAGE_KEY_LOGGEDIN_USER),yield Ao(n.http.post(n.BASE_URL+"/auth/logout",{}))})()}setUserSocket(n){const r=n||this.getLoggedinUser();if(!r||!r._id)return console.error("can not get logged in user!!");this.webSocketService.emit("set-user-socket",r._id)}saveLocalUser(n){return sessionStorage.setItem(this._STORAGE_KEY_LOGGEDIN_USER,JSON.stringify(n)),n}getLoggedinUser(){return JSON.parse(sessionStorage.getItem(this._STORAGE_KEY_LOGGEDIN_USER)||"")}}return e.\u0275fac=function(n){return new(n||e)(j(Sh),j(bi))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gb=(()=>{class e{constructor(n){this.webSocketService=n,this._callRequest$=new Jt({}),this.callRequest$=this._callRequest$.asObservable()}callRequest(n){this._callRequest$.next(n)}sendRequest(n){this.webSocketService.emit("call-request",n)}}return e.\u0275fac=function(n){return new(n||e)(j(bi))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function aL(e,t){1&e&&(hr(),Xl(),Ae(0,"img",13)),2&e&&yo("src",Ot(2).contact.imgUrl,ri)}function cL(e,t){if(1&e&&(G(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7),hr(),G(4,"svg",8),Ae(5,"path",9),G(6,"g",10),Ae(7,"path",11),fe()()()(),rt(8,aL,1,1,"img",12),fe()()),2&e){const n=Ot();Me(8),Ie("ngIf",n.contact.imgUrl)}}function lL(e,t){if(1&e&&(G(0,"div",14)(1,"div",15)(2,"span",16),Gt(3),fe()()()),2&e){const n=Ot();Me(3),li(n.contact.name)}}function uL(e,t){if(1&e){const n=mo();G(0,"div",17),hr(),G(1,"svg",18),Ue("click",function(){return Bi(n),ji(Ot().onVideoCall())}),Ae(2,"g",19),G(3,"g",20),Ae(4,"path",21),fe()(),G(5,"svg",22)(6,"g",23)(7,"g",24),Ae(8,"path",25),fe()()()()}}let dL=(()=>{class e{constructor(n,r){this.callService=n,this.contactService=r}ngOnInit(){console.log("contact999",this.contact)}onVideoCall(){const n=this.contactService.getLoggedinUser();this.contact._id&&n._id&&(console.log("request to call video",this.contact.name),this.callService.callRequest({toUserId:this.contact._id,fromUser:{_id:n._id,name:n.name,imgUrl:n.imgUrl,peerId:""},isVideo:!0}))}}return e.\u0275fac=function(n){return new(n||e)(S(gb),S(zr))},e.\u0275cmp=Mt({type:e,selectors:[["chat-header"]],inputs:{contact:"contact"},decls:4,vars:3,consts:[[1,"chat-header"],["class","avatar-main-container",4,"ngIf"],["class","chat-name",4,"ngIf"],["class","options-container",4,"ngIf"],[1,"avatar-main-container"],[1,"avatar-container"],[1,"svg-container"],["data-testid","default-user","data-icon","default-user",1,""],["viewBox","0 0 212 212","width","212","height","212",1,""],["fill","#6a7175","d","M106.251.5C164.653.5 212 47.846 212 106.25S164.653 212 106.25 212C47.846 212 .5 164.654.5 106.25S47.846.5 106.251.5z",1,"background"],["fill","#FFF"],["d","M173.561 171.615a62.767 62.767 0 0 0-2.065-2.955 67.7 67.7 0 0 0-2.608-3.299 70.112 70.112 0 0 0-3.184-3.527 71.097 71.097 0 0 0-5.924-5.47 72.458 72.458 0 0 0-10.204-7.026 75.2 75.2 0 0 0-5.98-3.055c-.062-.028-.118-.059-.18-.087-9.792-4.44-22.106-7.529-37.416-7.529s-27.624 3.089-37.416 7.529c-.338.153-.653.318-.985.474a75.37 75.37 0 0 0-6.229 3.298 72.589 72.589 0 0 0-9.15 6.395 71.243 71.243 0 0 0-5.924 5.47 70.064 70.064 0 0 0-3.184 3.527 67.142 67.142 0 0 0-2.609 3.299 63.292 63.292 0 0 0-2.065 2.955 56.33 56.33 0 0 0-1.447 2.324c-.033.056-.073.119-.104.174a47.92 47.92 0 0 0-1.07 1.926c-.559 1.068-.818 1.678-.818 1.678v.398c18.285 17.927 43.322 28.985 70.945 28.985 27.678 0 52.761-11.103 71.055-29.095v-.289s-.619-1.45-1.992-3.778a58.346 58.346 0 0 0-1.446-2.322zM106.002 125.5c2.645 0 5.212-.253 7.68-.737a38.272 38.272 0 0 0 3.624-.896 37.124 37.124 0 0 0 5.12-1.958 36.307 36.307 0 0 0 6.15-3.67 35.923 35.923 0 0 0 9.489-10.48 36.558 36.558 0 0 0 2.422-4.84 37.051 37.051 0 0 0 1.716-5.25c.299-1.208.542-2.443.725-3.701.275-1.887.417-3.827.417-5.811s-.142-3.925-.417-5.811a38.734 38.734 0 0 0-1.215-5.494 36.68 36.68 0 0 0-3.648-8.298 35.923 35.923 0 0 0-9.489-10.48 36.347 36.347 0 0 0-6.15-3.67 37.124 37.124 0 0 0-5.12-1.958 37.67 37.67 0 0 0-3.624-.896 39.875 39.875 0 0 0-7.68-.737c-21.162 0-37.345 16.183-37.345 37.345 0 21.159 16.183 37.342 37.345 37.342z",1,"primary"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"],[1,"chat-name"],[1,"title-container"],[1,"title-content"],[1,"options-container"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","24px","height","24px","viewBox","0 0 24 24","version","1.1",0,"xml","space","preserve",2,"enable-background","new 0 0 24 24",3,"click"],["id","grid_system"],["id","_icons"],["d","M20.8,7.3C20,6.8,19,6.6,18.1,6.9l-2.3,0.8C15.2,6.1,13.7,5,12,5H6C3.8,5,2,6.8,2,9v6c0,2.2,1.8,4,4,4h6   c1.7,0,3.2-1.1,3.8-2.7l2.3,0.8c0.3,0.1,0.6,0.2,1,0.2c0.6,0,1.2-0.2,1.7-0.6c0.8-0.6,1.2-1.5,1.2-2.4V9.8   C22,8.8,21.5,7.9,20.8,7.3z M12,17H6c-1.1,0-2-0.9-2-2V9c0-1.1,0.9-2,2-2h6c1.1,0,2,0.9,2,2v6C14,16.1,13.1,17,12,17z M20,14.2   c0,0.3-0.2,0.6-0.4,0.8c-0.3,0.2-0.6,0.2-0.9,0.1L16,14.3V9.7l2.7-0.9C19,8.7,19.3,8.8,19.6,9C19.8,9.2,20,9.4,20,9.8V14.2z"],["xmlns","http://www.w3.org/2000/svg","width","24px","height","24px","viewBox","0 0 24 24","fill","none"],["id","Iconly/Curved/Call"],["id","Call"],["id","Stroke 1","fill-rule","evenodd","clip-rule","evenodd","d","M8.20049 15.799C1.3025 8.90022 2.28338 5.74115 3.01055 4.72316C3.10396 4.55862 5.40647 1.11188 7.87459 3.13407C14.0008 8.17945 6.2451 7.46611 11.3894 12.6113C16.5348 17.7554 15.8214 9.99995 20.8659 16.1249C22.8882 18.594 19.4413 20.8964 19.2778 20.9888C18.2598 21.717 15.0995 22.6978 8.20049 15.799Z","stroke","#130F26","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"]],template:function(n,r){1&n&&(G(0,"div",0),rt(1,cL,9,1,"div",1),rt(2,lL,4,1,"div",2),rt(3,uL,9,0,"div",3),fe()),2&n&&(Me(1),Ie("ngIf",r.contact),Me(1),Ie("ngIf",r.contact),Me(1),Ie("ngIf",r.contact))},dependencies:[hi]}),e})(),fL=(()=>{class e{constructor(){}makeId(n=5){for(var r="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<n;o++)r+=i.charAt(Math.floor(Math.random()*i.length));return r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mb=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return e.\u0275fac=function(n){return new(n||e)(S(vr),S(gn))},e.\u0275dir=ee({type:e}),e})(),Ei=(()=>{class e extends mb{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function At(e){return Ar(()=>{const t=e.prototype.constructor,n=t[ur]||su(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[ur]||su(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(e)))(r||e)}}(),e.\u0275dir=ee({type:e,features:[Pe]}),e})();const rr=new J("NgValueAccessor"),gL={provide:rr,useExisting:Be(()=>Ws),multi:!0},yL=new J("CompositionEventMode");let Ws=(()=>{class e extends mb{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mL(){const e=er()?er().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return e.\u0275fac=function(n){return new(n||e)(S(vr),S(gn),S(yL,8))},e.\u0275dir=ee({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Ue("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ze([gL]),Pe]}),e})();const Ft=new J("NgValidators"),Wr=new J("NgAsyncValidators");function Mb(e){return null!=e}function Ib(e){return ps(e)?pt(e):e}function Rb(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function Ab(e,t){return t.map(n=>n(e))}function xb(e){return e.map(t=>function CL(e){return!e.validate}(t)?t:n=>t.validate(n))}function Fh(e){return null!=e?function Pb(e){if(!e)return null;const t=e.filter(Mb);return 0==t.length?null:function(n){return Rb(Ab(n,t))}}(xb(e)):null}function Lh(e){return null!=e?function kb(e){if(!e)return null;const t=e.filter(Mb);return 0==t.length?null:function(n){return function hL(...e){const t=jp(e),{args:n,keys:r}=b0(e),i=new Se(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let d=!1;Hn(n[u]).subscribe(nt(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?S0(r,a):a),o.complete())}))}});return t?i.pipe(E0(t)):i}(Ab(n,t).map(Ib)).pipe(be(Rb))}}(xb(e)):null}function Ob(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Vh(e){return e?Array.isArray(e)?e:[e]:[]}function al(e,t){return Array.isArray(e)?e.includes(t):e===t}function Lb(e,t){const n=Vh(t);return Vh(e).forEach(i=>{al(n,i)||n.push(i)}),n}function Vb(e,t){return Vh(t).filter(n=>!al(e,n))}class Bb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Fh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Kt extends Bb{get formDirective(){return null}get path(){return null}}class Jr extends Bb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jb{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bh=(()=>{class e extends jb{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(S(Jr,2))},e.\u0275dir=ee({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&ec("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pe]}),e})(),jh=(()=>{class e extends jb{constructor(n){super(n)}}return e.\u0275fac=function(n){return new(n||e)(S(Kt,10))},e.\u0275dir=ee({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&ec("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pe]}),e})();const Js="VALID",ll="INVALID",ko="PENDING",Ks="DISABLED";function Gh(e){return(ul(e)?e.validators:e)||null}function $b(e){return Array.isArray(e)?Fh(e):e||null}function zh(e,t){return(ul(t)?t.asyncValidators:e)||null}function Hb(e){return Array.isArray(e)?Lh(e):e||null}function ul(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class qb{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=$b(this._rawValidators),this._composedAsyncValidatorFn=Hb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Js}get invalid(){return this.status===ll}get pending(){return this.status==ko}get disabled(){return this.status===Ks}get enabled(){return this.status!==Ks}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=$b(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Hb(t)}addValidators(t){this.setValidators(Lb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Lb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Vb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Vb(t,this._rawAsyncValidators))}hasValidator(t){return al(this._rawValidators,t)}hasAsyncValidator(t){return al(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ko,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Ks,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Js,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Js||this.status===ko)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ks:Js}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ko,this._hasOwnPendingAsyncValidator=!0;const n=Ib(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Ks:this.errors?ll:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ko)?ko:this._anyControlsHaveStatus(ll)?ll:Js}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ul(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class qh extends qb{constructor(t,n,r){super(Gh(n),zh(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){(function zb(e,t,n){e._forEachChild((r,i)=>{if(void 0===n[i])throw new z(1002,"")})})(this,0,t),Object.keys(t).forEach(r=>{(function Gb(e,t,n){const r=e.controls;if(!(t?Object.keys(r):r).length)throw new z(1e3,"");if(!r[n])throw new z(1001,"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function Ys(e,t){Wh(e,t),t.valueAccessor.writeValue(e.value),e.disabled&&t.valueAccessor.setDisabledState?.(!0),function RL(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Wb(e,t)})}(e,t),function xL(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function AL(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Wb(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function IL(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function hl(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Wh(e,t){const n=function Nb(e){return e._rawValidators}(e);null!==t.validator?e.setValidators(Ob(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=function Fb(e){return e._rawAsyncValidators}(e);null!==t.asyncValidator?e.setAsyncValidators(Ob(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();hl(t._rawValidators,i),hl(t._rawAsyncValidators,i)}function Wb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const FL={provide:Kt,useExisting:Be(()=>Zs)},Qs=(()=>Promise.resolve(null))();let Zs=(()=>{class e extends Kt{constructor(n,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Xe,this.form=new qh({},Fh(n),Lh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Qs.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Ys(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Qs.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Qs.then(()=>{const r=this._findContainer(n.path),i=new qh({});(function Jb(e,t){Wh(e,t)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Qs.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Qs.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function Yb(e,t){e._syncPendingControls(),t.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return e.\u0275fac=function(n){return new(n||e)(S(Ft,10),S(Wr,10))},e.\u0275dir=ee({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&Ue("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ze([FL]),Pe]}),e})();function Qb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Zb(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Xb=class extends qb{constructor(t=null,n,r){super(Gh(n),zh(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ul(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Zb(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Qb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Qb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Zb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},BL={provide:Jr,useExisting:Be(()=>gl)},nE=(()=>Promise.resolve(null))();let gl=(()=>{class e extends Jr{constructor(n,r,i,o,s){super(),this._changeDetectorRef=s,this.control=new Xb,this._registered=!1,this.update=new Xe,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Kh(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===Ws?n=o:function OL(e){return Object.getPrototypeOf(e.constructor)===Ei}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Jh(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ys(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){nE.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function br(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);nE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function dl(e,t){return[...t.path,e]}(n,this._parent):[n]}}return e.\u0275fac=function(n){return new(n||e)(S(Kt,9),S(Ft,10),S(Wr,10),S(rr,10),S(yc,8))},e.\u0275dir=ee({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ze([BL]),Pe,vn]}),e})(),Yh=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=ee({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),iE=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({}),e})(),lV=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({imports:[iE]}),e})(),uV=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({imports:[lV]}),e})(),fV=(()=>{class e{constructor(n,r,i,o){this.contactService=n,this.utilService=r,this.chatService=i,this.webSocketService=o,this.loggedUser=this.contactService.getLoggedinUser(),this.message={fromUser:{name:this.loggedUser.name,imgUrl:this.loggedUser.imgUrl,userId:this.loggedUser._id||""},text:""}}ngOnInit(){}onSendMsg(){var n=this;return rn(function*(){""!==n.message.text&&(n.message._id=n.utilService.makeId(),n.message.createAt=Date.now(),n.chatRoom.messages.push({...n.message}),n.webSocketService.emit("send-message",n.chatRoom),n.chatService.save(n.chatRoom),n.message.text="")})()}}return e.\u0275fac=function(n){return new(n||e)(S(zr),S(fL),S(Ih),S(bi))},e.\u0275cmp=Mt({type:e,selectors:[["chat-footer"]],inputs:{chatRoom:"chatRoom"},decls:9,vars:1,consts:[[1,"chat-footer-container"],["autocomplete","off",3,"ngSubmit"],[1,"chat-footer"],[1,"input-container"],["name","message","type","text","placeholder","Type a message",3,"ngModel","ngModelChange"],[1,"record"],["aria-label","Voice message",1,"record-bttn"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","currentColor","d","M1.101 21.757 23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"]],template:function(n,r){1&n&&(G(0,"footer",0)(1,"form",1),Ue("ngSubmit",function(){return r.onSendMsg()}),G(2,"div",2)(3,"div",3)(4,"input",4),Ue("ngModelChange",function(o){return r.message.text=o}),fe()(),G(5,"div",5)(6,"button",6),hr(),G(7,"svg",7),Ae(8,"path",8),fe()()()()()()),2&n&&(Me(4),Ie("ngModel",r.message.text))},dependencies:[Yh,Ws,Bh,jh,gl,Zs]}),e})(),hV=(()=>{class e{constructor(n){this.contactService=n,this.messageContent=" ",this.messageContainer=" "}ngOnInit(){this.message&&this.contactService.getLoggedinUser()._id!==this.message.fromUser.userId&&(this.messageContent="incoming-message",this.messageContainer="incoming-message-container")}}return e.\u0275fac=function(n){return new(n||e)(S(zr))},e.\u0275cmp=Mt({type:e,selectors:[["message-preview"]],inputs:{message:"message"},decls:11,vars:11,consts:[["data-testid","tail-out","data-icon","tail-out",1,"tail"],["viewBox","0 0 8 13","width","8","height","13",1,"tail-out"],["opacity",".13","d","M5.188 1H0v11.193l6.467-8.625C7.526 2.156 6.958 1 5.188 1z"],["fill","","d","M5.188 0H0v11.193l6.467-8.625C7.526 1.156 6.958 0 5.188 0z"],[1,"text"],[1,"time"]],template:function(n,r){1&n&&(G(0,"div")(1,"span",0),hr(),G(2,"svg",1),Ae(3,"path",2)(4,"path",3),fe()(),Xl(),G(5,"div")(6,"div",4),Gt(7),fe(),G(8,"div",5),Gt(9),cc(10,"date"),fe()()()),2&n&&(kd("message-container ",r.messageContainer,""),Me(5),kd("message-content ",r.messageContent,""),Me(2),li(r.message.text),Me(2),li(Gd(10,8,r.message.createAt,"shortTime")))},dependencies:[Lf]}),e})();function pV(e,t){1&e&&Ae(0,"message-preview",2),2&e&&Ie("message",t.$implicit)}let gV=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Mt({type:e,selectors:[["message-list"]],inputs:{messages:"messages"},decls:2,vars:1,consts:[[1,"message-list-container"],[3,"message",4,"ngFor","ngForOf"],[3,"message"]],template:function(n,r){1&n&&(G(0,"div",0),rt(1,pV,1,1,"message-preview",1),fe()),2&n&&(Me(1),Ie("ngForOf",r.messages))},dependencies:[Of,hV]}),e})();function mV(e,t){1&e&&Ae(0,"chat-header",5),2&e&&Ie("contact",Ot().contact)}function yV(e,t){1&e&&Ae(0,"message-list",6),2&e&&Ie("messages",Ot().chatRoom.messages)}function vV(e,t){1&e&&Ae(0,"chat-footer",7),2&e&&Ie("chatRoom",Ot().chatRoom)}let bE=(()=>{class e{constructor(n,r,i,o,s){this.chatService=n,this.contactService=r,this.router=i,this.route=o,this.webSocketService=s}ngOnInit(){this.route.queryParams.subscribe(n=>{this.loadChatRoom()}),this.webSocketService.listen("new-message").subscribe(n=>{this.chatRoom._id===n._id&&(this.chatRoom=n),this.contactService.refreshLoggedUser()})}loadChatRoom(){var n=this;return rn(function*(){console.log("hello111");const r=n.route.snapshot.queryParams.contact,i=n.route.snapshot.queryParams.chatRoom;r&&i?(n.chatService.getById(i),n.chatService.chatRoom$.subscribe(o=>{n.chatRoom=o}),n.contact=yield n.contactService.getById(r)):console.log("cancel!")})()}}return e.\u0275fac=function(n){return new(n||e)(S(Ih),S(zr),S(_t),S(Ci),S(bi))},e.\u0275cmp=Mt({type:e,selectors:[["app-chat"]],decls:5,vars:3,consts:[[1,"chat"],[1,"back-ground-img"],[3,"contact",4,"ngIf"],["class","message-list-main",3,"messages",4,"ngIf"],[3,"chatRoom",4,"ngIf"],[3,"contact"],[1,"message-list-main",3,"messages"],[3,"chatRoom"]],template:function(n,r){1&n&&(G(0,"div",0),Ae(1,"span",1),rt(2,mV,1,1,"chat-header",2),rt(3,yV,1,1,"message-list",3),rt(4,vV,1,1,"chat-footer",4),fe()),2&n&&(Me(2),Ie("ngIf",r.contact),Me(1),Ie("ngIf",r.chatRoom),Me(1),Ie("ngIf",r.chatRoom))},dependencies:[hi,dL,fV,gV]}),e})();function _V(e,t){1&e&&Ae(0,"img",5),2&e&&yo("src",Ot().imgUrl,ri)}function CV(e,t){1&e&&(G(0,"div",6)(1,"span",7),hr(),G(2,"svg",8),Ae(3,"path",9),G(4,"g",10),Ae(5,"path",11),fe()()()())}let DV=(()=>{class e{constructor(n,r){this.contactService=n,this.router=r,this.imgUrl=this.contactService.getLoggedinUser().imgUrl}ngOnInit(){}onLogout(){this.contactService.logout(),this.router.navigateByUrl("")}}return e.\u0275fac=function(n){return new(n||e)(S(zr),S(_t))},e.\u0275cmp=Mt({type:e,selectors:[["contact-app-header"]],decls:6,vars:2,consts:[[1,"contact-app-header"],[1,"img-container"],["alt","",3,"src",4,"ngIf"],["class","svg-container",4,"ngIf"],[1,"hmburger",3,"click"],["alt","",3,"src"],[1,"svg-container"],["data-testid","default-user","data-icon","default-user",1,""],["viewBox","0 0 212 212","width","212","height","212",1,""],["fill","#6a7175","d","M106.251.5C164.653.5 212 47.846 212 106.25S164.653 212 106.25 212C47.846 212 .5 164.654.5 106.25S47.846.5 106.251.5z",1,"background"],["fill","#FFF"],["d","M173.561 171.615a62.767 62.767 0 0 0-2.065-2.955 67.7 67.7 0 0 0-2.608-3.299 70.112 70.112 0 0 0-3.184-3.527 71.097 71.097 0 0 0-5.924-5.47 72.458 72.458 0 0 0-10.204-7.026 75.2 75.2 0 0 0-5.98-3.055c-.062-.028-.118-.059-.18-.087-9.792-4.44-22.106-7.529-37.416-7.529s-27.624 3.089-37.416 7.529c-.338.153-.653.318-.985.474a75.37 75.37 0 0 0-6.229 3.298 72.589 72.589 0 0 0-9.15 6.395 71.243 71.243 0 0 0-5.924 5.47 70.064 70.064 0 0 0-3.184 3.527 67.142 67.142 0 0 0-2.609 3.299 63.292 63.292 0 0 0-2.065 2.955 56.33 56.33 0 0 0-1.447 2.324c-.033.056-.073.119-.104.174a47.92 47.92 0 0 0-1.07 1.926c-.559 1.068-.818 1.678-.818 1.678v.398c18.285 17.927 43.322 28.985 70.945 28.985 27.678 0 52.761-11.103 71.055-29.095v-.289s-.619-1.45-1.992-3.778a58.346 58.346 0 0 0-1.446-2.322zM106.002 125.5c2.645 0 5.212-.253 7.68-.737a38.272 38.272 0 0 0 3.624-.896 37.124 37.124 0 0 0 5.12-1.958 36.307 36.307 0 0 0 6.15-3.67 35.923 35.923 0 0 0 9.489-10.48 36.558 36.558 0 0 0 2.422-4.84 37.051 37.051 0 0 0 1.716-5.25c.299-1.208.542-2.443.725-3.701.275-1.887.417-3.827.417-5.811s-.142-3.925-.417-5.811a38.734 38.734 0 0 0-1.215-5.494 36.68 36.68 0 0 0-3.648-8.298 35.923 35.923 0 0 0-9.489-10.48 36.347 36.347 0 0 0-6.15-3.67 37.124 37.124 0 0 0-5.12-1.958 37.67 37.67 0 0 0-3.624-.896 39.875 39.875 0 0 0-7.68-.737c-21.162 0-37.345 16.183-37.345 37.345 0 21.159 16.183 37.342 37.345 37.342z",1,"primary"]],template:function(n,r){1&n&&(G(0,"div",0)(1,"div",1),rt(2,_V,1,1,"img",2),rt(3,CV,6,0,"div",3),fe(),G(4,"div",4),Ue("click",function(){return r.onLogout()}),Gt(5,":"),fe()()),2&n&&(Me(2),Ie("ngIf",r.imgUrl),Me(1),Ie("ngIf",!r.imgUrl))},dependencies:[hi]}),e})();function bV(e,t){1&e&&Ae(0,"img",10),2&e&&yo("src",Ot().contact.imgUrl,ri)}function EV(e,t){1&e&&(G(0,"div",11)(1,"span",12),hr(),G(2,"svg",13),Ae(3,"path",14),G(4,"g",15),Ae(5,"path",16),fe()()()())}let SV=(()=>{class e{constructor(n,r,i){this.chatService=n,this.contactService=r,this.router=i,this.loggedUser=this.contactService.getLoggedinUser()}ngOnInit(){}enterChatRoom(){var n=this;return rn(function*(){try{const r=n.getSharedChatRoomId();r?(n.chatService.getById(r),n.chatService.chatRoom$.subscribe(i=>{n.chatRoom=i}),n.router.navigateByUrl(`contact/?contact=${n.contact._id}&chatRoom=${r}`)):(yield n.addChatRoom(),n.chatService.chatRoom$.subscribe(i=>{n.chatRoom=i}),n.updateUsersIdsRooms(),n.chatRoom._id&&n.router.navigateByUrl(`contact/?contact=${n.contact._id}&chatRoom=${n.chatRoom._id}`))}catch(r){console.error("can not enter chatRoom",r)}})()}getSharedChatRoomId(){const n=this.contactService.getLoggedinUser();return this.contact.chatRoomsIds&&this.loggedUser.chatRoomsIds?this.contact.chatRoomsIds.filter(i=>n.chatRoomsIds.includes(i))[0]:null}addChatRoom(){var n=this;return rn(function*(){try{const r=n.chatService.getEmptyChatRoom();r.usersIds=[n.loggedUser._id,n.contact._id],yield n.chatService.save(r)}catch(r){console.error("can not add chat room",r)}})()}updateUsersIdsRooms(){this.chatRoomId=this.chatRoom._id,this.contact.chatRoomsIds?this.contact.chatRoomsIds.push(this.chatRoomId):this.contact.chatRoomsIds=[this.chatRoomId],this.loggedUser.chatRoomsIds?this.loggedUser.chatRoomsIds.push(this.chatRoomId):this.loggedUser.chatRoomsIds=[this.chatRoomId],this.contactService.saveLocalUser(this.loggedUser),this.contactService.updateUser(this.contact),this.contactService.updateUser(this.loggedUser)}ngOnDestroy(){console.log("destroying child...")}}return e.\u0275fac=function(n){return new(n||e)(S(Ih),S(zr),S(_t))},e.\u0275cmp=Mt({type:e,selectors:[["contact-preview"]],inputs:{contact:"contact"},decls:14,vars:7,consts:[[1,"contact-preview-container"],[1,"contact-preview",3,"click"],[1,"contact-img"],["alt","",3,"src",4,"ngIf"],["class","svg-container",4,"ngIf"],[1,"contact-content"],[1,"contact-title"],[1,"title"],[1,"time"],[1,"last-message"],["alt","",3,"src"],[1,"svg-container"],["data-testid","default-user","data-icon","default-user",1,""],["viewBox","0 0 212 212","width","212","height","212",1,""],["fill","#6a7175","d","M106.251.5C164.653.5 212 47.846 212 106.25S164.653 212 106.25 212C47.846 212 .5 164.654.5 106.25S47.846.5 106.251.5z",1,"background"],["fill","#FFF"],["d","M173.561 171.615a62.767 62.767 0 0 0-2.065-2.955 67.7 67.7 0 0 0-2.608-3.299 70.112 70.112 0 0 0-3.184-3.527 71.097 71.097 0 0 0-5.924-5.47 72.458 72.458 0 0 0-10.204-7.026 75.2 75.2 0 0 0-5.98-3.055c-.062-.028-.118-.059-.18-.087-9.792-4.44-22.106-7.529-37.416-7.529s-27.624 3.089-37.416 7.529c-.338.153-.653.318-.985.474a75.37 75.37 0 0 0-6.229 3.298 72.589 72.589 0 0 0-9.15 6.395 71.243 71.243 0 0 0-5.924 5.47 70.064 70.064 0 0 0-3.184 3.527 67.142 67.142 0 0 0-2.609 3.299 63.292 63.292 0 0 0-2.065 2.955 56.33 56.33 0 0 0-1.447 2.324c-.033.056-.073.119-.104.174a47.92 47.92 0 0 0-1.07 1.926c-.559 1.068-.818 1.678-.818 1.678v.398c18.285 17.927 43.322 28.985 70.945 28.985 27.678 0 52.761-11.103 71.055-29.095v-.289s-.619-1.45-1.992-3.778a58.346 58.346 0 0 0-1.446-2.322zM106.002 125.5c2.645 0 5.212-.253 7.68-.737a38.272 38.272 0 0 0 3.624-.896 37.124 37.124 0 0 0 5.12-1.958 36.307 36.307 0 0 0 6.15-3.67 35.923 35.923 0 0 0 9.489-10.48 36.558 36.558 0 0 0 2.422-4.84 37.051 37.051 0 0 0 1.716-5.25c.299-1.208.542-2.443.725-3.701.275-1.887.417-3.827.417-5.811s-.142-3.925-.417-5.811a38.734 38.734 0 0 0-1.215-5.494 36.68 36.68 0 0 0-3.648-8.298 35.923 35.923 0 0 0-9.489-10.48 36.347 36.347 0 0 0-6.15-3.67 37.124 37.124 0 0 0-5.12-1.958 37.67 37.67 0 0 0-3.624-.896 39.875 39.875 0 0 0-7.68-.737c-21.162 0-37.345 16.183-37.345 37.345 0 21.159 16.183 37.342 37.345 37.342z",1,"primary"]],template:function(n,r){1&n&&(G(0,"div",0)(1,"div",1),Ue("click",function(){return r.enterChatRoom()}),G(2,"div",2),rt(3,bV,1,1,"img",3),rt(4,EV,6,0,"div",4),fe(),G(5,"div",5)(6,"div",6)(7,"div",7),Gt(8),fe(),G(9,"div",8),Gt(10),cc(11,"date"),fe()(),G(12,"div",9),Gt(13," see in soon!!! "),fe()()()()),2&n&&(Me(3),Ie("ngIf",r.contact.imgUrl),Me(1),Ie("ngIf",!r.contact.imgUrl),Me(4),li(r.contact.name),Me(2),li(Gd(11,4,r.contact.lastMsgTimeStemp,"h:mm a ")))},dependencies:[hi,Lf]}),e})();function wV(e,t){1&e&&Ae(0,"contact-preview",2),2&e&&Ie("contact",t.$implicit)}let TV=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Mt({type:e,selectors:[["contact-list"]],inputs:{contacts:"contacts"},decls:2,vars:1,consts:[[1,"contact-list"],[3,"contact",4,"ngFor","ngForOf"],[3,"contact"]],template:function(n,r){1&n&&(G(0,"div",0),rt(1,wV,1,1,"contact-preview",1),fe()),2&n&&(Me(1),Ie("ngForOf",r.contacts))},dependencies:[Of,SV]}),e})(),MV=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Mt({type:e,selectors:[["contact-filter"]],decls:8,vars:0,consts:[[1,"contact-filter-container"],[1,"contact-filter"],[1,"filter"],["aria-label","Search or start new chat",1,"filter-bttn"],[1,"_1KJ7A","bHvlO"],["data-testid","search","data-icon","search",1,""],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","currentColor","d","M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"]],template:function(n,r){1&n&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3)(4,"div",4)(5,"span",5),hr(),G(6,"svg",6),Ae(7,"path",7),fe()()()()()()())}}),e})();var EE=m(819);let SE=!0,wE=!0;function Xs(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Oo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==t)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),i.apply(this,[s,c])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(a))return o.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function IV(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(SE=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function RV(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(wE=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function rp(){if("object"==typeof window){if(SE)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function ml(e,t){!wE||console.warn(e+" is deprecated, please use "+t+" instead.")}function TE(e){return"[object Object]"===Object.prototype.toString.call(e)}function ME(e){return TE(e)?Object.keys(e).reduce(function(t,n){const r=TE(e[n]),i=r?ME(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})},{}):e}function ip(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?ip(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{ip(e,e.get(i),n)})}))}function IE(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(s=>{"track"===s.type&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(a=>{a.type===r&&a.trackId===s.id&&ip(e,a,i)})}),i}const RE=rp;function AE(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if("object"!=typeof a||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if("require"===l||"advanced"===l||"mediaSource"===l)return;const u="object"==typeof a[l]?a[l]:{ideal:a[l]};void 0!==u.exact&&"number"==typeof u.exact&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):"deviceId"===h?"sourceId":h};if(void 0!==u.ideal){c.optional=c.optional||[];let f={};"number"==typeof u.ideal?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}void 0!==u.exact&&"number"!=typeof u.exact?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{void 0!==u[f]&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(t.version>=61)return c(a);if((a=JSON.parse(JSON.stringify(a)))&&"object"==typeof a.audio){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};l((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&"object"==typeof a.video){let l=a.video.facingMode;l=l&&("object"==typeof l?l:{ideal:l});const u=t.version<66;if(l&&("user"===l.exact||"environment"===l.exact||"user"===l.ideal||"environment"===l.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u)){let d;if(delete a.video.facingMode,"environment"===l.exact||"environment"===l.ideal?d=["back","rear"]:("user"===l.exact||"user"===l.ideal)&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{let h=(f=f.filter(y=>"videoinput"===y.kind)).find(y=>d.some(D=>y.label.toLowerCase().includes(D)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),RE("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return RE("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})}.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function xV(e,t){if((!e.navigator.mediaDevices||!("getDisplayMedia"in e.navigator.mediaDevices))&&e.navigator.mediaDevices){if("function"!=typeof t)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:r.video&&r.video.frameRate||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),e.navigator.mediaDevices.getUserMedia(r)})}}}function xE(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function PE(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;o=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):{track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;o=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.id):{track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Oo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function kE(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===o.kind?i.createDTMFSender(o):null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);-1!==c&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function OE(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);const s=function(c){const l={};return c.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(h=>{f[h]=d.stat(h)}),l[f.id]=f}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};return arguments.length>=2?t.apply(this,[function(l){i(a(s(l)))},r]):new Promise((c,l)=>{t.apply(this,[function(u){c(a(s(u)))},l])}).then(i,o)}}function NE(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>IE(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Oo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>IE(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function FE(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?-1===this._shimmedLocalStreams[a.id].indexOf(c)&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>-1===a.indexOf(l));this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);-1!==c&&this._shimmedLocalStreams[a].splice(c,1),1===this._shimmedLocalStreams[a].length&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function LE(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return FE(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f];d=d.replace(new RegExp(l._streams[h.id].id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],y=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),y.id)}),new RTCSessionDescription({type:u.type,sdp:d})}e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(1!==f.length||!f[0].getTracks().find(D=>D===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(D=>D.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[d.id];if(y)y.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const D=new e.MediaStream([u]);this._streams[d.id]=D,this._reverseStreams[D.id]=d,this.addStream(D)}return this.getSenders().find(D=>D.track===u)},["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&"function"==typeof arguments[0]?u.apply(this,[y=>{const D=o(this,y);f[0].apply(null,[D])},y=>{f[1]&&f[1].apply(null,y)},arguments[2]]):u.apply(this,arguments).then(y=>o(this,y))}};e.RTCPeerConnection.prototype[l]=d[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return""===l.type?l:o(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(u._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let f;this._streams=this._streams||{},Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(D=>u.track===D)&&(f=this._streams[h])}),f&&(1===f.getTracks().length?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function op(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new("addIceCandidate"===n?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function VE(e,t){Oo(e,"negotiationneeded",n=>{const r=n.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return n})}var kV=m(334),OV=m.n(kV);function BE(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}}(o)))}}function jE(e){"getDisplayMedia"in e.navigator&&(!e.navigator.mediaDevices||e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function sp(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),t.version<15025)){const r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=OV()(e,t.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=function PV(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&ml("RTCIceServer.url","RTCIceServer.urls");const o="string"==typeof i;return o&&(i=[i]),i=i.filter(s=>{if(0===s.indexOf("stun:"))return!1;const a=s.startsWith("turn")&&!s.startsWith("turn:[")&&s.includes("transport=udp");return a&&!n?(n=!0,!0):a&&!n}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}(i.iceServers),rp("ICE servers after filtering:",i.iceServers)),new n(i)},e.RTCPeerConnection.prototype=n.prototype}function UE(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function $E(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){ml("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return"object"==typeof s&&"object"==typeof s.audio&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return"audio"===this.kind&&"object"==typeof a&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function NV(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function HE(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ap(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new("addIceCandidate"===i?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(c=>{if(t.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if("TypeError"!==l.name)throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(s,a)}}function GE(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function zE(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Oo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function qE(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){ml("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function WE(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function JE(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=r.sendEncodings,s.sendEncodings=r.sendEncodings,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function KE(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function YE(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function QE(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function ZE(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(-1===r)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function XE(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function eS(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=a}function tS(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(nS(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function nS(e){return e&&void 0!==e.video?Object.assign({},e,{video:ME(e.video)}):e}function rS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(ml("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function iS(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oS(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>"audio"===s.receiver.track.kind);!1===r.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0===r.offerToReceiveAudio&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>"video"===s.receiver.track.kind);!1===r.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0===r.offerToReceiveVideo&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function sS(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var FV=m(463),yl=m.n(FV);function vl(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if("object"==typeof r&&r.candidate&&0===r.candidate.indexOf("a=")&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new t(r),o=yl().parseCandidate(r.candidate),s=Object.assign(i,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Oo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ea(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=yl().splitSections(a.sdp);return c.shift(),c.some(l=>{const u=yl().parseMLine(l);return u&&"application"===u.kind&&-1!==u.protocol.indexOf("SCTP")})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===c||c.length<2)return-1;const l=parseInt(c[1],10);return l!=l?-1:l},i=function(a){let c=65536;return"firefox"===t.browser&&(c=t.version<57?-1===a?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),c},o=function(a,c){let l=65536;"firefox"===t.browser&&57===t.version&&(l=65535);const u=yl().matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substr(19),10):"firefox"===t.browser&&-1!==c&&(l=2147483637),l},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();"plan-b"===c&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=o(arguments[0],c);let d;d=0===l&&0===u?Number.POSITIVE_INFINITY:0===l||0===u?Math.max(l,u):Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get:()=>d}),this._sctp=f}return s.apply(this,arguments)}}function ta(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if("open"===r.readyState&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Oo(e,"datachannel",r=>(t(r.channel,r.target),r))}function cp(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function lp(e,t){if(!e.RTCPeerConnection||"chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&-1!==i.sdp.indexOf("\na=extmap-allow-mixed")){const o=i.sdp.split("\n").filter(s=>"a=extmap-allow-mixed"!==s.trim()).join("\n");e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function _l(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||0===n.length||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const aS=function LV({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=rp,r=function AV(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Xs(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Xs(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=Xs(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Xs(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:tt,extractVersion:Xs,disableLog:IV,disableWarnings:RV};switch(r.browser){case"chrome":if(!b||!op||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=b,_l(e,r),AE(e,r),xE(e),op(e,r),PE(e),LE(e,r),kE(e),OE(e),NE(e),VE(e,r),vl(e),cp(e),ea(e,r),ta(e),lp(e,r);break;case"firefox":if(!F||!ap||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=F,_l(e,r),$E(e,r),ap(e,r),HE(e),qE(e),GE(e),zE(e),WE(e),JE(e),KE(e),YE(e),QE(e),vl(e),cp(e),ea(e,r),ta(e);break;case"edge":if(!N||!sp||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=N,BE(e),jE(e),sp(e,r),UE(e),ea(e,r),ta(e);break;case"safari":if(!ne||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=ne,_l(e,r),rS(e),oS(e),eS(e),ZE(e),XE(e),iS(e),tS(e),sS(e),vl(e),ea(e,r),ta(e),lp(e,r);break;default:n("Unsupported browser!")}return i}({window:typeof window>"u"?void 0:window});function ir(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var up=aS.default||aS,na=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var t=this.getBrowser(),n=this.getVersion();return!!this.supportedBrowsers.includes(t)&&("chrome"===t?n>=this.minChromeVersion:"firefox"===t?n>=this.minFirefoxVersion:"safari"===t&&!this.isIOS&&n>=this.minSafariVersion)},e.prototype.getBrowser=function(){return up.browserDetails.browser},e.prototype.getVersion=function(){return up.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),n=up.browserDetails.version||0;if("chrome"===t&&n<this.minChromeVersion)return!1;if("firefox"===t&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{(r=new RTCPeerConnection).addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},e.prototype.toString=function(){return"Supports:\n    browser:".concat(this.getBrowser(),"\n    version:").concat(this.getVersion(),"\n    isIOS:").concat(this.isIOS,"\n    isWebRTCSupported:").concat(this.isWebRTCSupported(),"\n    isBrowserSupported:").concat(this.isBrowserSupported(),"\n    isUnifiedPlanSupported:").concat(this.isUnifiedPlanSupported())},e}()),cS={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},VV=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=cS,this.browser=na.getBrowser(),this.browserVersion=na.getVersion(),this.supports=function(){var n,t={browser:na.isBrowserSupported(),webRTC:na.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{n=new RTCPeerConnection(cS),t.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!na.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return t}(),this.pack=EE.pack,this.unpack=EE.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},e.prototype.chunk=function(t){for(var n=[],r=t.size,i=Math.ceil(r/xe.chunkedMTU),o=0,s=0;s<r;){var a=Math.min(r,s+xe.chunkedMTU),c=t.slice(s,a);n.push({__peerData:this._dataCount,n:o,data:c,total:i}),s=a,o++}return this._dataCount++,n},e.prototype.blobToArrayBuffer=function(t,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r},e.prototype.binaryStringToArrayBuffer=function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=255&t.charCodeAt(r);return n.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}(),xe=new VV,lS={};ir(lS,"Peer",()=>SS,e=>SS=e);var ra,BV=Object.prototype.hasOwnProperty,Yt="~";function ia(){}function jV(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function uS(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new jV(n,r||e,i),s=Yt?Yt+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function Cl(e,t){0==--e._eventsCount?e._events=new ia:delete e._events[t]}function Lt(){this._events=new ia,this._eventsCount=0}Object.create&&(ia.prototype=Object.create(null),(new ia).__proto__||(Yt=!1)),Lt.prototype.eventNames=function(){var n,r,t=[];if(0===this._eventsCount)return t;for(r in n=this._events)BV.call(n,r)&&t.push(Yt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t},Lt.prototype.listeners=function(t){var r=this._events[Yt?Yt+t:t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},Lt.prototype.listenerCount=function(t){var r=this._events[Yt?Yt+t:t];return r?r.fn?1:r.length:0},Lt.prototype.emit=function(t,n,r,i,o,s){var a=Yt?Yt+t:t;if(!this._events[a])return!1;var u,d,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,i),!0;case 5:return c.fn.call(c.context,n,r,i,o),!0;case 6:return c.fn.call(c.context,n,r,i,o,s),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var h,f=c.length;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,n);break;case 3:c[d].fn.call(c[d].context,n,r);break;case 4:c[d].fn.call(c[d].context,n,r,i);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c[d].fn.apply(c[d].context,u)}}return!0},Lt.prototype.on=function(t,n,r){return uS(this,t,n,r,!1)},Lt.prototype.once=function(t,n,r){return uS(this,t,n,r,!0)},Lt.prototype.removeListener=function(t,n,r,i){var o=Yt?Yt+t:t;if(!this._events[o])return this;if(!n)return Cl(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&Cl(this,o);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==n||i&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:Cl(this,o)}return this},Lt.prototype.removeAllListeners=function(t){var n;return t?this._events[n=Yt?Yt+t:t]&&Cl(this,n):(this._events=new ia,this._eventsCount=0),this},Lt.prototype.off=Lt.prototype.removeListener,Lt.prototype.addListener=Lt.prototype.on,Lt.prefixed=Yt,Lt.EventEmitter=Lt,ra=Lt;var U={};ir(U,"LogLevel",()=>Qt,e=>Qt=e),ir(U,"default",()=>dS,e=>dS=e);var wi=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Ti=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},UV="PeerJS: ",Qt=(()=>{return(e=Qt||(Qt={}))[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All",Qt;var e})(),$V=function(){function e(){this._logLevel=Qt.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=Qt.All&&this._print.apply(this,Ti([Qt.All],wi(t),!1))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=Qt.Warnings&&this._print.apply(this,Ti([Qt.Warnings],wi(t),!1))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=Qt.Errors&&this._print.apply(this,Ti([Qt.Errors],wi(t),!1))},e.prototype.setLogFunction=function(t){this._print=t},e.prototype._print=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=Ti([UV],wi(n),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=Qt.All?console.log.apply(console,Ti([],wi(i),!1)):t>=Qt.Warnings?console.warn.apply(console,Ti(["WARNING"],wi(i),!1)):t>=Qt.Errors&&console.error.apply(console,Ti(["ERROR"],wi(i),!1))},e}(),dS=new $V,fS={};ir(fS,"Socket",()=>hS,e=>hS=e);var dp,wn=(()=>{return(e=wn||(wn={})).Data="data",e.Media="media",wn;var e})(),et=(()=>{return(e=et||(et={})).BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",et;var e})(),or=(()=>{return(e=or||(or={})).Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",or;var e})(),sr=(()=>{return(e=sr||(sr={})).Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",sr;var e})(),Et=(()=>{return(e=Et||(Et={})).Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",Et;var e})();dp=JSON.parse('{"name":"peerjs","version":"1.4.6","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"type":"module","sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.cjs","browser-unminified":"dist/peerjs.cjs","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"includeNodeModules":true,"context":"browser","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"includeNodeModules":true,"context":"browser","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build && cp dist/peerjs.cjs dist/peerjs.js && cp dist/peerjs.min.cjs dist/peerjs.min.js","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var e,HV=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),hS=function(e){function t(n,r,i,o,s,a){void 0===a&&(a=5e3);var c=e.call(this)||this;return c.pingInterval=a,c._disconnected=!0,c._messagesQueue=[],c._baseUrl=(n?"wss://":"ws://")+r+":"+i+o+"peerjs?key="+s,c}return HV(t,e),t.prototype.start=function(n,r){var i=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+dp.version),this._disconnected=!1,this._socket.onmessage=function(s){var a;try{a=JSON.parse(s.data),U.default.log("Server message received:",a)}catch{return void U.default.log("Invalid server message",s.data)}i.emit(sr.Message,a)},this._socket.onclose=function(s){i._disconnected||(U.default.log("Socket closed.",s),i._cleanup(),i._disconnected=!0,i.emit(sr.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),U.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(this._wsOpen()){var n=JSON.stringify({type:Et.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()}else U.default.log("Cannot send heartbeat, because socket closed")},t.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},t.prototype._sendQueuedMessages=function(){var n,r,i=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),s=o.next();!s.done;s=o.next())this.send(s.value)}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.send=function(n){if(!this._disconnected){if(!this._id)return void this._messagesQueue.push(n);if(!n.type)return void this.emit(sr.Error,"Invalid message");if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(ra.EventEmitter),fp={};ir(fp,"MediaConnection",()=>mS,e=>mS=e);var hp={};ir(hp,"Negotiator",()=>pS,e=>pS=e);var Dl=function(){return Dl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Dl.apply(this,arguments)},bl=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})},El=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){n=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(6===l[0]&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},pS=function(){function e(t){this.connection=t}return e.prototype.startConnection=function(t){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===wn.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){if(this.connection.type===wn.Data){var r=this.connection,o=n.createDataChannel(r.label,{ordered:!!t.reliable});r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},e.prototype._startPeerConnection=function(){U.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},e.prototype._setupListeners=function(t){var n=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;U.default.log("Listening for ICE candidates."),t.onicecandidate=function(a){!a.candidate||!a.candidate.candidate||(U.default.log("Received ICE candidates for ".concat(r,":"),a.candidate),s.socket.send({type:Et.Candidate,payload:{candidate:a.candidate,type:o,connectionId:i},dst:r}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":U.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":U.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":U.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":t.onicecandidate=xe.noop}n.connection.emit("iceStateChanged",t.iceConnectionState)},U.default.log("Listening for data channel"),t.ondatachannel=function(a){U.default.log("Received data channel");var c=a.channel;s.getConnection(r,i).initialize(c)},U.default.log("Listening for remote stream"),t.ontrack=function(a){U.default.log("Received remote stream");var c=a.streams[0],l=s.getConnection(r,i);l.type===wn.Media&&n._addStreamToMediaConnection(c,l)}},e.prototype.cleanup=function(){U.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var r=!1;if(this.connection.type===wn.Data){var o=this.connection.dataChannel;o&&(r=!!o.readyState&&"closed"!==o.readyState)}("closed"!==t.signalingState||r)&&t.close()}},e.prototype._makeOffer=function(){return bl(this,void 0,Promise,function(){var t,n,r,i,o,s,a;return El(this,function(c){switch(c.label){case 0:t=this.connection.peerConnection,n=this.connection.provider,c.label=1;case 1:return c.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:r=c.sent(),U.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return c.sent(),U.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:xe.browser},this.connection.type===wn.Data&&(o=this.connection,i=Dl(Dl({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:Et.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(s=c.sent())&&(n.emitError(et.WebRTC,s),U.default.log("Failed to setLocalDescription, ",s)),[3,6];case 6:return[3,8];case 7:return a=c.sent(),n.emitError(et.WebRTC,a),U.default.log("Failed to createOffer, ",a),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return bl(this,void 0,Promise,function(){var t,n,r,i,o;return El(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,n=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:r=s.sent(),U.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return s.sent(),U.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:Et.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:xe.browser},dst:this.connection.peer}),[3,6];case 5:return i=s.sent(),n.emitError(et.WebRTC,i),U.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=s.sent(),n.emitError(et.WebRTC,o),U.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(t,n){return bl(this,void 0,Promise,function(){var r,i,o,s;return El(this,function(a){switch(a.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,U.default.log("Setting remote description",n),o=this,a.label=1;case 1:return a.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return a.sent(),U.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),"OFFER"!==t?[3,4]:[4,o._makeAnswer()];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:return s=a.sent(),i.emitError(et.WebRTC,s),U.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(t){return bl(this,void 0,Promise,function(){var n,r,i,o,s,a;return El(this,function(c){switch(c.label){case 0:U.default.log("handleCandidate:",t),n=t.candidate,r=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,s=this.connection.provider,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return c.sent(),U.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return a=c.sent(),s.emitError(et.WebRTC,a),U.default.log("Failed to handleCandidate, ",a),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(t,n){if(U.default.log("add tracks from stream ".concat(t.id," to peer connection")),!n.addTrack)return U.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(r){n.addTrack(r,t)})},e.prototype._addStreamToMediaConnection=function(t,n){U.default.log("add stream ".concat(t.id," to media connection ").concat(n.connectionId)),n.addStream(t)},e}(),pp={};ir(pp,"BaseConnection",()=>gS,e=>gS=e);var WV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gS=function(e){function t(n,r,i){var o=e.call(this)||this;return o.peer=n,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return WV(t,e),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(ra.EventEmitter),JV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sl=function(){return Sl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Sl.apply(this,arguments)},mS=function(e){function t(n,r,i){var o=e.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+xe.randomToken(),o._negotiator=new hp.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return JV(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return wn.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(n){U.default.log("Receiving stream",n),this._remoteStream=n,e.prototype.emit.call(this,"stream",n)},t.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case Et.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case Et.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:U.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer))}},t.prototype.answer=function(n,r){var i,o;if(void 0===r&&(r={}),this._localStream)U.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Sl(Sl({},this.options._payload),{_stream:n}));var s=this.provider._getMessages(this.connectionId);try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),c=a.next();!c.done;c=a.next())this.handleMessage(c.value)}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this._open=!0}},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(pp.BaseConnection),gp={};ir(gp,"DataConnection",()=>_S,e=>_S=e);var yS={};ir(yS,"EncodingQueue",()=>vS,e=>vS=e);var YV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vS=function(e){function t(){var n=e.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){U.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return YV(t,e),Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(ra.EventEmitter),QV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_S=function(e){function t(n,r,i){var o=e.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new yS.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+xe.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||or.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(s){o._bufferedSend(s)}),o._encodingQueue.on("error",function(){U.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new hp.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return QV(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return wn.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var n=this;(!xe.supports.binaryBlob||xe.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){U.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){U.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){U.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},t.prototype._handleDataMessage=function(n){var r=this,i=n.data,o=i.constructor,a=i;if(this.serialization===or.Binary||this.serialization===or.BinaryUTF8){if(o===Blob)return void xe.blobToArrayBuffer(i,function(l){var u=xe.unpack(l);r.emit("data",u)});if(o===ArrayBuffer)a=xe.unpack(i);else if(o===String){var c=xe.binaryStringToArrayBuffer(i);a=xe.unpack(c)}}else this.serialization===or.JSON&&(a=this.parse(i));a.__peerData?this._handleChunk(a):e.prototype.emit.call(this,"data",a)},t.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(n,r){if(this.open)if(this.serialization===or.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===or.Binary||this.serialization===or.BinaryUTF8){var i=xe.pack(n);if(!r&&i.size>xe.chunkedMTU)return void this._sendChunks(i);xe.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n);else e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},t.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return U.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},t.prototype._sendChunks=function(n){var r,i,o=xe.chunk(n);U.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=s.next();!a.done;a=s.next())this.send(a.value,!0)}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case Et.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case Et.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:U.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer)}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(pp.BaseConnection),CS={};ir(CS,"API",()=>ES,e=>ES=e);var DS=function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})},bS=function(e,t){var r,i,o,s,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&l[0]?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){n=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(6===l[0]&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},ES=function(){function e(t){this._options=t}return e.prototype._buildRequest=function(t){var r=this._options,i=r.host,o=r.port,s=r.path,a=r.key,c=new URL("".concat(this._options.secure?"https":"http","://").concat(i,":").concat(o).concat(s).concat(a,"/").concat(t));return c.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),c.searchParams.set("version",dp.version),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return DS(this,void 0,Promise,function(){var t,n,r;return bS(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(200!==(t=i.sent()).status)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw n=i.sent(),U.default.error("Error retrieving ID",n),r="","/"===this._options.path&&this._options.host!==xe.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return DS(this,void 0,Promise,function(){var t,n,r;return bS(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(200!==(t=i.sent()).status)throw 401===t.status?("",n=this._options.host===xe.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw r=i.sent(),U.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},e}(),XV=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oa=function(){return oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oa.apply(this,arguments)},sa=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},e3=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},SS=function(e){function t(n,r){var o,i=e.call(this)||this;return i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map,n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=oa({debug:0,host:xe.CLOUD_HOST,port:xe.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:xe.randomToken(),config:xe.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,"/"===i._options.host&&(i._options.host=window.location.hostname),i._options.path&&("/"!==i._options.path[0]&&(i._options.path="/"+i._options.path),"/"!==i._options.path[i._options.path.length-1]&&(i._options.path+="/")),void 0===i._options.secure&&i._options.host!==xe.CLOUD_HOST?i._options.secure=xe.isSecure():i._options.host==xe.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&U.default.setLogFunction(i._options.logFunction),U.default.logLevel=i._options.debug||0,i._api=new CS.API(r),i._socket=i._createServerConnection(),xe.supports.audioVideo||xe.supports.data?o&&!xe.validateId(o)?(i._delayedAbort(et.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(s){return i._initialize(s)}).catch(function(s){return i._abort(et.ServerError,s)}),i):(i._delayedAbort(et.BrowserIncompatible,"The current browser does not support WebRTC"),i)}return XV(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var o=sa(this._connections),s=o.next();!s.done;s=o.next()){var a=e3(s.value,2);i[a[0]]=a[1]}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var n=this,r=new fS.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(sr.Message,function(i){n._handleMessage(i)}),r.on(sr.Error,function(i){n._abort(et.SocketError,i)}),r.on(sr.Disconnected,function(){n.disconnected||(n.emitError(et.Network,"Lost connection to server."),n.disconnect())}),r.on(sr.Close,function(){n.disconnected||n._abort(et.SocketClosed,"Underlying socket is already closed.")}),r},t.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},t.prototype._handleMessage=function(n){var r,i,o=n.type,s=n.payload,a=n.src;switch(o){case Et.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Et.Error:this._abort(et.ServerError,s.msg);break;case Et.IdTaken:this._abort(et.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Et.InvalidKey:this._abort(et.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Et.Leave:U.default.log("Received leave message from ".concat(a)),this._cleanupPeer(a),this._connections.delete(a);break;case Et.Expire:this.emitError(et.PeerUnavailable,"Could not connect to peer ".concat(a));break;case Et.Offer:if((D=this.getConnection(a,y=s.connectionId))&&(D.close(),U.default.warn("Offer received for existing Connection ID:".concat(y))),s.type===wn.Media){var c=new fp.MediaConnection(a,this,{connectionId:y,_payload:s,metadata:s.metadata});this._addConnection(a,D=c),this.emit("call",c)}else{if(s.type!==wn.Data)return void U.default.warn("Received malformed connection type:".concat(s.type));var l=new gp.DataConnection(a,this,{connectionId:y,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});this._addConnection(a,D=l),this.emit("connection",l)}var u=this._getMessages(y);try{for(var d=sa(u),f=d.next();!f.done;f=d.next())D.handleMessage(f.value)}catch(A){r={error:A}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}break;default:if(!s)return void U.default.warn("You received a malformed message from ".concat(a," of type ").concat(o));var y,D;(D=this.getConnection(a,y=s.connectionId))&&D.peerConnection?D.handleMessage(n):y?this._storeMessage(y,n):U.default.warn("You received an unrecognized message:",n)}},t.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},t.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},t.prototype.connect=function(n,r){if(void 0===r&&(r={}),this.disconnected)return U.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(et.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var i=new gp.DataConnection(n,this,r);return this._addConnection(n,i),i},t.prototype.call=function(n,r,i){if(void 0===i&&(i={}),this.disconnected)return U.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(et.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(r){var o=new fp.MediaConnection(n,this,oa(oa({},i),{_stream:r}));return this._addConnection(n,o),o}U.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},t.prototype._addConnection=function(n,r){U.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},t.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},t.prototype.getConnection=function(n,r){var i,o,s=this._connections.get(n);if(!s)return null;try{for(var a=sa(s),c=a.next();!c.done;c=a.next()){var l=c.value;if(l.connectionId===r)return l}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},t.prototype._abort=function(n,r){U.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(n,r){var i;U.default.error("Error:",r),(i="string"==typeof r?new Error(r):r).type=n,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(U.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var n,r;try{for(var i=sa(this._connections.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;this._cleanupPeer(s),this._connections.delete(s)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(n){var r,i,o=this._connections.get(n);if(o)try{for(var s=sa(o),a=s.next();!a.done;a=s.next())a.value.close()}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;U.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)U.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"));U.default.error("In a hurry? We're still trying to make the initial connection!")}},t.prototype.listAllPeers=function(n){var r=this;void 0===n&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(et.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}(ra.EventEmitter),mp=lS.Peer;function t3(e,t){if(1&e){const n=mo();G(0,"button",7),Ue("click",function(){return Bi(n),ji(Ot(2).screenShare())}),Gt(1,"Screen share"),fe()}}function n3(e,t){if(1&e){const n=mo();G(0,"button",7),Ue("click",function(){return Bi(n),ji(Ot(2).stopScreenShare())}),Gt(1,"Stop share screen"),fe()}}function r3(e,t){if(1&e){const n=mo();G(0,"div",1)(1,"div",2),Ae(2,"div",3)(3,"video",4),rt(4,t3,2,0,"button",5),rt(5,n3,2,0,"button",5),G(6,"button",6),Ue("click",function(){return Bi(n),ji(Ot().disconnect())}),Gt(7,"Disconnect"),fe()()()}if(2&e){const n=Ot();Me(4),Ie("ngIf",!n.isMyScreenShared),Me(1),Ie("ngIf",n.isMyScreenShared)}}let i3=(()=>{class e{constructor(n,r){this.callService=n,this.webSocketService=r,this.peerIdShare="",this.peerId="",this.peerList=[],this.isVideoOpen=!1,this.isMyScreenShared=!1,this.secondUserId="",this.getPeerId=()=>{this.peer.on("open",i=>{this.peerId=i}),this.peer.on("call",i=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(o=>{this.lazyStream=o,i.answer(o),i.on("stream",s=>{this.peerList.includes(i.peer)||(this.streamRemoteVideo(s),this.currentPeer=i.peerConnection,this.peerList.push(i.peer))})}).catch(o=>{console.log(o+"Unable to get media")})})},this.peer=new mp}ngOnInit(){this.getPeerId(),this.callService.callRequest$.subscribe(n=>{if(!this.peerId)return;this.secondUserId=n.toUserId;const r=n;r.fromUser.peerId=this.peerId,this.callService.sendRequest(r),this.isVideoOpen=!0}),this.webSocketService.listen("incoming-call-Request").subscribe(n=>{this.isVideoOpen=!0,this.secondUserId=n.toUserId,this.callPeer(n.fromUser.peerId)}),this.webSocketService.listen("got-disconnect-peer-call").subscribe(n=>{console.log("got-disconnect-peer-call"),this.lazyStream.getTracks().forEach(function(i){i.stop()}),this.peer.disconnect(),this.peer.destroy(),this.isVideoOpen=!1,this.peer=new mp})}disconnect(){this.peer.disconnect(),this.peer.destroy(),this.lazyStream.getTracks().forEach(function(r){r.stop()}),this.peer=new mp,this.isVideoOpen=!1,this.webSocketService.emit("disconnect-peer-call",{toUserId:this.secondUserId})}connectWithPeer(){this.callPeer(this.peerIdShare)}callPeer(n){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(r=>{this.lazyStream=r;const i=this.peer.call(n,r);i.on("stream",o=>{this.peerList.includes(i.peer)||(this.streamRemoteVideo(o),this.currentPeer=i.peerConnection,this.peerList.push(i.peer))})}).catch(r=>{console.log(r+"Unable to connect")})}playVideoFromCamera(){return rn(function*(){try{const n={video:!0,audio:!1},r=yield navigator.mediaDevices.getUserMedia(n);document.querySelector("video#localVideo").srcObject=r}catch(n){console.error("Error opening video camera.",n)}})()}streamRemoteVideo(n){this.playVideoFromCamera();const r=document.createElement("video");r.classList.add("video"),r.srcObject=n,r.play(),document.getElementById("remote-video")?.append(r)}screenShare(){this.shareScreen(),this.isMyScreenShared=!0}shareScreen(){navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:{echoCancellation:!0,noiseSuppression:!0}}).then(n=>{const r=n.getVideoTracks()[0];r.onended=()=>{this.stopScreenShare()},this.currentPeer.getSenders().find(o=>o.track.kind===r.kind).replaceTrack(r)}).catch(n=>{console.log("Unable to get display media "+n)})}stopScreenShare(){const n=this.lazyStream.getVideoTracks()[0];this.currentPeer.getSenders().find(i=>i.track.kind===n.kind).replaceTrack(n),this.isMyScreenShared=!1}}return e.\u0275fac=function(n){return new(n||e)(S(gb),S(bi))},e.\u0275cmp=Mt({type:e,selectors:[["app-video-call"]],decls:1,vars:1,consts:[["class","video-call-modal-container",4,"ngIf"],[1,"video-call-modal-container"],[1,"video-call-modal"],["id","remote-video",1,"remote-video"],["id","localVideo","autoplay","","playsinline","","controls","false",1,"local-video"],["class","share-screen",3,"click",4,"ngIf"],[3,"click"],[1,"share-screen",3,"click"]],template:function(n,r){1&n&&rt(0,r3,8,2,"div",0),2&n&&Ie("ngIf",r.isVideoOpen)},dependencies:[hi]}),e})(),o3=(()=>{class e{constructor(n,r){this.contactService=n,this.webSocketService=r}ngOnInit(){console.log("hello "),this.contactService.query(),this.contacts$=this.contactService.contacts$;const n=this.contactService.getLoggedinUser();this.contactService.setUserSocket(n),this.webSocketService.listen("new-message").subscribe(r=>{console.log("data",r),this.contactService.query(),this.contacts$=this.contactService.contacts$,this.contactService.refreshLoggedUser(),console.log("hihihihihihiihihihi")})}}return e.\u0275fac=function(n){return new(n||e)(S(zr),S(bi))},e.\u0275cmp=Mt({type:e,selectors:[["app-contact-app"]],decls:10,vars:3,consts:[[1,"contact-app"],[1,"call-container"],[1,"contacts-app-container"],[3,"contacts"],[1,"chat-app-container"]],template:function(n,r){1&n&&(G(0,"div",0)(1,"div",1),Ae(2,"app-video-call"),fe(),G(3,"div",2),Ae(4,"contact-app-header")(5,"contact-filter")(6,"contact-list",3),cc(7,"async"),fe(),G(8,"div",4),Ae(9,"app-chat"),fe()()),2&n&&(Me(6),Ie("contacts",P_(7,1,r.contacts$)))},dependencies:[DV,TV,MV,bE,i3,ZC]}),e})(),s3=(()=>{class e{constructor(){this._imgUrl$=new Jt(""),this.imgUrl$=this._imgUrl$.asObservable()}uploadImg(n){var r=this;return rn(function*(){const a=new FormData;a.append("file",n.target.files[0]),a.append("upload_preset","okr6cxy4");try{const c=yield fetch("https://api.cloudinary.com/v1_1/dfhp1qewd/image/upload",{method:"POST",body:a}),{url:l}=yield c.json();return r._imgUrl$.next(l),l}catch(c){console.error("ERROR!",c)}})()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function a3(e,t){if(1&e&&(G(0,"div",12)(1,"div",13),Ae(2,"img",14),fe()()),2&e){const n=Ot();Me(2),yo("src",n.imgUrl,ri)}}function c3(e,t){if(1&e){const n=mo();G(0,"div",15)(1,"label",16),Gt(2," Select Image "),G(3,"input",17),Ue("change",function(i){return Bi(n),ji(Ot().onFileSelected(i))}),fe()()()}}function l3(e,t){1&e&&(G(0,"button"),Gt(1,"Signup"),fe())}function u3(e,t){1&e&&(G(0,"button"),Gt(1,"Login"),fe())}const d3=[{path:"",component:(()=>{class e{constructor(n,r,i,o){this.cloudinaryService=n,this.contactservice=r,this.router=i,this.webSocketService=o,this.contact={name:"",password:"",imgUrl:"",lastMsgTimeStemp:""},this.imgUrl=null,this.isSignUp=!0}ngOnInit(){}onFileSelected(n){this.cloudinaryService.uploadImg(n),this.subImg=this.cloudinaryService.imgUrl$.subscribe(r=>{console.log("imgUrl",r),this.imgUrl=r,this.contact.imgUrl=r})}onSubmit(){this.isSignUp?this.signup():this.login()}signup(){var n=this;return rn(function*(){try{yield n.contactservice.signup(n.contact),n.router.navigateByUrl("/contact"),n.setUserSocket()}catch{console.log("can not signup")}})()}login(){var n=this;return rn(function*(){try{yield n.contactservice.login(n.contact),n.router.navigateByUrl("/contact"),n.setUserSocket()}catch{console.log("can not login")}})()}setUserSocket(){const n=this.contactservice.getLoggedinUser();if(!n||!n._id)return console.error("can not get logged in user!!");this.webSocketService.emit("set-user-socket",n._id)}onToggleSignInUp(){this.isSignUp=!this.isSignUp}ngOnDestroy(){}}return e.\u0275fac=function(n){return new(n||e)(S(s3),S(zr),S(_t),S(bi))},e.\u0275cmp=Mt({type:e,selectors:[["app-sign"]],decls:15,vars:6,consts:[[1,"sign"],["autocomplete","off",3,"ngSubmit"],[1,"signup-container"],["class","img-container-main",4,"ngIf"],[1,"input-container"],["type","text","name","name","id","name","placeholder","Enter your name",3,"ngModel","ngModelChange"],["type","text","name","password","id","password","placeholder","Enter a password",3,"ngModel","ngModelChange"],["class","input-file-container",4,"ngIf"],[1,"bttn-container"],[4,"ngIf"],[1,"bttn-switch-container"],[3,"click"],[1,"img-container-main"],[1,"img-container"],["alt","",3,"src"],[1,"input-file-container"],["for","inputTag"],["id","inputTag","type","file",3,"change"]],template:function(n,r){1&n&&(G(0,"div",0)(1,"form",1),Ue("ngSubmit",function(){return r.onSubmit()}),G(2,"div",2),rt(3,a3,3,1,"div",3),G(4,"div",4)(5,"input",5),Ue("ngModelChange",function(o){return r.contact.name=o}),fe()(),G(6,"div",4)(7,"input",6),Ue("ngModelChange",function(o){return r.contact.password=o}),fe()(),rt(8,c3,4,0,"div",7),G(9,"div",8),rt(10,l3,2,0,"button",9),rt(11,u3,2,0,"button",9),fe()()(),G(12,"div",10)(13,"div",11),Ue("click",function(){return r.onToggleSignInUp()}),Gt(14,"Have acount? Switch to Login"),fe()()()),2&n&&(Me(3),Ie("ngIf",r.imgUrl),Me(2),Ie("ngModel",r.contact.name),Me(2),Ie("ngModel",r.contact.password),Me(1),Ie("ngIf",r.isSignUp),Me(2),Ie("ngIf",r.isSignUp),Me(1),Ie("ngIf",!r.isSignUp))},dependencies:[hi,Yh,Ws,Bh,jh,gl,Zs]}),e})()},{path:"contact",component:o3,children:[{path:":id",component:bE}]}];let f3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e}),e.\u0275inj=cn({imports:[xD.forRoot(d3),xD]}),e})(),h3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Mt({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"main-app"]],template:function(n,r){1&n&&(G(0,"section",0),Ae(1,"router-outlet"),fe())},dependencies:[lh],styles:[".main-app[_ngcontent-%COMP%]{color:#d1d7db}"]}),e})(),p3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mn({type:e,bootstrap:[h3]}),e.\u0275inj=cn({imports:[_O,f3,uV,v2]}),e})();(function iP(){DC=!1})(),vO().bootstrapModule(p3).catch(e=>console.error(e))},819:(Zt,T,m)=>{var p=m(417).MY,b=m(417).cx;function F(v){this.index=0,this.dataBuffer=v,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function ne(){this.bufferBuilder=new p}function tt(v){var C=v.charCodeAt(0);return C<=2047?"00":C<=65535?"000":C<=2097151?"0000":C<=67108863?"00000":"000000"}Zt.exports={unpack:function(v){return new F(v).unpack()},pack:function(v){var C=new ne;return C.pack(v),C.getBuffer()}},F.prototype.unpack=function(){var C,v=this.unpack_uint8();if(v<128)return v;if((224^v)<32)return(224^v)-32;if((C=160^v)<=15)return this.unpack_raw(C);if((C=176^v)<=15)return this.unpack_string(C);if((C=144^v)<=15)return this.unpack_array(C);if((C=128^v)<=15)return this.unpack_map(C);switch(v){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return C=this.unpack_uint16(),this.unpack_string(C);case 217:return C=this.unpack_uint32(),this.unpack_string(C);case 218:return C=this.unpack_uint16(),this.unpack_raw(C);case 219:return C=this.unpack_uint32(),this.unpack_raw(C);case 220:return C=this.unpack_uint16(),this.unpack_array(C);case 221:return C=this.unpack_uint32(),this.unpack_array(C);case 222:return C=this.unpack_uint16(),this.unpack_map(C);case 223:return C=this.unpack_uint32(),this.unpack_map(C)}},F.prototype.unpack_uint8=function(){var v=255&this.dataView[this.index];return this.index++,v},F.prototype.unpack_uint16=function(){var v=this.read(2),C=256*(255&v[0])+(255&v[1]);return this.index+=2,C},F.prototype.unpack_uint32=function(){var v=this.read(4),C=256*(256*(256*v[0]+v[1])+v[2])+v[3];return this.index+=4,C},F.prototype.unpack_uint64=function(){var v=this.read(8),C=256*(256*(256*(256*(256*(256*(256*v[0]+v[1])+v[2])+v[3])+v[4])+v[5])+v[6])+v[7];return this.index+=8,C},F.prototype.unpack_int8=function(){var v=this.unpack_uint8();return v<128?v:v-256},F.prototype.unpack_int16=function(){var v=this.unpack_uint16();return v<32768?v:v-65536},F.prototype.unpack_int32=function(){var v=this.unpack_uint32();return v<Math.pow(2,31)?v:v-Math.pow(2,32)},F.prototype.unpack_int64=function(){var v=this.unpack_uint64();return v<Math.pow(2,63)?v:v-Math.pow(2,64)},F.prototype.unpack_raw=function(v){if(this.length<this.index+v)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+v+" "+this.length);var C=this.dataBuffer.slice(this.index,this.index+v);return this.index+=v,C},F.prototype.unpack_string=function(v){for(var se,ke,C=this.read(v),x=0,H="";x<v;)(se=C[x])<128?(H+=String.fromCharCode(se),x++):(192^se)<32?(ke=(192^se)<<6|63&C[x+1],H+=String.fromCharCode(ke),x+=2):(ke=(15&se)<<12|(63&C[x+1])<<6|63&C[x+2],H+=String.fromCharCode(ke),x+=3);return this.index+=v,H},F.prototype.unpack_array=function(v){for(var C=new Array(v),x=0;x<v;x++)C[x]=this.unpack();return C},F.prototype.unpack_map=function(v){for(var C={},x=0;x<v;x++){var H=this.unpack(),se=this.unpack();C[H]=se}return C},F.prototype.unpack_float=function(){var v=this.unpack_uint32();return(0==v>>31?1:-1)*(8388607&v|8388608)*Math.pow(2,(v>>23&255)-127-23)},F.prototype.unpack_double=function(){var v=this.unpack_uint32(),C=this.unpack_uint32(),H=(v>>20&2047)-1023;return(0==v>>31?1:-1)*((1048575&v|1048576)*Math.pow(2,H-20)+C*Math.pow(2,H-52))},F.prototype.read=function(v){var C=this.index;if(C+v<=this.length)return this.dataView.subarray(C,C+v);throw new Error("BinaryPackFailure: read index out of range")},ne.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},ne.prototype.pack=function(v){var C=typeof v;if("string"===C)this.pack_string(v);else if("number"===C)Math.floor(v)===v?this.pack_integer(v):this.pack_double(v);else if("boolean"===C)!0===v?this.bufferBuilder.append(195):!1===v&&this.bufferBuilder.append(194);else if("undefined"===C)this.bufferBuilder.append(192);else{if("object"!==C)throw new Error('Type "'+C+'" not yet supported');if(null===v)this.bufferBuilder.append(192);else{var x=v.constructor;if(x==Array)this.pack_array(v);else if(x==Blob||x==File||v instanceof Blob||v instanceof File)this.pack_bin(v);else if(x==ArrayBuffer)this.pack_bin(b.useArrayBufferView?new Uint8Array(v):v);else if("BYTES_PER_ELEMENT"in v)this.pack_bin(b.useArrayBufferView?new Uint8Array(v.buffer):v.buffer);else if(x==Object||x.toString().startsWith("class"))this.pack_object(v);else if(x==Date)this.pack_string(v.toString());else{if("function"!=typeof v.toBinaryPack)throw new Error('Type "'+x.toString()+'" not yet supported');this.bufferBuilder.append(v.toBinaryPack())}}}this.bufferBuilder.flush()},ne.prototype.pack_bin=function(v){var C=v.length||v.byteLength||v.size;if(C<=15)this.pack_uint8(160+C);else if(C<=65535)this.bufferBuilder.append(218),this.pack_uint16(C);else{if(!(C<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(C)}this.bufferBuilder.append(v)},ne.prototype.pack_string=function(v){var C=function pe(v){return v.length>600?new Blob([v]).size:v.replace(/[^\u0000-\u007F]/g,tt).length}(v);if(C<=15)this.pack_uint8(176+C);else if(C<=65535)this.bufferBuilder.append(216),this.pack_uint16(C);else{if(!(C<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(C)}this.bufferBuilder.append(v)},ne.prototype.pack_array=function(v){var C=v.length;if(C<=15)this.pack_uint8(144+C);else if(C<=65535)this.bufferBuilder.append(220),this.pack_uint16(C);else{if(!(C<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(C)}for(var x=0;x<C;x++)this.pack(v[x])},ne.prototype.pack_integer=function(v){if(v>=-32&&v<=127)this.bufferBuilder.append(255&v);else if(v>=0&&v<=255)this.bufferBuilder.append(204),this.pack_uint8(v);else if(v>=-128&&v<=127)this.bufferBuilder.append(208),this.pack_int8(v);else if(v>=0&&v<=65535)this.bufferBuilder.append(205),this.pack_uint16(v);else if(v>=-32768&&v<=32767)this.bufferBuilder.append(209),this.pack_int16(v);else if(v>=0&&v<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(v);else if(v>=-2147483648&&v<=2147483647)this.bufferBuilder.append(210),this.pack_int32(v);else if(v>=-0x8000000000000000&&v<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(v);else{if(!(v>=0&&v<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(v)}},ne.prototype.pack_double=function(v){var C=0;v<0&&(C=1,v=-v);var x=Math.floor(Math.log(v)/Math.LN2),H=v/Math.pow(2,x)-1,se=Math.floor(H*Math.pow(2,52)),ke=Math.pow(2,32),P=C<<31|x+1023<<20|se/ke&1048575,Ce=se%ke;this.bufferBuilder.append(203),this.pack_int32(P),this.pack_int32(Ce)},ne.prototype.pack_object=function(v){var x=Object.keys(v).length;if(x<=15)this.pack_uint8(128+x);else if(x<=65535)this.bufferBuilder.append(222),this.pack_uint16(x);else{if(!(x<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(x)}for(var H in v)v.hasOwnProperty(H)&&(this.pack(H),this.pack(v[H]))},ne.prototype.pack_uint8=function(v){this.bufferBuilder.append(v)},ne.prototype.pack_uint16=function(v){this.bufferBuilder.append(v>>8),this.bufferBuilder.append(255&v)},ne.prototype.pack_uint32=function(v){var C=4294967295&v;this.bufferBuilder.append((4278190080&C)>>>24),this.bufferBuilder.append((16711680&C)>>>16),this.bufferBuilder.append((65280&C)>>>8),this.bufferBuilder.append(255&C)},ne.prototype.pack_uint64=function(v){var C=v/Math.pow(2,32),x=v%Math.pow(2,32);this.bufferBuilder.append((4278190080&C)>>>24),this.bufferBuilder.append((16711680&C)>>>16),this.bufferBuilder.append((65280&C)>>>8),this.bufferBuilder.append(255&C),this.bufferBuilder.append((4278190080&x)>>>24),this.bufferBuilder.append((16711680&x)>>>16),this.bufferBuilder.append((65280&x)>>>8),this.bufferBuilder.append(255&x)},ne.prototype.pack_int8=function(v){this.bufferBuilder.append(255&v)},ne.prototype.pack_int16=function(v){this.bufferBuilder.append((65280&v)>>8),this.bufferBuilder.append(255&v)},ne.prototype.pack_int32=function(v){this.bufferBuilder.append(v>>>24&255),this.bufferBuilder.append((16711680&v)>>>16),this.bufferBuilder.append((65280&v)>>>8),this.bufferBuilder.append(255&v)},ne.prototype.pack_int64=function(v){var C=Math.floor(v/Math.pow(2,32)),x=v%Math.pow(2,32);this.bufferBuilder.append((4278190080&C)>>>24),this.bufferBuilder.append((16711680&C)>>>16),this.bufferBuilder.append((65280&C)>>>8),this.bufferBuilder.append(255&C),this.bufferBuilder.append((4278190080&x)>>>24),this.bufferBuilder.append((16711680&x)>>>16),this.bufferBuilder.append((65280&x)>>>8),this.bufferBuilder.append(255&x)}},417:Zt=>{var T={};T.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),T.useArrayBufferView=!T.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch{return!0}}(),Zt.exports.cx=T;var m=Zt.exports.xE;function p(){this._pieces=[],this._parts=[]}typeof window<"u"&&(m=Zt.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),p.prototype.append=function(b){"number"==typeof b?this._pieces.push(b):(this.flush(),this._parts.push(b))},p.prototype.flush=function(){if(this._pieces.length>0){var b=new Uint8Array(this._pieces);T.useArrayBufferView||(b=b.buffer),this._parts.push(b),this._pieces=[]}},p.prototype.getBuffer=function(){if(this.flush(),T.useBlobBuilder){for(var b=new m,N=0,F=this._parts.length;N<F;N++)b.append(this._parts[N]);return b.getBlob()}return new Blob(this._parts)},Zt.exports.MY=p},334:(Zt,T,m)=>{"use strict";var p=m(463);function N(C,x,H,se,ke){var P=p.writeRtpDescription(C.kind,x);if(P+=p.writeIceParameters(C.iceGatherer.getLocalParameters()),P+=p.writeDtlsParameters(C.dtlsTransport.getLocalParameters(),"offer"===H?"actpass":ke||"active"),P+="a=mid:"+C.mid+"\r\n",P+=C.rtpSender&&C.rtpReceiver?"a=sendrecv\r\n":C.rtpSender?"a=sendonly\r\n":C.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",C.rtpSender){var Ce=C.rtpSender._initialTrackId||C.rtpSender.track.id;C.rtpSender._initialTrackId=Ce;var me="msid:"+(se?se.id:"-")+" "+Ce+"\r\n";P+="a="+me,P+="a=ssrc:"+C.sendEncodingParameters[0].ssrc+" "+me,C.sendEncodingParameters[0].rtx&&(P+="a=ssrc:"+C.sendEncodingParameters[0].rtx.ssrc+" "+me,P+="a=ssrc-group:FID "+C.sendEncodingParameters[0].ssrc+" "+C.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return P+="a=ssrc:"+C.sendEncodingParameters[0].ssrc+" cname:"+p.localCName+"\r\n",C.rtpSender&&C.sendEncodingParameters[0].rtx&&(P+="a=ssrc:"+C.sendEncodingParameters[0].rtx.ssrc+" cname:"+p.localCName+"\r\n"),P}function ne(C,x){var H={codecs:[],headerExtensions:[],fecMechanisms:[]},se=function(P,Ce){P=parseInt(P,10);for(var me=0;me<Ce.length;me++)if(Ce[me].payloadType===P||Ce[me].preferredPayloadType===P)return Ce[me]},ke=function(P,Ce,me,g){var _=se(P.parameters.apt,me),w=se(Ce.parameters.apt,g);return _&&w&&_.name.toLowerCase()===w.name.toLowerCase()};return C.codecs.forEach(function(P){for(var Ce=0;Ce<x.codecs.length;Ce++){var me=x.codecs[Ce];if(P.name.toLowerCase()===me.name.toLowerCase()&&P.clockRate===me.clockRate){if("rtx"===P.name.toLowerCase()&&P.parameters&&me.parameters.apt&&!ke(P,me,C.codecs,x.codecs))continue;(me=JSON.parse(JSON.stringify(me))).numChannels=Math.min(P.numChannels,me.numChannels),H.codecs.push(me),me.rtcpFeedback=me.rtcpFeedback.filter(function(g){for(var _=0;_<P.rtcpFeedback.length;_++)if(P.rtcpFeedback[_].type===g.type&&P.rtcpFeedback[_].parameter===g.parameter)return!0;return!1});break}}}),C.headerExtensions.forEach(function(P){for(var Ce=0;Ce<x.headerExtensions.length;Ce++){var me=x.headerExtensions[Ce];if(P.uri===me.uri){H.headerExtensions.push(me);break}}}),H}function tt(C,x,H){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[x][C].indexOf(H)}function pe(C,x){var H=C.getRemoteCandidates().find(function(se){return x.foundation===se.foundation&&x.ip===se.ip&&x.port===se.port&&x.priority===se.priority&&x.protocol===se.protocol&&x.type===se.type});return H||C.addRemoteCandidate(x),!H}function v(C,x){var H=new Error(x);return H.name=C,H.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[C],H}Zt.exports=function(C,x){function H(g,_){_.addTrack(g),_.dispatchEvent(new C.MediaStreamTrackEvent("addtrack",{track:g}))}function ke(g,_,w,E){var k=new Event("track");k.track=_,k.receiver=w,k.transceiver={receiver:w},k.streams=E,C.setTimeout(function(){g._dispatchEvent("track",k)})}var P=function(g){var _=this,w=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(k){_[k]=w[k].bind(w)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",g=JSON.parse(JSON.stringify(g||{})),this.usingBundle="max-bundle"===g.bundlePolicy,"negotiate"===g.rtcpMuxPolicy)throw v("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(g.rtcpMuxPolicy||(g.rtcpMuxPolicy="require"),g.iceTransportPolicy){case"all":case"relay":break;default:g.iceTransportPolicy="all"}switch(g.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:g.bundlePolicy="balanced"}if(g.iceServers=function F(C,x){var H=!1;return(C=JSON.parse(JSON.stringify(C))).filter(function(se){if(se&&(se.urls||se.url)){var ke=se.urls||se.url;se.url&&!se.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var P="string"==typeof ke;return P&&(ke=[ke]),ke=ke.filter(function(Ce){return 0!==Ce.indexOf("turn:")||-1===Ce.indexOf("transport=udp")||-1!==Ce.indexOf("turn:[")||H?0===Ce.indexOf("stun:")&&x>=14393&&-1===Ce.indexOf("?transport=udp"):(H=!0,!0)}),delete se.url,se.urls=P?ke[0]:ke,!!ke.length}})}(g.iceServers||[],x),this._iceGatherers=[],g.iceCandidatePoolSize)for(var E=g.iceCandidatePoolSize;E>0;E--)this._iceGatherers.push(new C.RTCIceGatherer({iceServers:g.iceServers,gatherPolicy:g.iceTransportPolicy}));else g.iceCandidatePoolSize=0;this._config=g,this.transceivers=[],this._sdpSessionId=p.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(P.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(P.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),P.prototype.onicecandidate=null,P.prototype.onaddstream=null,P.prototype.ontrack=null,P.prototype.onremovestream=null,P.prototype.onsignalingstatechange=null,P.prototype.oniceconnectionstatechange=null,P.prototype.onconnectionstatechange=null,P.prototype.onicegatheringstatechange=null,P.prototype.onnegotiationneeded=null,P.prototype.ondatachannel=null,P.prototype._dispatchEvent=function(g,_){this._isClosed||(this.dispatchEvent(_),"function"==typeof this["on"+g]&&this["on"+g](_))},P.prototype._emitGatheringStateChange=function(){var g=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",g)},P.prototype.getConfiguration=function(){return this._config},P.prototype.getLocalStreams=function(){return this.localStreams},P.prototype.getRemoteStreams=function(){return this.remoteStreams},P.prototype._createTransceiver=function(g,_){var E={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:g,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)E.iceTransport=this.transceivers[0].iceTransport,E.dtlsTransport=this.transceivers[0].dtlsTransport;else{var k=this._createIceAndDtlsTransports();E.iceTransport=k.iceTransport,E.dtlsTransport=k.dtlsTransport}return _||this.transceivers.push(E),E},P.prototype.addTrack=function(g,_){if(this._isClosed)throw v("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(te){return te.track===g}))throw v("InvalidAccessError","Track already exists.");for(var E,k=0;k<this.transceivers.length;k++)!this.transceivers[k].track&&this.transceivers[k].kind===g.kind&&(E=this.transceivers[k]);return E||(E=this._createTransceiver(g.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(_)&&this.localStreams.push(_),E.track=g,E.stream=_,E.rtpSender=new C.RTCRtpSender(g,E.dtlsTransport),E.rtpSender},P.prototype.addStream=function(g){var _=this;if(x>=15025)g.getTracks().forEach(function(E){_.addTrack(E,g)});else{var w=g.clone();g.getTracks().forEach(function(E,k){var te=w.getTracks()[k];E.addEventListener("enabled",function(O){te.enabled=O.enabled})}),w.getTracks().forEach(function(E){_.addTrack(E,w)})}},P.prototype.removeTrack=function(g){if(this._isClosed)throw v("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(g instanceof C.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var _=this.transceivers.find(function(k){return k.rtpSender===g});if(!_)throw v("InvalidAccessError","Sender was not created by this connection.");var w=_.stream;_.rtpSender.stop(),_.rtpSender=null,_.track=null,_.stream=null,-1===this.transceivers.map(function(k){return k.stream}).indexOf(w)&&this.localStreams.indexOf(w)>-1&&this.localStreams.splice(this.localStreams.indexOf(w),1),this._maybeFireNegotiationNeeded()},P.prototype.removeStream=function(g){var _=this;g.getTracks().forEach(function(w){var E=_.getSenders().find(function(k){return k.track===w});E&&_.removeTrack(E)})},P.prototype.getSenders=function(){return this.transceivers.filter(function(g){return!!g.rtpSender}).map(function(g){return g.rtpSender})},P.prototype.getReceivers=function(){return this.transceivers.filter(function(g){return!!g.rtpReceiver}).map(function(g){return g.rtpReceiver})},P.prototype._createIceGatherer=function(g,_){var w=this;if(_&&g>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var E=new C.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(E,"state",{value:"new",writable:!0}),this.transceivers[g].bufferedCandidateEvents=[],this.transceivers[g].bufferCandidates=function(k){var te=!k.candidate||0===Object.keys(k.candidate).length;E.state=te?"completed":"gathering",null!==w.transceivers[g].bufferedCandidateEvents&&w.transceivers[g].bufferedCandidateEvents.push(k)},E.addEventListener("localcandidate",this.transceivers[g].bufferCandidates),E},P.prototype._gather=function(g,_){var w=this,E=this.transceivers[_].iceGatherer;if(!E.onlocalcandidate){var k=this.transceivers[_].bufferedCandidateEvents;this.transceivers[_].bufferedCandidateEvents=null,E.removeEventListener("localcandidate",this.transceivers[_].bufferCandidates),E.onlocalcandidate=function(te){if(!(w.usingBundle&&_>0)){var O=new Event("icecandidate");O.candidate={sdpMid:g,sdpMLineIndex:_};var le=te.candidate,Je=!le||0===Object.keys(le).length;if(Je)("new"===E.state||"gathering"===E.state)&&(E.state="completed");else{"new"===E.state&&(E.state="gathering"),le.component=1,le.ufrag=E.getLocalParameters().usernameFragment;var q=p.writeCandidate(le);O.candidate=Object.assign(O.candidate,p.parseCandidate(q)),O.candidate.candidate=q,O.candidate.toJSON=function(){return{candidate:O.candidate.candidate,sdpMid:O.candidate.sdpMid,sdpMLineIndex:O.candidate.sdpMLineIndex,usernameFragment:O.candidate.usernameFragment}}}var Z=p.getMediaSections(w._localDescription.sdp);Z[O.candidate.sdpMLineIndex]+=Je?"a=end-of-candidates\r\n":"a="+O.candidate.candidate+"\r\n",w._localDescription.sdp=p.getDescription(w._localDescription.sdp)+Z.join("");var Ct=w.transceivers.every(function(Ke){return Ke.iceGatherer&&"completed"===Ke.iceGatherer.state});"gathering"!==w.iceGatheringState&&(w.iceGatheringState="gathering",w._emitGatheringStateChange()),Je||w._dispatchEvent("icecandidate",O),Ct&&(w._dispatchEvent("icecandidate",new Event("icecandidate")),w.iceGatheringState="complete",w._emitGatheringStateChange())}},C.setTimeout(function(){k.forEach(function(te){E.onlocalcandidate(te)})},0)}},P.prototype._createIceAndDtlsTransports=function(){var g=this,_=new C.RTCIceTransport(null);_.onicestatechange=function(){g._updateIceConnectionState(),g._updateConnectionState()};var w=new C.RTCDtlsTransport(_);return w.ondtlsstatechange=function(){g._updateConnectionState()},w.onerror=function(){Object.defineProperty(w,"state",{value:"failed",writable:!0}),g._updateConnectionState()},{iceTransport:_,dtlsTransport:w}},P.prototype._disposeIceAndDtlsTransports=function(g){var _=this.transceivers[g].iceGatherer;_&&(delete _.onlocalcandidate,delete this.transceivers[g].iceGatherer);var w=this.transceivers[g].iceTransport;w&&(delete w.onicestatechange,delete this.transceivers[g].iceTransport);var E=this.transceivers[g].dtlsTransport;E&&(delete E.ondtlsstatechange,delete E.onerror,delete this.transceivers[g].dtlsTransport)},P.prototype._transceive=function(g,_,w){var E=ne(g.localCapabilities,g.remoteCapabilities);_&&g.rtpSender&&(E.encodings=g.sendEncodingParameters,E.rtcp={cname:p.localCName,compound:g.rtcpParameters.compound},g.recvEncodingParameters.length&&(E.rtcp.ssrc=g.recvEncodingParameters[0].ssrc),g.rtpSender.send(E)),w&&g.rtpReceiver&&E.codecs.length>0&&("video"===g.kind&&g.recvEncodingParameters&&x<15019&&g.recvEncodingParameters.forEach(function(k){delete k.rtx}),E.encodings=g.recvEncodingParameters.length?g.recvEncodingParameters:[{}],E.rtcp={compound:g.rtcpParameters.compound},g.rtcpParameters.cname&&(E.rtcp.cname=g.rtcpParameters.cname),g.sendEncodingParameters.length&&(E.rtcp.ssrc=g.sendEncodingParameters[0].ssrc),g.rtpReceiver.receive(E))},P.prototype.setLocalDescription=function(g){var w,E,_=this;if(-1===["offer","answer"].indexOf(g.type))return Promise.reject(v("TypeError",'Unsupported type "'+g.type+'"'));if(!tt("setLocalDescription",g.type,_.signalingState)||_._isClosed)return Promise.reject(v("InvalidStateError","Can not set local "+g.type+" in state "+_.signalingState));if("offer"===g.type)w=p.splitSections(g.sdp),E=w.shift(),w.forEach(function(te,O){var le=p.parseRtpParameters(te);_.transceivers[O].localCapabilities=le}),_.transceivers.forEach(function(te,O){_._gather(te.mid,O)});else if("answer"===g.type){w=p.splitSections(_._remoteDescription.sdp),E=w.shift();var k=p.matchPrefix(E,"a=ice-lite").length>0;w.forEach(function(te,O){var le=_.transceivers[O],Je=le.iceGatherer,q=le.iceTransport,Z=le.dtlsTransport,Ct=le.localCapabilities,Ke=le.remoteCapabilities;if(!(p.isRejected(te)&&0===p.matchPrefix(te,"a=bundle-only").length||le.rejected)){var Dt=p.getIceParameters(te,E),Tt=p.getDtlsParameters(te,E);k&&(Tt.role="server"),(!_.usingBundle||0===O)&&(_._gather(le.mid,O),"new"===q.state&&q.start(Je,Dt,k?"controlling":"controlled"),"new"===Z.state&&Z.start(Tt));var ot=ne(Ct,Ke);_._transceive(le,ot.codecs.length>0,!1)}})}return _._localDescription={type:g.type,sdp:g.sdp},_._updateSignalingState("offer"===g.type?"have-local-offer":"stable"),Promise.resolve()},P.prototype.setRemoteDescription=function(g){var _=this;if(-1===["offer","answer"].indexOf(g.type))return Promise.reject(v("TypeError",'Unsupported type "'+g.type+'"'));if(!tt("setRemoteDescription",g.type,_.signalingState)||_._isClosed)return Promise.reject(v("InvalidStateError","Can not set remote "+g.type+" in state "+_.signalingState));var w={};_.remoteStreams.forEach(function(q){w[q.id]=q});var E=[],k=p.splitSections(g.sdp),te=k.shift(),O=p.matchPrefix(te,"a=ice-lite").length>0,le=p.matchPrefix(te,"a=group:BUNDLE ").length>0;_.usingBundle=le;var Je=p.matchPrefix(te,"a=ice-options:")[0];return _.canTrickleIceCandidates=!!Je&&Je.substr(14).split(" ").indexOf("trickle")>=0,k.forEach(function(q,Z){var Ct=p.splitLines(q),Ke=p.getKind(q),Ne=p.isRejected(q)&&0===p.matchPrefix(q,"a=bundle-only").length,Dt=Ct[0].substr(2).split(" ")[2],Tt=p.getDirection(q,te),ot=p.parseMsid(q),aa=p.getMid(q)||p.generateIdentifier();if(Ne||"application"===Ke&&("DTLS/SCTP"===Dt||"UDP/DTLS/SCTP"===Dt))_.transceivers[Z]={mid:aa,kind:Ke,protocol:Dt,rejected:!0};else{!Ne&&_.transceivers[Z]&&_.transceivers[Z].rejected&&(_.transceivers[Z]=_._createTransceiver(Ke,!0));var ue,Un,Ii,Ri,Se,Ai,No,Kr,Tn,Fo,xi,on=p.parseRtpParameters(q);Ne||(Fo=p.getIceParameters(q,te),(xi=p.getDtlsParameters(q,te)).role="client"),No=p.parseRtpEncodingParameters(q);var st=p.parseRtcpParameters(q),nt=p.matchPrefix(q,"a=end-of-candidates",te).length>0,Rr=p.matchPrefix(q,"a=candidate:").map(function(Vt){return p.parseCandidate(Vt)}).filter(function(Vt){return 1===Vt.component});if(("offer"===g.type||"answer"===g.type)&&!Ne&&le&&Z>0&&_.transceivers[Z]&&(_._disposeIceAndDtlsTransports(Z),_.transceivers[Z].iceGatherer=_.transceivers[0].iceGatherer,_.transceivers[Z].iceTransport=_.transceivers[0].iceTransport,_.transceivers[Z].dtlsTransport=_.transceivers[0].dtlsTransport,_.transceivers[Z].rtpSender&&_.transceivers[Z].rtpSender.setTransport(_.transceivers[0].dtlsTransport),_.transceivers[Z].rtpReceiver&&_.transceivers[Z].rtpReceiver.setTransport(_.transceivers[0].dtlsTransport)),"offer"!==g.type||Ne)"answer"!==g.type||Ne||(Un=(ue=_.transceivers[Z]).iceGatherer,Ii=ue.iceTransport,Ri=ue.dtlsTransport,Se=ue.rtpReceiver,Ai=ue.sendEncodingParameters,Kr=ue.localCapabilities,_.transceivers[Z].recvEncodingParameters=No,_.transceivers[Z].remoteCapabilities=on,_.transceivers[Z].rtcpParameters=st,Rr.length&&"new"===Ii.state&&(!O&&!nt||le&&0!==Z?Rr.forEach(function(Vt){pe(ue.iceTransport,Vt)}):Ii.setRemoteCandidates(Rr)),(!le||0===Z)&&("new"===Ii.state&&Ii.start(Un,Fo,"controlling"),"new"===Ri.state&&Ri.start(xi)),!ne(ue.localCapabilities,ue.remoteCapabilities).codecs.filter(function(Vt){return"rtx"===Vt.name.toLowerCase()}).length&&ue.sendEncodingParameters[0].rtx&&delete ue.sendEncodingParameters[0].rtx,_._transceive(ue,"sendrecv"===Tt||"recvonly"===Tt,"sendrecv"===Tt||"sendonly"===Tt),!Se||"sendrecv"!==Tt&&"sendonly"!==Tt?delete ue.rtpReceiver:(Tn=Se.track,ot?(w[ot.stream]||(w[ot.stream]=new C.MediaStream),H(Tn,w[ot.stream]),E.push([Tn,Se,w[ot.stream]])):(w.default||(w.default=new C.MediaStream),H(Tn,w.default),E.push([Tn,Se,w.default]))));else{(ue=_.transceivers[Z]||_._createTransceiver(Ke)).mid=aa,ue.iceGatherer||(ue.iceGatherer=_._createIceGatherer(Z,le)),Rr.length&&"new"===ue.iceTransport.state&&(!nt||le&&0!==Z?Rr.forEach(function(Vt){pe(ue.iceTransport,Vt)}):ue.iceTransport.setRemoteCandidates(Rr)),Kr=C.RTCRtpReceiver.getCapabilities(Ke),x<15019&&(Kr.codecs=Kr.codecs.filter(function(Vt){return"rtx"!==Vt.name})),Ai=ue.sendEncodingParameters||[{ssrc:1001*(2*Z+2)}];var $n,be=!1;"sendrecv"===Tt||"sendonly"===Tt?(be=!ue.rtpReceiver,Se=ue.rtpReceiver||new C.RTCRtpReceiver(ue.dtlsTransport,Ke),be&&(Tn=Se.track,ot&&"-"===ot.stream||(ot?(w[ot.stream]||(w[ot.stream]=new C.MediaStream,Object.defineProperty(w[ot.stream],"id",{get:function(){return ot.stream}})),Object.defineProperty(Tn,"id",{get:function(){return ot.track}}),$n=w[ot.stream]):(w.default||(w.default=new C.MediaStream),$n=w.default)),$n&&(H(Tn,$n),ue.associatedRemoteMediaStreams.push($n)),E.push([Tn,Se,$n]))):ue.rtpReceiver&&ue.rtpReceiver.track&&(ue.associatedRemoteMediaStreams.forEach(function(Vt){var wl=Vt.getTracks().find(function(Mp){return Mp.id===ue.rtpReceiver.track.id});wl&&function se(g,_){_.removeTrack(g),_.dispatchEvent(new C.MediaStreamTrackEvent("removetrack",{track:g}))}(wl,Vt)}),ue.associatedRemoteMediaStreams=[]),ue.localCapabilities=Kr,ue.remoteCapabilities=on,ue.rtpReceiver=Se,ue.rtcpParameters=st,ue.sendEncodingParameters=Ai,ue.recvEncodingParameters=No,_._transceive(_.transceivers[Z],!1,be)}}}),void 0===_._dtlsRole&&(_._dtlsRole="offer"===g.type?"active":"passive"),_._remoteDescription={type:g.type,sdp:g.sdp},_._updateSignalingState("offer"===g.type?"have-remote-offer":"stable"),Object.keys(w).forEach(function(q){var Z=w[q];if(Z.getTracks().length){if(-1===_.remoteStreams.indexOf(Z)){_.remoteStreams.push(Z);var Ct=new Event("addstream");Ct.stream=Z,C.setTimeout(function(){_._dispatchEvent("addstream",Ct)})}E.forEach(function(Ke){Z.id===Ke[2].id&&ke(_,Ke[0],Ke[1],[Z])})}}),E.forEach(function(q){q[2]||ke(_,q[0],q[1],[])}),C.setTimeout(function(){!_||!_.transceivers||_.transceivers.forEach(function(q){q.iceTransport&&"new"===q.iceTransport.state&&q.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),q.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},P.prototype.close=function(){this.transceivers.forEach(function(g){g.iceTransport&&g.iceTransport.stop(),g.dtlsTransport&&g.dtlsTransport.stop(),g.rtpSender&&g.rtpSender.stop(),g.rtpReceiver&&g.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},P.prototype._updateSignalingState=function(g){this.signalingState=g;var _=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",_)},P.prototype._maybeFireNegotiationNeeded=function(){var g=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,C.setTimeout(function(){if(g.needNegotiation){g.needNegotiation=!1;var _=new Event("negotiationneeded");g._dispatchEvent("negotiationneeded",_)}},0))},P.prototype._updateIceConnectionState=function(){var g,_={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(E){E.iceTransport&&!E.rejected&&_[E.iceTransport.state]++}),g="new",_.failed>0?g="failed":_.checking>0?g="checking":_.disconnected>0?g="disconnected":_.new>0?g="new":_.connected>0?g="connected":_.completed>0&&(g="completed"),g!==this.iceConnectionState){this.iceConnectionState=g;var w=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",w)}},P.prototype._updateConnectionState=function(){var g,_={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(E){E.iceTransport&&E.dtlsTransport&&!E.rejected&&(_[E.iceTransport.state]++,_[E.dtlsTransport.state]++)}),_.connected+=_.completed,g="new",_.failed>0?g="failed":_.connecting>0?g="connecting":_.disconnected>0?g="disconnected":_.new>0?g="new":_.connected>0&&(g="connected"),g!==this.connectionState){this.connectionState=g;var w=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",w)}},P.prototype.createOffer=function(){var g=this;if(g._isClosed)return Promise.reject(v("InvalidStateError","Can not call createOffer after close"));var _=g.transceivers.filter(function(O){return"audio"===O.kind}).length,w=g.transceivers.filter(function(O){return"video"===O.kind}).length,E=arguments[0];if(E){if(E.mandatory||E.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==E.offerToReceiveAudio&&(_=!0===E.offerToReceiveAudio?1:!1===E.offerToReceiveAudio?0:E.offerToReceiveAudio),void 0!==E.offerToReceiveVideo&&(w=!0===E.offerToReceiveVideo?1:!1===E.offerToReceiveVideo?0:E.offerToReceiveVideo)}for(g.transceivers.forEach(function(O){"audio"===O.kind?--_<0&&(O.wantReceive=!1):"video"===O.kind&&--w<0&&(O.wantReceive=!1)});_>0||w>0;)_>0&&(g._createTransceiver("audio"),_--),w>0&&(g._createTransceiver("video"),w--);var k=p.writeSessionBoilerplate(g._sdpSessionId,g._sdpSessionVersion++);g.transceivers.forEach(function(O,le){var Je=O.track,q=O.kind,Z=O.mid||p.generateIdentifier();O.mid=Z,O.iceGatherer||(O.iceGatherer=g._createIceGatherer(le,g.usingBundle));var Ct=C.RTCRtpSender.getCapabilities(q);x<15019&&(Ct.codecs=Ct.codecs.filter(function(Ne){return"rtx"!==Ne.name})),Ct.codecs.forEach(function(Ne){"H264"===Ne.name&&void 0===Ne.parameters["level-asymmetry-allowed"]&&(Ne.parameters["level-asymmetry-allowed"]="1"),O.remoteCapabilities&&O.remoteCapabilities.codecs&&O.remoteCapabilities.codecs.forEach(function(Dt){Ne.name.toLowerCase()===Dt.name.toLowerCase()&&Ne.clockRate===Dt.clockRate&&(Ne.preferredPayloadType=Dt.payloadType)})}),Ct.headerExtensions.forEach(function(Ne){(O.remoteCapabilities&&O.remoteCapabilities.headerExtensions||[]).forEach(function(Tt){Ne.uri===Tt.uri&&(Ne.id=Tt.id)})});var Ke=O.sendEncodingParameters||[{ssrc:1001*(2*le+1)}];Je&&x>=15019&&"video"===q&&!Ke[0].rtx&&(Ke[0].rtx={ssrc:Ke[0].ssrc+1}),O.wantReceive&&(O.rtpReceiver=new C.RTCRtpReceiver(O.dtlsTransport,q)),O.localCapabilities=Ct,O.sendEncodingParameters=Ke}),"max-compat"!==g._config.bundlePolicy&&(k+="a=group:BUNDLE "+g.transceivers.map(function(O){return O.mid}).join(" ")+"\r\n"),k+="a=ice-options:trickle\r\n",g.transceivers.forEach(function(O,le){k+=N(O,O.localCapabilities,"offer",O.stream,g._dtlsRole),k+="a=rtcp-rsize\r\n",O.iceGatherer&&"new"!==g.iceGatheringState&&(0===le||!g.usingBundle)&&(O.iceGatherer.getLocalCandidates().forEach(function(Je){Je.component=1,k+="a="+p.writeCandidate(Je)+"\r\n"}),"completed"===O.iceGatherer.state&&(k+="a=end-of-candidates\r\n"))});var te=new C.RTCSessionDescription({type:"offer",sdp:k});return Promise.resolve(te)},P.prototype.createAnswer=function(){var g=this;if(g._isClosed)return Promise.reject(v("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==g.signalingState&&"have-local-pranswer"!==g.signalingState)return Promise.reject(v("InvalidStateError","Can not call createAnswer in signalingState "+g.signalingState));var _=p.writeSessionBoilerplate(g._sdpSessionId,g._sdpSessionVersion++);g.usingBundle&&(_+="a=group:BUNDLE "+g.transceivers.map(function(k){return k.mid}).join(" ")+"\r\n"),_+="a=ice-options:trickle\r\n";var w=p.getMediaSections(g._remoteDescription.sdp).length;g.transceivers.forEach(function(k,te){if(!(te+1>w)){if(k.rejected)return"application"===k.kind?_+="DTLS/SCTP"===k.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+k.protocol+" webrtc-datachannel\r\n":"audio"===k.kind?_+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===k.kind&&(_+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(_+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+k.mid+"\r\n");var O;k.stream&&("audio"===k.kind?O=k.stream.getAudioTracks()[0]:"video"===k.kind&&(O=k.stream.getVideoTracks()[0]),O&&x>=15019&&"video"===k.kind&&!k.sendEncodingParameters[0].rtx&&(k.sendEncodingParameters[0].rtx={ssrc:k.sendEncodingParameters[0].ssrc+1}));var le=ne(k.localCapabilities,k.remoteCapabilities);!le.codecs.filter(function(q){return"rtx"===q.name.toLowerCase()}).length&&k.sendEncodingParameters[0].rtx&&delete k.sendEncodingParameters[0].rtx,_+=N(k,le,"answer",k.stream,g._dtlsRole),k.rtcpParameters&&k.rtcpParameters.reducedSize&&(_+="a=rtcp-rsize\r\n")}});var E=new C.RTCSessionDescription({type:"answer",sdp:_});return Promise.resolve(E)},P.prototype.addIceCandidate=function(g){var w,_=this;return g&&void 0===g.sdpMLineIndex&&!g.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(E,k){if(!_._remoteDescription)return k(v("InvalidStateError","Can not add ICE candidate without a remote description"));if(g&&""!==g.candidate){var O=g.sdpMLineIndex;if(g.sdpMid)for(var le=0;le<_.transceivers.length;le++)if(_.transceivers[le].mid===g.sdpMid){O=le;break}var Je=_.transceivers[O];if(!Je)return k(v("OperationError","Can not add ICE candidate"));if(Je.rejected)return E();var q=Object.keys(g.candidate).length>0?p.parseCandidate(g.candidate):{};if("tcp"===q.protocol&&(0===q.port||9===q.port)||q.component&&1!==q.component)return E();if((0===O||O>0&&Je.iceTransport!==_.transceivers[0].iceTransport)&&!pe(Je.iceTransport,q))return k(v("OperationError","Can not add ICE candidate"));var Z=g.candidate.trim();0===Z.indexOf("a=")&&(Z=Z.substr(2)),(w=p.getMediaSections(_._remoteDescription.sdp))[O]+="a="+(q.type?Z:"end-of-candidates")+"\r\n",_._remoteDescription.sdp=p.getDescription(_._remoteDescription.sdp)+w.join("")}else for(var te=0;te<_.transceivers.length&&(_.transceivers[te].rejected||(_.transceivers[te].iceTransport.addRemoteCandidate({}),(w=p.getMediaSections(_._remoteDescription.sdp))[te]+="a=end-of-candidates\r\n",_._remoteDescription.sdp=p.getDescription(_._remoteDescription.sdp)+w.join(""),!_.usingBundle));te++);E()})},P.prototype.getStats=function(g){if(g&&g instanceof C.MediaStreamTrack){var _=null;if(this.transceivers.forEach(function(E){E.rtpSender&&E.rtpSender.track===g?_=E.rtpSender:E.rtpReceiver&&E.rtpReceiver.track===g&&(_=E.rtpReceiver)}),!_)throw v("InvalidAccessError","Invalid selector.");return _.getStats()}var w=[];return this.transceivers.forEach(function(E){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(k){E[k]&&w.push(E[k].getStats())})}),Promise.all(w).then(function(E){var k=new Map;return E.forEach(function(te){te.forEach(function(O){k.set(O.id,O)})}),k})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(g){var _=C[g];if(_&&_.prototype&&_.prototype.getStats){var w=_.prototype.getStats;_.prototype.getStats=function(){return w.apply(this).then(function(E){var k=new Map;return Object.keys(E).forEach(function(te){E[te].type=function b(C){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[C.type]||C.type}(E[te]),k.set(te,E[te])}),k})}}});var me=["createOffer","createAnswer"];return me.forEach(function(g){var _=P.prototype[g];P.prototype[g]=function(){var w=arguments;return"function"==typeof w[0]||"function"==typeof w[1]?_.apply(this,[arguments[2]]).then(function(E){"function"==typeof w[0]&&w[0].apply(null,[E])},function(E){"function"==typeof w[1]&&w[1].apply(null,[E])}):_.apply(this,arguments)}}),(me=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(g){var _=P.prototype[g];P.prototype[g]=function(){var w=arguments;return"function"==typeof w[1]||"function"==typeof w[2]?_.apply(this,arguments).then(function(){"function"==typeof w[1]&&w[1].apply(null)},function(E){"function"==typeof w[2]&&w[2].apply(null,[E])}):_.apply(this,arguments)}}),["getStats"].forEach(function(g){var _=P.prototype[g];P.prototype[g]=function(){var w=arguments;return"function"==typeof w[1]?_.apply(this,arguments).then(function(){"function"==typeof w[1]&&w[1].apply(null)}):_.apply(this,arguments)}}),P}},463:Zt=>{"use strict";var T={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};T.localCName=T.generateIdentifier(),T.splitLines=function(m){return m.trim().split("\n").map(function(p){return p.trim()})},T.splitSections=function(m){return m.split("\nm=").map(function(b,N){return(N>0?"m="+b:b).trim()+"\r\n"})},T.getDescription=function(m){var p=T.splitSections(m);return p&&p[0]},T.getMediaSections=function(m){var p=T.splitSections(m);return p.shift(),p},T.matchPrefix=function(m,p){return T.splitLines(m).filter(function(b){return 0===b.indexOf(p)})},T.parseCandidate=function(m){for(var p,b={foundation:(p=0===m.indexOf("a=candidate:")?m.substring(12).split(" "):m.substring(10).split(" "))[0],component:parseInt(p[1],10),protocol:p[2].toLowerCase(),priority:parseInt(p[3],10),ip:p[4],address:p[4],port:parseInt(p[5],10),type:p[7]},N=8;N<p.length;N+=2)switch(p[N]){case"raddr":b.relatedAddress=p[N+1];break;case"rport":b.relatedPort=parseInt(p[N+1],10);break;case"tcptype":b.tcpType=p[N+1];break;case"ufrag":b.ufrag=p[N+1],b.usernameFragment=p[N+1];break;default:b[p[N]]=p[N+1]}return b},T.writeCandidate=function(m){var p=[];p.push(m.foundation),p.push(m.component),p.push(m.protocol.toUpperCase()),p.push(m.priority),p.push(m.address||m.ip),p.push(m.port);var b=m.type;return p.push("typ"),p.push(b),"host"!==b&&m.relatedAddress&&m.relatedPort&&(p.push("raddr"),p.push(m.relatedAddress),p.push("rport"),p.push(m.relatedPort)),m.tcpType&&"tcp"===m.protocol.toLowerCase()&&(p.push("tcptype"),p.push(m.tcpType)),(m.usernameFragment||m.ufrag)&&(p.push("ufrag"),p.push(m.usernameFragment||m.ufrag)),"candidate:"+p.join(" ")},T.parseIceOptions=function(m){return m.substr(14).split(" ")},T.parseRtpMap=function(m){var p=m.substr(9).split(" "),b={payloadType:parseInt(p.shift(),10)};return p=p[0].split("/"),b.name=p[0],b.clockRate=parseInt(p[1],10),b.channels=3===p.length?parseInt(p[2],10):1,b.numChannels=b.channels,b},T.writeRtpMap=function(m){var p=m.payloadType;void 0!==m.preferredPayloadType&&(p=m.preferredPayloadType);var b=m.channels||m.numChannels||1;return"a=rtpmap:"+p+" "+m.name+"/"+m.clockRate+(1!==b?"/"+b:"")+"\r\n"},T.parseExtmap=function(m){var p=m.substr(9).split(" ");return{id:parseInt(p[0],10),direction:p[0].indexOf("/")>0?p[0].split("/")[1]:"sendrecv",uri:p[1]}},T.writeExtmap=function(m){return"a=extmap:"+(m.id||m.preferredId)+(m.direction&&"sendrecv"!==m.direction?"/"+m.direction:"")+" "+m.uri+"\r\n"},T.parseFmtp=function(m){for(var b,p={},N=m.substr(m.indexOf(" ")+1).split(";"),F=0;F<N.length;F++)p[(b=N[F].trim().split("="))[0].trim()]=b[1];return p},T.writeFmtp=function(m){var p="",b=m.payloadType;if(void 0!==m.preferredPayloadType&&(b=m.preferredPayloadType),m.parameters&&Object.keys(m.parameters).length){var N=[];Object.keys(m.parameters).forEach(function(F){N.push(m.parameters[F]?F+"="+m.parameters[F]:F)}),p+="a=fmtp:"+b+" "+N.join(";")+"\r\n"}return p},T.parseRtcpFb=function(m){var p=m.substr(m.indexOf(" ")+1).split(" ");return{type:p.shift(),parameter:p.join(" ")}},T.writeRtcpFb=function(m){var p="",b=m.payloadType;return void 0!==m.preferredPayloadType&&(b=m.preferredPayloadType),m.rtcpFeedback&&m.rtcpFeedback.length&&m.rtcpFeedback.forEach(function(N){p+="a=rtcp-fb:"+b+" "+N.type+(N.parameter&&N.parameter.length?" "+N.parameter:"")+"\r\n"}),p},T.parseSsrcMedia=function(m){var p=m.indexOf(" "),b={ssrc:parseInt(m.substr(7,p-7),10)},N=m.indexOf(":",p);return N>-1?(b.attribute=m.substr(p+1,N-p-1),b.value=m.substr(N+1)):b.attribute=m.substr(p+1),b},T.parseSsrcGroup=function(m){var p=m.substr(13).split(" ");return{semantics:p.shift(),ssrcs:p.map(function(b){return parseInt(b,10)})}},T.getMid=function(m){var p=T.matchPrefix(m,"a=mid:")[0];if(p)return p.substr(6)},T.parseFingerprint=function(m){var p=m.substr(14).split(" ");return{algorithm:p[0].toLowerCase(),value:p[1]}},T.getDtlsParameters=function(m,p){return{role:"auto",fingerprints:T.matchPrefix(m+p,"a=fingerprint:").map(T.parseFingerprint)}},T.writeDtlsParameters=function(m,p){var b="a=setup:"+p+"\r\n";return m.fingerprints.forEach(function(N){b+="a=fingerprint:"+N.algorithm+" "+N.value+"\r\n"}),b},T.parseCryptoLine=function(m){var p=m.substr(9).split(" ");return{tag:parseInt(p[0],10),cryptoSuite:p[1],keyParams:p[2],sessionParams:p.slice(3)}},T.writeCryptoLine=function(m){return"a=crypto:"+m.tag+" "+m.cryptoSuite+" "+("object"==typeof m.keyParams?T.writeCryptoKeyParams(m.keyParams):m.keyParams)+(m.sessionParams?" "+m.sessionParams.join(" "):"")+"\r\n"},T.parseCryptoKeyParams=function(m){if(0!==m.indexOf("inline:"))return null;var p=m.substr(7).split("|");return{keyMethod:"inline",keySalt:p[0],lifeTime:p[1],mkiValue:p[2]?p[2].split(":")[0]:void 0,mkiLength:p[2]?p[2].split(":")[1]:void 0}},T.writeCryptoKeyParams=function(m){return m.keyMethod+":"+m.keySalt+(m.lifeTime?"|"+m.lifeTime:"")+(m.mkiValue&&m.mkiLength?"|"+m.mkiValue+":"+m.mkiLength:"")},T.getCryptoParameters=function(m,p){return T.matchPrefix(m+p,"a=crypto:").map(T.parseCryptoLine)},T.getIceParameters=function(m,p){var b=T.matchPrefix(m+p,"a=ice-ufrag:")[0],N=T.matchPrefix(m+p,"a=ice-pwd:")[0];return b&&N?{usernameFragment:b.substr(12),password:N.substr(10)}:null},T.writeIceParameters=function(m){return"a=ice-ufrag:"+m.usernameFragment+"\r\na=ice-pwd:"+m.password+"\r\n"},T.parseRtpParameters=function(m){for(var p={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},N=T.splitLines(m)[0].split(" "),F=3;F<N.length;F++){var ne=N[F],tt=T.matchPrefix(m,"a=rtpmap:"+ne+" ")[0];if(tt){var pe=T.parseRtpMap(tt),v=T.matchPrefix(m,"a=fmtp:"+ne+" ");switch(pe.parameters=v.length?T.parseFmtp(v[0]):{},pe.rtcpFeedback=T.matchPrefix(m,"a=rtcp-fb:"+ne+" ").map(T.parseRtcpFb),p.codecs.push(pe),pe.name.toUpperCase()){case"RED":case"ULPFEC":p.fecMechanisms.push(pe.name.toUpperCase())}}}return T.matchPrefix(m,"a=extmap:").forEach(function(C){p.headerExtensions.push(T.parseExtmap(C))}),p},T.writeRtpDescription=function(m,p){var b="";b+="m="+m+" ",b+=p.codecs.length>0?"9":"0",b+=" UDP/TLS/RTP/SAVPF ",b+=p.codecs.map(function(F){return void 0!==F.preferredPayloadType?F.preferredPayloadType:F.payloadType}).join(" ")+"\r\n",b+="c=IN IP4 0.0.0.0\r\n",b+="a=rtcp:9 IN IP4 0.0.0.0\r\n",p.codecs.forEach(function(F){b+=T.writeRtpMap(F),b+=T.writeFmtp(F),b+=T.writeRtcpFb(F)});var N=0;return p.codecs.forEach(function(F){F.maxptime>N&&(N=F.maxptime)}),N>0&&(b+="a=maxptime:"+N+"\r\n"),b+="a=rtcp-mux\r\n",p.headerExtensions&&p.headerExtensions.forEach(function(F){b+=T.writeExtmap(F)}),b},T.parseRtpEncodingParameters=function(m){var pe,p=[],b=T.parseRtpParameters(m),N=-1!==b.fecMechanisms.indexOf("RED"),F=-1!==b.fecMechanisms.indexOf("ULPFEC"),ne=T.matchPrefix(m,"a=ssrc:").map(function(x){return T.parseSsrcMedia(x)}).filter(function(x){return"cname"===x.attribute}),tt=ne.length>0&&ne[0].ssrc,v=T.matchPrefix(m,"a=ssrc-group:FID").map(function(x){return x.substr(17).split(" ").map(function(se){return parseInt(se,10)})});v.length>0&&v[0].length>1&&v[0][0]===tt&&(pe=v[0][1]),b.codecs.forEach(function(x){if("RTX"===x.name.toUpperCase()&&x.parameters.apt){var H={ssrc:tt,codecPayloadType:parseInt(x.parameters.apt,10)};tt&&pe&&(H.rtx={ssrc:pe}),p.push(H),N&&((H=JSON.parse(JSON.stringify(H))).fec={ssrc:tt,mechanism:F?"red+ulpfec":"red"},p.push(H))}}),0===p.length&&tt&&p.push({ssrc:tt});var C=T.matchPrefix(m,"b=");return C.length&&(C=0===C[0].indexOf("b=TIAS:")?parseInt(C[0].substr(7),10):0===C[0].indexOf("b=AS:")?1e3*parseInt(C[0].substr(5),10)*.95-16e3:void 0,p.forEach(function(x){x.maxBitrate=C})),p},T.parseRtcpParameters=function(m){var p={},b=T.matchPrefix(m,"a=ssrc:").map(function(ne){return T.parseSsrcMedia(ne)}).filter(function(ne){return"cname"===ne.attribute})[0];b&&(p.cname=b.value,p.ssrc=b.ssrc);var N=T.matchPrefix(m,"a=rtcp-rsize");p.reducedSize=N.length>0,p.compound=0===N.length;var F=T.matchPrefix(m,"a=rtcp-mux");return p.mux=F.length>0,p},T.parseMsid=function(m){var p,b=T.matchPrefix(m,"a=msid:");if(1===b.length)return{stream:(p=b[0].substr(7).split(" "))[0],track:p[1]};var N=T.matchPrefix(m,"a=ssrc:").map(function(F){return T.parseSsrcMedia(F)}).filter(function(F){return"msid"===F.attribute});return N.length>0?{stream:(p=N[0].value.split(" "))[0],track:p[1]}:void 0},T.parseSctpDescription=function(m){var N,p=T.parseMLine(m),b=T.matchPrefix(m,"a=max-message-size:");b.length>0&&(N=parseInt(b[0].substr(19),10)),isNaN(N)&&(N=65536);var F=T.matchPrefix(m,"a=sctp-port:");if(F.length>0)return{port:parseInt(F[0].substr(12),10),protocol:p.fmt,maxMessageSize:N};if(T.matchPrefix(m,"a=sctpmap:").length>0){var tt=T.matchPrefix(m,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(tt[0],10),protocol:tt[1],maxMessageSize:N}}},T.writeSctpDescription=function(m,p){var b=[];return b="DTLS/SCTP"!==m.protocol?["m="+m.kind+" 9 "+m.protocol+" "+p.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+p.port+"\r\n"]:["m="+m.kind+" 9 "+m.protocol+" "+p.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+p.port+" "+p.protocol+" 65535\r\n"],void 0!==p.maxMessageSize&&b.push("a=max-message-size:"+p.maxMessageSize+"\r\n"),b.join("")},T.generateSessionId=function(){return Math.random().toString().substr(2,21)},T.writeSessionBoilerplate=function(m,p,b){var F=void 0!==p?p:2;return"v=0\r\no="+(b||"thisisadapterortc")+" "+(m||T.generateSessionId())+" "+F+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},T.writeMediaSection=function(m,p,b,N){var F=T.writeRtpDescription(m.kind,p);if(F+=T.writeIceParameters(m.iceGatherer.getLocalParameters()),F+=T.writeDtlsParameters(m.dtlsTransport.getLocalParameters(),"offer"===b?"actpass":"active"),F+="a=mid:"+m.mid+"\r\n",F+=m.direction?"a="+m.direction+"\r\n":m.rtpSender&&m.rtpReceiver?"a=sendrecv\r\n":m.rtpSender?"a=sendonly\r\n":m.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",m.rtpSender){var ne="msid:"+N.id+" "+m.rtpSender.track.id+"\r\n";F+="a="+ne,F+="a=ssrc:"+m.sendEncodingParameters[0].ssrc+" "+ne,m.sendEncodingParameters[0].rtx&&(F+="a=ssrc:"+m.sendEncodingParameters[0].rtx.ssrc+" "+ne,F+="a=ssrc-group:FID "+m.sendEncodingParameters[0].ssrc+" "+m.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return F+="a=ssrc:"+m.sendEncodingParameters[0].ssrc+" cname:"+T.localCName+"\r\n",m.rtpSender&&m.sendEncodingParameters[0].rtx&&(F+="a=ssrc:"+m.sendEncodingParameters[0].rtx.ssrc+" cname:"+T.localCName+"\r\n"),F},T.getDirection=function(m,p){for(var b=T.splitLines(m),N=0;N<b.length;N++)switch(b[N]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return b[N].substr(2)}return p?T.getDirection(p):"sendrecv"},T.getKind=function(m){return T.splitLines(m)[0].split(" ")[0].substr(2)},T.isRejected=function(m){return"0"===m.split(" ",2)[1]},T.parseMLine=function(m){var b=T.splitLines(m)[0].substr(2).split(" ");return{kind:b[0],port:parseInt(b[1],10),protocol:b[2],fmt:b.slice(3).join(" ")}},T.parseOLine=function(m){var b=T.matchPrefix(m,"o=")[0].substr(2).split(" ");return{username:b[0],sessionId:b[1],sessionVersion:parseInt(b[2],10),netType:b[3],addressType:b[4],address:b[5]}},T.isValidSDP=function(m){if("string"!=typeof m||0===m.length)return!1;for(var p=T.splitLines(m),b=0;b<p.length;b++)if(p[b].length<2||"="!==p[b].charAt(1))return!1;return!0},Zt.exports=T}},Zt=>{Zt(Zt.s=122)}]);